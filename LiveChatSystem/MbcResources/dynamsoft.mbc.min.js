(function(){window.MediaStream&&!('stop'in MediaStream.prototype)&&(window.MediaStream.prototype.stop=function(){this.getTracks().forEach(function(g){g.stop()})}),String.prototype.endsWith||(String.prototype.endsWith=function(g,S){return(void 0===S||S>this.length)&&(S=this.length),this.substring(S-g.length,S)===g})})();var dynamsoft=dynamsoft||{};dynamsoft.lib=dynamsoft.lib||{},function(lib){function hasOwnProperty(g,S){return OP.hasOwnProperty.call(g,S)}function Attributes(g){var S=this;for(S.__attrs={},S.__attrVals={},S.userConfig=g;c;)S.addAttrs(c.ATTRS),c=c.superclass?c.superclass.constructor:null;lib.mix(S.__attrs,g)}var OP=Object.prototype,AP=Array.prototype,toString=OP.toString,win=window,EMPTY_STR='',FALSE=!1,TRUE=!0,_console=FALSE,class2TypeMap={},nil,mix,each,navInfo,isNil,types,mixIsFunctions;lib.mix=mix=function(g,S){for(var C in S)g[C]=S[C];return g},isNil=function(g){return g===nil},isDef=function(g){return g!==nil},mix(lib,{isDef:isDef,isUndef:isNil,isUndefined:isNil,isNull:function(g){return null===g},isNaN:function(g){return isNaN(g)},type:function(g){return null===g||g===nil?g+'':class2TypeMap[toString.call(g)]||'object'},isPlainObject:function(g){if(!g||'object'!==lib.type(g)||g.nodeType||g.window==g)return FALSE;var S,C;try{if((C=g.constructor)&&!hasOwnProperty(g,'constructor')&&!hasOwnProperty(C.prototype,'isPrototypeOf'))return FALSE}catch(T){return FALSE}for(S in g);return isNil(S)||hasOwnProperty(g,S)}}),mixIsFunctions=function(g,S){class2TypeMap['[object '+g+']']=S=g.toLowerCase(),lib['is'+g]=function(C){return lib.type(C)===S}},mixIsFunctions('Function'),lib.each=each=function(g,S,C){if(g){var I=0,O=g.length,N=isNil(O)||lib.isFunction(g),T,P,E;if(C=C||null,N)for(E=lib.keys(g);I<E.length&&(T=E[I],S.call(C,g[T],T,g)!==FALSE);I++);else for(P=g[0];I<O&&S.call(C,P,I,g)!==FALSE;P=g[++I]);}return g},types=['String','Object','Boolean','Number'],Array.isArray?lib.isArray=Array.isArray:types.push('Array'),each(types,mixIsFunctions),isNil(win.console)||(_console=win.console,(!lib.isFunction(_console.log)||!lib.isFunction(_console.error))&&(_console=!1)),mix(lib,{debug:FALSE,log:function(g){lib.debug&&_console&&_console.log(g)},error:function(g){lib.debug&&_console&&_console.error(g)},getLogger:function(){var g=lib.log;return{warn:g,log:g,info:g,debug:g}},nil:nil,noop:function(){}}),mix(lib,{startsWith:function(g,S){return 0===g.lastIndexOf(S,0)},endsWith:function(g,S){var C=g.length-S.length;return 0<=C&&g.indexOf(S,C)===C},replaceAll:function(str,sFind,sReplace){return str.replace(eval('/'+sFind+'/gi'),sReplace)},upperCaseFirst:function(g){return g.charAt(0).toUpperCase()+g.substr(1)},makeArray:function(g){if(null==g)return[];if(lib.isArray(g))return g;var S=typeof g.length,C=typeof g;if('number'!=S||g.alert||'string'==C||'function'==C&&!('item'in g&&'number'==S))return[g];for(var T=[],P=0,E=g.length;P<E;P++)T[P]=g[P];return T}});var hasEnumBug=!{toString:1}.propertyIsEnumerable('toString'),enumProperties=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toString','toLocaleString','valueOf'];lib.keys=Object.keys||function(g){var S=[],C,T;for(C in g)g.hasOwnProperty(C)&&S.push(C);if(hasEnumBug)for(T=enumProperties.length-1;0<=T;T--)C=enumProperties[T],g.hasOwnProperty(C)&&S.push(C);return S};var doc=win.document,docElement=doc&&doc.documentElement,head=doc.getElementsByTagName('head')[0]||docElement,scriptOnload=doc.createElement('script').readyState?function(g,S){var C=g.onreadystatechange;g.onreadystatechange=function(){var T=g.readyState;('loaded'===T||'complete'===T)&&(g.onreadystatechange=null,C&&C(),S.call(this))}}:function(g,S){g.addEventListener('load',S,FALSE),g.addEventListener('error',S,FALSE)};lib.getScript=function(g,S,C){var T,P;return(lib.isFunction(C)||(C=function(){}),!lib.isString(g)||g==EMPTY_STR)?void C():(T=doc.createElement('script'),P=['',g].join(EMPTY_STR),T.src=P,S&&(T.async=TRUE),T.charset='utf-8',scriptOnload(T,C),head.insertBefore(T,head.firstChild),T)},lib.getCss=function(g,S){var P=S,C;return(lib.isFunction(P)||(P=!1),!lib.isString(g)||g==EMPTY_STR)?void(P&&P()):(C=doc.createElement('link'),C.href=g,C.rel='stylesheet',C.async=TRUE,P&&scriptOnload(C,P),head.insertBefore(C,head.firstChild),C)},lib.getRandom=function(){for(var g=new Date().getTime()%1e4,S=[],T=0,C;5>T;T++){if(C=Math.floor(10*Math.random()),0==T&&0==C){T=-1;continue}S.push(C)}return 10>g?S.push('000'):100>g?S.push('00'):1e3>g&&S.push('0'),S.push(g),S.join('')},mix(lib,{get:function(g){return doc.getElementById(g)},hide:function(g){var S=lib.isString(g)?lib.get(g):g;S&&(S.style.display='none')},show:function(g){var S=lib.isString(g)?lib.get(g):g;S&&(S.style.display=EMPTY_STR)},toggle:function(g){var S=lib.isString(g)?lib.get(g):g;S&&('none'===S.style.display?S.style.display=EMPTY_STR:S.style.display='none')},empty:function(g){if(g)for(;g.firstChild;)g.removeChild(g.firstChild)},getOffset:function(g,S,C){g=g||window.event;for(var T=C||g.target,P=0,E=0,I=0,O=0,V=!1,N,L;T&&!isNaN(T.offsetLeft)&&!isNaN(T.offsetTop);)L=T.scrollLeft,N=T.scrollTop,'BODY'===T.tagName?V?(L=0,N=0):(L|=document.documentElement.scrollLeft,N|=document.documentElement.scrollTop):'fixed'===T.style.position&&(V=!0),P+=T.offsetLeft-L,E+=T.offsetTop-N,T=T.offsetParent;return S&&(I=S.left,O=S.top),P=g.clientX-P-I,E=g.clientY-E-O,{x:P,y:E}},getElDimensions:function(g,S){var C,T;return!!g&&(C=g.style.display,g.style.display='',T=S?{offsetTop:g.offsetTop,offsetLeft:g.offsetLeft,offsetWidth:g.offsetWidth,offsetHeight:g.offsetHeight}:{clientTop:g.clientTop,clientLeft:g.clientLeft,clientWidth:g.clientWidth?g.clientWidth:parseInt(g.style.width)?parseInt(g.style.width):0,clientHeight:g.clientHeight?g.clientHeight:parseInt(g.style.height)?parseInt(g.style.height):0},g.style.display=C,T)}});var ua=navigator.userAgent.toLowerCase(),_platform=navigator.platform.toLowerCase(),_protocol=doc.location.protocol,_bWin='win32'==_platform||'win64'==_platform||'windows'==_platform,_bLinux=0<=_platform.indexOf('linux'),_isX64='win64'==_platform||0<=ua.indexOf('WOW64')||0<=ua.indexOf('x86_64')||0<=ua.indexOf('win64')||0<=ua.indexOf('x64'),_nMSIE=ua.indexOf('msie'),_nTrident=ua.indexOf('trident'),_nRV=ua.indexOf('rv:'),_nEdge=ua.indexOf('edge'),_tmp=ua.match(/version\/([\d.]+).*safari/),_bSafari=!!_tmp,_nSafari=_tmp?_tmp[1]:0,_nFirefox=ua.indexOf('firefox'),_bFirefox=-1!=_nFirefox,_bEdge=_bWin&&!_bFirefox&&-1!=_nEdge,_indexOfChrome=ua.indexOf('chrome'),_bChrome=!_bEdge&&-1!=_indexOfChrome,_bIE=_bWin&&!_bFirefox&&!_bEdge&&!_bChrome&&(-1!=_nMSIE||-1!=_nTrident||-1!=_nRV),_strIEVersion='',_IEMode=0,_bGecko=!!ua.match(/Gecko/),_bHTML5Edition=FALSE,_strBrowserVersion=EMPTY_STR,_bQuerySelector=FALSE,_nativeJson=win.JSON,guidNum=0;_bEdge?(_tmp=ua.slice(_nEdge+5),_tmp=_tmp.slice(0,_tmp.indexOf(' ')),_strIEVersion=_tmp,_tmp=_tmp.slice(0,_tmp.indexOf('.')),27<=_tmp&&(_bHTML5Edition=TRUE)):_bChrome?(_tmp=ua.slice(_indexOfChrome+7),_tmp=_tmp.slice(0,_tmp.indexOf(' ')),_strBrowserVersion=_tmp,_tmp=_tmp.slice(0,_tmp.indexOf('.')),27<=_tmp&&(_bHTML5Edition=TRUE)):_bFirefox?(_tmp=ua.slice(_nFirefox+8),_tmp=_tmp.slice(0,_tmp.indexOf(' ')),_strBrowserVersion=_tmp,_tmp=_tmp.slice(0,_tmp.indexOf('.')),27<=_tmp&&(_bHTML5Edition=TRUE)):_bIE?(-1==_nMSIE?-1==_nRV?-1!=_nTrident&&(_tmp=ua.slice(_nTrident+7),_tmp=_tmp.slice(0,_tmp.indexOf(';')),_strIEVersion=_tmp):(_tmp=ua.slice(_nRV+3),_tmp=_tmp.slice(0,_tmp.indexOf(';')),_tmp=_tmp.slice(0,_tmp.indexOf(')')),_strIEVersion=_tmp):(_tmp=ua.slice(_nMSIE+4),_tmp=_tmp.slice(0,_tmp.indexOf(';')),_strIEVersion=_tmp),(''==_strIEVersion||8<_strIEVersion)&&(_bHTML5Edition=TRUE),_strBrowserVersion=_tmp):_bSafari&&(_tmp&&(_strBrowserVersion=_tmp[1]),_tmp=_nSafari,_tmp=_tmp.slice(0,_tmp.indexOf('.')),7<=_tmp&&(_bHTML5Edition=TRUE)),(_bEdge||_bIE)&&(doc.documentMode?_IEMode=doc.documentMode:(_IEMode=5,doc.compatMode&&'CSS1Compat'==doc.compatMode&&(_IEMode=7))),docElement&&docElement.querySelector&&(!_bIE||_bIE&&8<_strBrowserVersion)&&(_bQuerySelector=TRUE),_bIE&&9>_strBrowserVersion&&(_nativeJson=null),dynamsoft.navInfo=navInfo={host:win,bSSL:'https:'===_protocol,bFileSystem:'https:'!==_protocol&&'http:'!==_protocol,bWin:_bWin,bMac:'mac68k'==_platform||'macppc'==_platform||'macintosh'==_platform||'macintel'==_platform||'iphone'==_platform,bLinux:_bLinux,isX64:_isX64,bIE:_bIE,bEdge:_bEdge,bChrome:_bChrome,bFirefox:_bFirefox,bSafari:_bSafari,bGecko:_bGecko,bHTML5Edition:_bHTML5Edition,strBrowserVersion:_strBrowserVersion,IEMode:_IEMode,bQuerySelectorSupported:_bQuerySelector,nativeJson:_nativeJson,nodejs:FALSE,scrollBarWidth:!1};var RE_TRIM=/^[\s\xa0]+|[\s\xa0]+$/g,trim=String.prototype.trim,indexOf=AP.indexOf,lastIndexOf=AP.lastIndexOf,filter=AP.filter,every=AP.every,some=AP.some,map=AP.map;mix(lib,{now:Date.now||function(){return+new Date},guid:function(g){return(g||EMPTY_STR)+guidNum++},trim:trim?function(g){return null==g?EMPTY_STR:trim.call(g)}:function(g){return null==g?EMPTY_STR:(g+'').replace(RE_TRIM,EMPTY_STR)},filter:filter?function(g,S,C){return filter.call(g,S,C||this)}:function(g,S,C){var T=[];return each(g,function(P,E,I){S.call(C||this,P,E,I)&&T.push(P)}),T},indexOf:indexOf?function(g,S){return indexOf.call(S,g)}:function(g,S){return each(S,function(C,T){if(C===g)return T}),-1}});{function g(T){var P=typeof T;return null==T||'object'!=P&&'function'!=P}function S(){if(escapeReg)return escapeReg;var T=EMPTY_STR;return each(htmlEntities,function(P){T+=P+'|'}),T=T.slice(0,-1),escapeReg=new RegExp(T,'g'),escapeReg}function C(){if(unEscapeReg)return unEscapeReg;var T=EMPTY_STR;return each(reverseEntities,function(P){T+=P+'|'}),T+='&#(\\d{1,5});',unEscapeReg=new RegExp(T,'g'),unEscapeReg}var logger=lib.getLogger(),SEP='&',EQ='=',htmlEntities={'&amp;':'&','&gt;':'>','&lt;':'<','&#x60;':'`','&#x2F;':'/','&quot;':'"','&#x27;':'\''},reverseEntities={},escapeRegExp=/[\-#$\^*()+\[\]{}|\\,.?\s]/g,escapeReg,unEscapeReg;(function(){for(var T in htmlEntities)reverseEntities[htmlEntities[T]]=T})(),lib.mix(lib,{urlEncode:function(T){return encodeURIComponent(T+'')},urlDecode:function(T){return decodeURIComponent(T.replace(/\+/g,' '))},fromUnicode:function(T){return T.replace(/\\u([a-f\d]{4})/ig,function(P,E){return String.fromCharCode(parseInt(E,16))})},escapeHtml:function(T){return(T+'').replace(S(),function(P){return reverseEntities[P]})},escapeRegExp:function(T){return T.replace(escapeRegExp,'\\$&')},unEscapeHtml:function(T){return T.replace(C(),function(P,E){return htmlEntities[P]||String.fromCharCode(+E)})},param:function(T,P,E,I){P=P||SEP,E=E||EQ,isNil(I)&&(I=TRUE);var O=[],R=lib.urlEncode,N,L,V,F,D;for(N in T)if(D=T[N],N=R(N),g(D))O.push(N),isDef(D)&&O.push(E,R(D+EMPTY_STR)),O.push(P);else if(lib.isArray(D)&&D.length)for(L=0,F=D.length;L<F;++L)V=D[L],g(V)&&(O.push(N,I?R('[]'):EMPTY_STR),isDef(V)&&O.push(E,R(V+EMPTY_STR)),O.push(P));return O.pop(),O.join(EMPTY_STR)},unparam:function(T,P,E){if(!lib.isString(T)||!(T=lib.trim(T)))return{};P=P||SEP,E=E||EQ;for(var I={},N=lib.urlDecode,L=T.split(P),D=0,R=L.length,O,V,F;D<R;++D){if(O=lib.indexOf(E,L[D]),-1===O)V=N(L[D]),F=nil;else{V=N(L[D].substring(0,O)),F=L[D].substring(O+1);try{F=N(F)}catch(U){logger.error('decodeURIComponent error : '+F),logger.error(U)}lib.endsWith(V,'[]')&&(V=V.substring(0,V.length-2))}V in I?lib.isArray(I[V])?I[V].push(F):I[V]=[I[V],F]:I[V]=F}return I}})}{function g(S,C){for(var T=0,P=S.length-1,E=[],I;0<=P;P--)I=S[P],'.'!==I&&('..'===I?T++:T?T--:E[E.length]=I);if(C)for(;T--;T)E[E.length]='..';return E=E.reverse(),E}var splitPathRe=/^(\/?)([\s\S]+\/(?!$)|\/)?((?:\.{1,2}$|[\s\S]+?)?(\.[^.\/]*)?)$/,Path=lib.Path={resolve:function(){var S='',P=arguments,I=0,C,T,E;for(T=P.length-1;0<=T&&!I;T--)E=P[T],lib.isString(E)&&!!E&&(S=E+'/'+S,I='/'===E.charAt(0));return C=g(lib.filter(S.split('/'),function(O){return!!O}),!I).join('/'),(I?'/':'')+C||'.'},normalize:function(S){var C='/'===S.charAt(0),T='/'===S.slice(-1);return S=g(lib.filter(S.split('/'),function(P){return!!P}),!C).join('/'),S||C||(S='.'),S&&T&&(S+='/'),(C?'/':'')+S},join:function(){var S=lib.makeArray(arguments);return Path.normalize(lib.filter(S,function(C){return C&&lib.isString(C)}).join('/'))},relative:function(S,C){S=Path.normalize(S),C=Path.normalize(C);var T=lib.filter(S.split('/'),function(L){return!!L}),P=[],O=lib.filter(C.split('/'),function(L){return!!L}),N=Math.min(T.length,O.length),E,I;for(E=0;E<N&&T[E]===O[E];E++);for(I=E;E<T.length;)P.push('..'),E++;return P=P.concat(O.slice(I)),P=P.join('/'),P},basename:function(S,C){var T=S.match(splitPathRe)||[],P;return P=T[3]||'',C&&P&&P.slice(-1*C.length)===C&&(P=P.slice(0,-1*C.length)),P},dirname:function(S){var C=S.match(splitPathRe)||[],T=C[1]||'',P=C[2]||'';return T||P?(P&&(P=P.substring(0,P.length-1)),T+P):'.'},extname:function(S){return(S.match(splitPathRe)||[])[4]||''}}}{function g(I){I._queryMap||(I._queryMap=lib.unparam(I._query))}function S(I){this._query=I||''}function C(I){return 1===I.length?'0'+I:I}function T(I,O){return I.toLowerCase()===O.toLowerCase()}function P(I,O){return encodeURI(I).replace(O,function(N){return'%'+C(N.charCodeAt(0).toString(16))})}function E(I){if(I instanceof E)return I.clone();var N=this,O;return lib.mix(N,{scheme:'',userInfo:'',hostname:'',port:'',path:'',query:'',fragment:''}),O=E.getComponents(I),each(O,function(L,V){if(L=L||'','query'===V)N.query=new S(L);else{try{L=lib.urlDecode(L)}catch(F){logger.error(F+'urlDecode error : '+L)}N[V]=L}}),N}var logger=lib.getLogger(),reDisallowedInSchemeOrUserInfo=/[#\/\?@]/g,reDisallowedInPathName=/[#\?]/g,reDisallowedInQuery=/[#@]/g,reDisallowedInFragment=/#/g,URI_SPLIT_REG=/^(?:([\w\d+.-]+):)?(?:\/\/(?:([^\/?#@]*)@)?([\w\d\-\u0100-\uffff.+%]*|\[[^\]]+\])(?::([0-9]+))?)?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,Path=lib.Path,REG_INFO={scheme:1,userInfo:2,hostname:3,port:4,path:5,query:6,fragment:7};S.prototype={constructor:S,clone:function(){return new S(this.toString())},reset:function(I){var O=this;return O._query=I||'',O._queryMap=null,O},count:function(){var I=this,O=0,N,L;for(L in g(I),N=I._queryMap,N)lib.isArray(N[L])?O+=N[L].length:O++;return O},has:function(I){var O=this,N;return g(O),N=O._queryMap,I?I in N:!lib.isEmptyObject(N)},get:function(I){var O=this,N;return g(O),N=O._queryMap,I?N[I]:N},keys:function(){var I=this;return g(I),lib.keys(I._queryMap)},set:function(I,O){var N=this,L;return g(N),L=N._queryMap,lib.isString(I)?N._queryMap[I]=O:(I instanceof S&&(I=I.get()),each(I,function(V,F){L[F]=V})),N},remove:function(I){var O=this;return g(O),I?delete O._queryMap[I]:O._queryMap={},O},add:function(I,O){var N=this,L,V;if(lib.isString(I))g(N),L=N._queryMap,V=L[I],V=isNil(V)?O:[].concat(V).concat(O),L[I]=V;else for(var F in I instanceof S&&(I=I.get()),I)N.add(F,I[F]);return N},toString:function(I){var O=this;return g(O),lib.param(O._queryMap,nil,nil,I)}},E.prototype={constructor:E,clone:function(){var I=new E,O=this;return each(REG_INFO,function(N,L){I[L]=O[L]}),I.query=I.query.clone(),I},resolve:function(I){lib.isString(I)&&(I=new E(I));var O=this,N=0,F=O.clone(),L;return each(['scheme','userInfo','hostname','port','path','query','fragment'],function(D){if('path'!==D)'query'===D?(N||I.query.toString())&&(F.query=I.query.clone(),N=1):(N||I[D])&&(F[D]=I[D],N=1);else if(N)F[D]=I[D];else{var R=I.path;R&&(N=1,!lib.startsWith(R,'/')&&(F.hostname&&!F.path?R='/'+R:F.path&&(L=F.path.lastIndexOf('/'),-1!==L&&(R=F.path.slice(0,L+1)+R))),F.path=Path.normalize(R))}}),F},getScheme:function(){return this.scheme},setScheme:function(I){return this.scheme=I,this},getHostname:function(){return this.hostname},setHostname:function(I){return this.hostname=I,this},setUserInfo:function(I){return this.userInfo=I,this},getUserInfo:function(){return this.userInfo},setPort:function(I){return this.port=I,this},getPort:function(){return this.port},setPath:function(I){return this.path=I,this},getPath:function(){return this.path},setQuery:function(I){return lib.isString(I)&&(lib.startsWith(I,'?')&&(I=I.slice(1)),I=new S(P(I,reDisallowedInQuery))),this.query=I,this},getQuery:function(){return this.query},getFragment:function(){return this.fragment},setFragment:function(I){var O=this;return lib.startsWith(I,'#')&&(I=I.slice(1)),O.fragment=I,O},isSameOriginAs:function(I){var O=this;return T(O.hostname,I.hostname)&&T(O.scheme,I.scheme)&&T(O.port,I.port)},toString:function(I){var O=[],N=this,L,V,F,D,R,U,W;return(L=N.scheme)&&(O.push(P(L,reDisallowedInSchemeOrUserInfo)),O.push(':')),(V=N.hostname)&&(O.push('//'),(W=N.userInfo)&&(O.push(P(W,reDisallowedInSchemeOrUserInfo)),O.push('@')),O.push(encodeURIComponent(V)),(D=N.port)&&(O.push(':'),O.push(D))),(F=N.path)&&(V&&!lib.startsWith(F,'/')&&(F='/'+F),F=Path.normalize(F),O.push(P(F,reDisallowedInPathName))),(U=N.query.toString.call(N.query,I))&&(O.push('?'),O.push(U)),(R=N.fragment)&&(O.push('#'),O.push(P(R,reDisallowedInFragment))),O.join('')}},E.Query=S,E.getComponents=function(I){I=I||EMPTY_STR;var O=I.match(URI_SPLIT_REG)||[],N={};return each(REG_INFO,function(L,V){N[V]=O[L]}),N},lib.Uri=E}{function g(){if(!domReady){doc&&!navInfo.nodejs&&removeEventListener(win,LOAD_EVENT,g),domReady=1;for(var C=0;C<callbacks.length;C++)try{callbacks[C](lib)}catch(T){lib.log(T.stack||T,'error'),setTimeout(function(){throw T},0)}}}var logger=lib.getLogger(),win=navInfo.host,doc=win.document,docElem=doc&&doc.documentElement,location=win.location,domReady=0,callbacks=[],RE_ID_STR=/^#?([\w-]+)$/,RE_NOT_WHITESPACE=/\S/,standardEventModel=!!(doc&&doc.addEventListener),DOM_READY_EVENT='DOMContentLoaded',READY_STATE_CHANGE_EVENT='readystatechange',LOAD_EVENT='load',COMPLETE='complete',addEventListener=standardEventModel?function(C,T,P){C.addEventListener(T,P,!1)}:function(C,T,P){C.attachEvent('on'+T,P)},removeEventListener=standardEventModel?function(C,T,P){C.removeEventListener(T,P,!1)}:function(C,T,P){C.detachEvent('on'+T,P)};if(lib.mix(lib,{isWindow:function(C){return null!=C&&C==C.window},globalEval:function(C){C&&RE_NOT_WHITESPACE.test(C)&&(win.execScript?win.execScript(C):function(T){win.eval.call(win,T)}(C))},ready:function(C){if(domReady)try{C(lib)}catch(T){lib.log(T.stack||T,'error'),setTimeout(function(){throw T},0)}else callbacks.push(C);return this}}),function(){if(!doc||doc.readyState===COMPLETE)return void g();if(addEventListener(win,LOAD_EVENT,g),standardEventModel){var C=function(){removeEventListener(doc,DOM_READY_EVENT,C),g()};addEventListener(doc,DOM_READY_EVENT,C)}else{var T=function(){doc.readyState===COMPLETE&&(removeEventListener(doc,READY_STATE_CHANGE_EVENT,T),g())};addEventListener(doc,READY_STATE_CHANGE_EVENT,T);var E=docElem&&docElem.doScroll,P;try{P=null===win.frameElement}catch(O){P=!1}if(E&&P){var I=function(){try{E('left'),g()}catch(O){setTimeout(I,40)}};I()}}}(),navInfo.bIE)try{doc.execCommand('BackgroundImageCache',!1,!0)}catch(C){}}lib.switchEvent=function(g){return g=g||window.event,g.which=null==g.which?2>g.button?1:4==g.button?2:3:2>g.which?1:2==g.which?2:3,g},lib.currentStyle=function(g,S){return g.currentStyle?g.currentStyle[S]:window.getComputedStyle?(propprop=S.replace(/([A-Z])/g,'-$1'),propprop=S.toLowerCase(),document.defaultView.getComputedStyle(g,null)[S]):null},lib.extend=function(g,S){var C=function(){g.apply(this,arguments),S&&S.apply(this,arguments)};for(var T in g.prototype)C.prototype[T]=g.prototype[T];return C.prototype.constructor=C,C},lib.colorStrToInt=function(g){var S='0x';if(/^(rgb|RGB)/.test(g)){for(var C=g.replace(/[^\d,.]/g,'').split(','),T=0,P;3>T;++T)P=(+C[T]).toString(16),1==P.length&&(P='0'+P),S+=P;if(4==C.length){var P=Math.round(255*+C[T]).toString(16);1==P.length&&(P='0'+P),S+=P}else S+='ff'}else if('transparent'==g)S+='00000000';else if(/^#[0-9a-fA-f]{6}$/.test(g))S+=g.replace(/#/,'')+'ff';else if(/^#[0-9a-fA-f]{3}$/.test(g)){for(var T=0;3>T;++T)S+=g[T]+g[T];S+='ff'}else S='-1';return+S},lib.IntToColorStr=function(g){if(4294967295<g||0>g)return null;var S;if(!!navInfo.bHTML5Edition)S='rgba('+Math.floor(g/16777216)+','+Math.floor(g/65536)%256+','+Math.floor(g/256)%256+','+g%256/255+')';else if(0==g%256)S='transparent';else{for(S=Math.floor(g/256).toString(16);6!=S.length;)S='0'+S;S='#'+S}return S};lib.mix(Attributes.prototype,{get:function(g){var S=this;return g in S.__attrs?S.__attrs[g]:''},set:function(g,S){var C=this;g in C.__attrs&&(C.__attrs[g]=S)},addAttrs:function(g){lib.mix(this.__attrs,g)}}),Attributes.extend=function(g){var S=this,C,T;return g=g||{},g.constructor&&(C=g.constructor),T=extend(S,C),lib.mix(T,g),T},lib.obj={Attributes:Attributes,customEvent:{fire:function(g){var S=this,C;S.exec=S.exec||{},g=g.toLowerCase(),C=AP.slice.call(arguments,1),each(S.exec[g]||[],function(T){var P=T.f,E=T.c||S;try{P.apply(E,C)}catch(I){console.log(I)}})},on:function(g,S,C){var T=this;T.exec=T.exec||{},g=g.toLowerCase(),T.exec[g]=T.exec[g]||[],T.exec[g].push({f:S,c:C})},off:function(g,S){var T=this,P=T.exec;if(P){if(!g)return void(T.exec=null);if(g=g.toLowerCase(),!S)return void(P[g]=null);for(var E=P[g]||[],I=E.length-1;0<=I;I--)E[I]===S&&E.splice(I,1)}}}}}(dynamsoft.lib),function(g){function S(Ue,We,He,je){var Qe=We&&We.ownerDocument,Je=We?We.nodeType:9,ze,qe,Ge,Xe,Ye,Ke,$e;if(He=He||[],'string'!=typeof Ue||!Ue||1!==Je&&9!==Je&&11!==Je)return He;if(!je){(We?We.ownerDocument||We:ce)!==ie&&ne(We),We=We||ie;{if(11!==Je&&(Ye=Fe.exec(Ue)))if(!(ze=Ye[1])){if(Ye[2])return Se.apply(He,We.getElementsByTagName(Ue)),He;if((ze=Ye[3])&&G.getElementsByClassName&&We.getElementsByClassName)return Se.apply(He,We.getElementsByClassName(ze)),He}else if(9===Je){if(!(Ge=We.getElementById(ze)))return He;if(Ge.id===ze)return He.push(Ge),He}else if(Qe&&(Ge=Qe.getElementById(ze))&&le(We,Ge)&&Ge.id===ze)return He.push(Ge),He;if(G.qsa&&!fe[Ue+' ']&&(!re||!re.test(Ue))){if(1!==Je)Qe=We,$e=Ue;else if('object'!==We.nodeName.toLowerCase()){for((Xe=We.getAttribute('id'))?Xe=Xe.replace(Be,De):We.setAttribute('id',Xe=pe),Ke=$(Ue),qe=Ke.length;qe--;)Ke[qe]='#'+Xe+' '+L(Ke[qe]);$e=Ke.join(','),Qe=We}if($e)try{return Se.apply(He,Qe.querySelectorAll($e)),He}catch(Ze){}finally{Xe===pe&&We.removeAttribute('id')}}}}return J(Ue.replace(_e,'$1'),We,He,je)}function C(){function Ue(He,je){return We.push(He+' ')>X.cacheLength&&delete Ue[We.shift()],Ue[He+' ']=je}var We=[];return Ue}function T(Ue){return Ue[pe]=!0,Ue}function P(Ue){var We=ie.createElement('fieldset');try{return!!Ue(We)}catch(He){return!1}finally{We.parentNode&&We.parentNode.removeChild(We),We=null}}function E(){}function I(Ue,We){var He=We&&Ue,je=He&&1===Ue.nodeType&&1===We.nodeType&&Ue.sourceIndex-We.sourceIndex;if(je)return je;if(He)for(;He=He.nextSibling;)if(He===We)return-1;return Ue?1:-1}function N(){}function L(Ue){for(var We=0,He=Ue.length,je='';We<He;We++)je+=Ue[We].value;return je}function V(Ue,We,He){var je=We.dir,ze=We.next,qe=ze||je,Ge=He&&'parentNode'===qe,Xe=he++;return We.first?function(Ye,Ke,$e){for(;Ye=Ye[je];)if(1===Ye.nodeType||Ge)return Ue(Ye,Ke,$e);return!1}:function(Ye,Ke,$e){var et=[ue,Xe],Qe,Je,Ze;if($e){for(;Ye=Ye[je];)if((1===Ye.nodeType||Ge)&&Ue(Ye,Ke,$e))return!0;}else for(;Ye=Ye[je];)if(1===Ye.nodeType||Ge)if(Ze=Ye[pe]||(Ye[pe]={}),Je=Ze[Ye.uniqueID]||(Ze[Ye.uniqueID]={}),ze&&ze===Ye.nodeName.toLowerCase())Ye=Ye[je]||Ye;else{if((Qe=Je[qe])&&Qe[0]===ue&&Qe[1]===Xe)return et[2]=Qe[2];if(Je[qe]=et,et[2]=Ue(Ye,Ke,$e))return!0}return!1}}function F(Ue){return 1<Ue.length?function(We,He,je){for(var ze=Ue.length;ze--;)if(!Ue[ze](We,He,je))return!1;return!0}:Ue[0]}function D(Ue,We,He){for(var je=0,ze=We.length;je<ze;je++)S(Ue,We[je],He);return He}function R(Ue,We,He,je,ze){for(var Ge=[],Xe=0,Ye=Ue.length,qe;Xe<Ye;Xe++)(qe=Ue[Xe])&&(!He||He(qe,je,ze))&&(Ge.push(qe),null!=We&&We.push(Xe));return Ge}function U(Ue,We,He,je,ze,qe){return je&&!je[pe]&&(je=U(je)),ze&&!ze[pe]&&(ze=U(ze,qe)),T(function(Ge,Xe,Ye,Ke){var Ze=[],et=[],tt=Xe.length,nt=Ge||D(We||'*',Ye.nodeType?[Ye]:Ye,[]),it=Ue&&(Ge||!We)?R(nt,Ze,Ue,Ye,Ke):nt,ot=He?ze||(Ge?Ue:tt||je)?[]:Xe:it,$e,Qe,Je;if(He&&He(it,ot,Ye,Ke),je)for($e=R(ot,et),je($e,[],Ye,Ke),Qe=$e.length;Qe--;)(Je=$e[Qe])&&(ot[et[Qe]]=!(it[et[Qe]]=Je));if(!Ge)ot=R(ot===Xe?ot.splice(tt,ot.length):ot),ze?ze(null,Xe,ot,Ke):Se.apply(Xe,ot);else if(ze||Ue){if(ze){for($e=[],Qe=ot.length;Qe--;)(Je=ot[Qe])&&$e.push(it[Qe]=Je);ze(null,ot=[],$e,Ke)}for(Qe=ot.length;Qe--;)(Je=ot[Qe])&&-1<($e=ze?Ce(Ge,Je):Ze[Qe])&&(Ge[$e]=!(Xe[$e]=Je))}})}function W(Ue){for(var ze=Ue.length,qe=X.relative[Ue[0].type],Ge=qe||X.relative[' '],Xe=qe?1:0,Ye=V(function(Qe){return Qe===We},Ge,!0),Ke=V(function(Qe){return-1<Ce(We,Qe)},Ge,!0),$e=[function(Qe,Je,Ze){var et=!qe&&(Ze||Je!==Z)||((We=Je).nodeType?Ye(Qe,Je,Ze):Ke(Qe,Je,Ze));return We=null,et}],We,He,je;Xe<ze;Xe++)if(He=X.relative[Ue[Xe].type])$e=[V(F($e),He)];else{if(He=X.filter[Ue[Xe].type].apply(null,Ue[Xe].matches),He[pe]){for(je=++Xe;je<ze&&!X.relative[Ue[je].type];je++);return U(1<Xe&&F($e),1<Xe&&L(Ue.slice(0,Xe-1).concat({value:' '===Ue[Xe-2].type?'*':''})).replace(_e,'$1'),He,Xe<je&&W(Ue.slice(Xe,je)),je<ze&&W(Ue=Ue.slice(je)),je<ze&&L(Ue))}$e.push(He)}return F($e)}function H(Ue,We){var He=0<We.length,je=0<Ue.length,ze=function(qe,Ge,Xe,Ye,Ke){var Ze=0,et='0',tt=qe&&[],nt=[],it=Z,ot=qe||je&&X.find.TAG('*',Ke),at=ue+=null==it?1:Math.random()||0.1,rt=ot.length,$e,Qe,Je;for(Ke&&(Z=Ge===ie||Ge||Ke);et!==rt&&null!=($e=ot[et]);et++){if(je&&$e){for(Qe=0,Ge||$e.ownerDocument===ie||(ne($e),Xe=!ae);Je=Ue[Qe++];)if(Je($e,Ge||ie,Xe)){Ye.push($e);break}Ke&&(ue=at)}He&&(($e=!Je&&$e)&&Ze--,qe&&tt.push($e))}if(Ze+=et,He&&et!==Ze){for(Qe=0;Je=We[Qe++];)Je(tt,nt,Ge,Xe);if(qe){if(0<Ze)for(;et--;)tt[et]||nt[et]||(nt[et]=ve.call(Ye));nt=R(nt)}Se.apply(Ye,nt),Ke&&!qe&&0<nt.length&&1<Ze+We.length&&S.uniqueSort(Ye)}return Ke&&(ue=at,Z=it),tt};return He?T(ze):ze}var q=RegExp,ae=!0,pe='dws_'+1*new Date,ce=window.document,ue=0,he=0,ge=C(),me=C(),fe=C(),ye=function(Ue,We){return Ue===We&&(te=!0),0},be=[],ve=be.pop,we=be.push,Se=be.push,xe=be.slice,Ce=function(Ue,We){for(var He=0,je=Ue.length;He<je;He++)if(Ue[He]===We)return He;return-1},Te='checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped',Pe='[\\x20\\t\\r\\n\\f]',Ee='(?:\\\\.|[\\w-]|[^\0-\\xa0])+',Ie=['\\[',Pe,'*(',Ee,')(?:',Pe,'*([*^$|!~]?=)',Pe,'*(?:\'((?:\\\\.|[^\\\\\'])*)\'|"((?:\\\\.|[^\\\\"])*)"|(',Ee,'))|)',Pe,'*\\]'].join(''),ke=new q(Pe+'+','g'),_e=new q(['^',Pe,'+|((?:^|[^\\\\])(?:\\\\.)*)',Pe,'+$'].join(''),'g'),Oe=new q(['^',Pe,'*,',Pe,'*'].join('')),Ne=new q(['^',Pe,'*([>+~]|',Pe,')',Pe,'*'].join('')),Le=new q('='+Pe+'*([^\\]\'"]*?)'+Pe+'*\\]','g'),Ve=new q('^'+Ee+'$'),Ae={ID:new q('^#('+Ee+')'),CLASS:new q('^\\.('+Ee+')'),TAG:new q('^('+Ee+'|[*])'),ATTR:new q('^'+Ie),needsContext:new q(['^',Pe,'*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(',Pe,'*((?:-\\d)?\\d*)',Pe,'*\\)|)(?=[^-]|$)'].join(''),'i')},Me=/^[^{]+\{\s*\[native \w/,Fe=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Be=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,De=function(Ue,We){return We?'\0'===Ue?'\uFFFD':Ue.slice(0,-1)+'\\'+Ue.charCodeAt(Ue.length-1).toString(16)+' ':'\\'+Ue},Re=function(){ne()},G,X,Y,$,Q,J,Z,ee,te,ne,ie,oe,re,se,de,le;try{Se.apply(be=xe.call(ce.childNodes),ce.childNodes),be[ce.childNodes.length].nodeType}catch(Ue){Se={apply:be.length?function(We,He){we.apply(We,xe.call(He))}:function(We,He){for(var je=We.length,ze=0;We[je++]=He[ze++];);We.length=je-1}}}G=S.support={},ne=S.setDocument=function(Ue){var je=Ue?Ue.ownerDocument||Ue:ce,We,He;return je!==ie&&9===je.nodeType&&je.documentElement?(ie=je,oe=ie.documentElement,ce!==ie&&(He=ie.defaultView)&&He.top!==He&&(He.addEventListener?He.addEventListener('unload',Re,!1):He.attachEvent&&He.attachEvent('onunload',Re)),G.attributes=P(function(ze){return ze.className='i',!ze.getAttribute('className')}),G.getElementsByTagName=P(function(ze){return ze.appendChild(ie.createComment('')),!ze.getElementsByTagName('*').length}),G.getElementsByClassName=Me.test(ie.getElementsByClassName),G.getById=P(function(ze){return oe.appendChild(ze).id=pe,!ie.getElementsByName||!ie.getElementsByName(pe).length}),X.filter.ID=G.getById?function(ze){return function(Ge){return Ge.getAttribute('id')===ze}}:function(ze){var qe=new q(['^',ze,'$'].join(''),'g');return function(Ge){var Xe='undefined'!=typeof Ge.getAttributeNode&&Ge.getAttributeNode('id');return Xe&&qe.test(Xe.value)}},X.find.TAG=G.getElementsByTagName?function(ze,qe){return'undefined'==typeof qe.getElementsByTagName?G.qsa?qe.querySelectorAll(ze):void 0:qe.getElementsByTagName(ze)}:function(ze,qe){var Xe=[],Ye=0,Ke=qe.getElementsByTagName(ze),Ge;if('*'===ze){for(;Ge=Ke[Ye++];)1===Ge.nodeType&&Xe.push(Ge);return Xe}return Ke},X.find.CLASS=G.getElementsByClassName&&function(ze,qe){if('undefined'!=typeof qe.getElementsByClassName)return qe.getElementsByClassName(ze)},se=[],re=[],(G.qsa=Me.test(ie.querySelectorAll))&&(P(function(ze){oe.appendChild(ze).innerHTML='<a id=\''+pe+'\'></a><select id=\''+pe+'-\r\\\' msallowcapture=\'\'><option selected=\'\'></option></select>',ze.querySelectorAll('[msallowcapture^=\'\']').length&&re.push('[*^$]='+Pe+'*(?:\'\'|"")'),ze.querySelectorAll('[selected]').length||re.push('\\['+Pe+'*(?:value|'+Te+')'),ze.querySelectorAll('[id~='+pe+'-]').length||re.push('~='),ze.querySelectorAll(':checked').length||re.push(':checked'),ze.querySelectorAll('a#'+pe+'+*').length||re.push('.#.+[+~]')}),P(function(ze){ze.innerHTML='<a href=\'\' disabled=\'disabled\'></a><select disabled=\'disabled\'><option/></select>';var qe=ie.createElement('input');qe.setAttribute('type','hidden'),ze.appendChild(qe).setAttribute('name','D'),ze.querySelectorAll('[name=d]').length&&re.push('name'+Pe+'*[*^$|!~]?='),2!==ze.querySelectorAll(':enabled').length&&re.push(':enabled',':disabled'),oe.appendChild(ze).disabled=!0,2!==ze.querySelectorAll(':disabled').length&&re.push(':enabled',':disabled'),ze.querySelectorAll('*,:x'),re.push(',.*:')})),(G.matchesSelector=Me.test(de=oe.matches||oe.webkitMatchesSelector||oe.mozMatchesSelector||oe.oMatchesSelector||oe.msMatchesSelector))&&P(function(ze){G.disconnectedMatch=de.call(ze,'*'),de.call(ze,'[s!=\'\']:x')}),re=re.length&&new q(re.join('|')),se=se.length&&new q(se.join('|')),We=Me.test(oe.compareDocumentPosition),le=We||Me.test(oe.contains)?function(ze,qe){var Ge=9===ze.nodeType?ze.documentElement:ze,Xe=qe&&qe.parentNode;return ze===Xe||!!(Xe&&1===Xe.nodeType&&(Ge.contains?Ge.contains(Xe):ze.compareDocumentPosition&&16&ze.compareDocumentPosition(Xe)))}:function(ze,qe){if(qe)for(;qe=qe.parentNode;)if(qe===ze)return!0;return!1},ye=We?function(ze,qe){if(ze===qe)return te=!0,0;var Ge=!ze.compareDocumentPosition-!qe.compareDocumentPosition;return Ge?Ge:(Ge=(ze.ownerDocument||ze)===(qe.ownerDocument||qe)?ze.compareDocumentPosition(qe):1,1&Ge||!G.sortDetached&&qe.compareDocumentPosition(ze)===Ge?ze===ie||ze.ownerDocument===ce&&le(ce,ze)?-1:qe===ie||qe.ownerDocument===ce&&le(ce,qe)?1:ee?Ce(ee,ze)-Ce(ee,qe):0:4&Ge?-1:1)}:function(ze,qe){if(ze===qe)return te=!0,0;var Xe=0,Ye=ze.parentNode,Ke=qe.parentNode,$e=[ze],Qe=[qe],Ge;if(!Ye||!Ke)return ze===ie?-1:qe===ie?1:Ye?-1:Ke?1:ee?Ce(ee,ze)-Ce(ee,qe):0;if(Ye===Ke)return I(ze,qe);for(Ge=ze;Ge=Ge.parentNode;)$e.unshift(Ge);for(Ge=qe;Ge=Ge.parentNode;)Qe.unshift(Ge);for(;$e[Xe]===Qe[Xe];)Xe++;return Xe?I($e[Xe],Qe[Xe]):$e[Xe]===ce?-1:Qe[Xe]===ce?1:0},ie):ie},S.matches=function(Ue,We){return S(Ue,null,null,We)},S.matchesSelector=function(Ue,We){if((Ue.ownerDocument||Ue)!==ie&&ne(Ue),We=We.replace(Le,'=\'$1\']'),G.matchesSelector&&!fe[We+' ']&&(!se||!se.test(We))&&(!re||!re.test(We)))try{var He=de.call(Ue,We);if(He||G.disconnectedMatch||Ue.document&&11!==Ue.document.nodeType)return He}catch(je){}return 0<S(We,ie,null,[Ue]).length},S.contains=function(Ue,We){return(Ue.ownerDocument||Ue)!==ie&&ne(Ue),le(Ue,We)},S.escape=function(Ue){return(Ue+'').replace(Be,De)},S.error=function(Ue){throw new Error('Syntax error, unrecognized expression: '+Ue)},S.uniqueSort=function(Ue){var He=[],je=0,ze=0,We;if(te=!G.detectDuplicates,ee=!G.sortStable&&Ue.slice(0),Ue.sort(ye),te){for(;We=Ue[ze++];)We===Ue[ze]&&(je=He.push(ze));for(;je--;)Ue.splice(He[je],1)}return ee=null,Ue},Y=S.getText=function(Ue){var He='',je=0,ze=Ue.nodeType,We;if(!ze)for(;We=Ue[je++];)He+=Y(We);else if(1===ze||9===ze||11===ze){if('string'==typeof Ue.textContent)return Ue.textContent;for(Ue=Ue.firstChild;Ue;Ue=Ue.nextSibling)He+=Y(Ue)}else if(3===ze||4===ze)return Ue.nodeValue;return He},X=S.selectors={cacheLength:50,match:Ae,find:{},relative:{'>':{dir:'parentNode',first:!0},' ':{dir:'parentNode'},'+':{dir:'previousSibling',first:!0},'~':{dir:'previousSibling'}},preFilter:{ATTR:function(Ue){return Ue[3]=Ue[3]||Ue[4]||Ue[5]||'','~='===Ue[2]&&(Ue[3]=' '+Ue[3]+' '),Ue.slice(0,4)}},filter:{TAG:function(Ue){var We=Ue.toLowerCase();return'*'===Ue?function(){return!0}:function(He){return He.nodeName&&He.nodeName.toLowerCase()===We}},CLASS:function(Ue){var We=ge[Ue+' '];return We||(We=new q('(^|'+Pe+')'+Ue+'('+Pe+'|$)'))&&ge(Ue,function(He){return We.test('string'==typeof He.className&&He.className||'undefined'!=typeof He.getAttribute&&He.getAttribute('class')||'')})},ATTR:function(Ue,We,He){return function(je){var ze=S.attr(je,Ue);return null==ze?'!='===We:!We||(ze+='','='===We?ze===He:'!='===We?ze!==He:'^='===We?He&&0===ze.indexOf(He):'*='===We?He&&-1<ze.indexOf(He):'$='===We?He&&ze.slice(-He.length)===He:'~='===We?-1<(' '+ze.replace(ke,' ')+' ').indexOf(He):'|='==We&&(ze===He||ze.slice(0,He.length+1)===He+'-'))}}}},N.prototype=X.filters=X.pseudos,X.setFilters=new N,$=S.tokenize=function(Ue,We){var ze=[],Ke=me[Ue+' '],He,je,qe,Ge,Xe,Ye;if(Ke)return We?0:Ke.slice(0);for(Ge=Ue,Xe=[],Ye=X.preFilter;Ge;){for(qe in(!He||(je=Oe.exec(Ge)))&&(je&&(Ge=Ge.slice(je[0].length)||Ge),Xe.push(ze=[])),He=!1,(je=Ne.exec(Ge))&&(He=je.shift(),ze.push({value:He,type:je[0].replace(_e,' ')}),Ge=Ge.slice(He.length)),X.filter)(je=Ae[qe].exec(Ge))&&(!Ye[qe]||(je=Ye[qe](je)))&&(He=je.shift(),ze.push({value:He,type:qe,matches:je}),Ge=Ge.slice(He.length));if(!He)break}return We?Ge.length:Ge?S.error(Ue):me(Ue,Xe).slice(0)},Q=S.compile=function(Ue,We){var je=[],ze=[],qe=fe[Ue+' '],He;if(!qe){for(We||(We=$(Ue)),He=We.length;He--;)qe=W(We[He]),qe[pe]?je.push(qe):ze.push(qe);qe=fe(Ue,H(ze,je)),qe.selector=Ue}return qe},J=S.select=function(Ue,We,He,je){var qe='function'==typeof Ue&&Ue,Ge=!je&&$(Ue=qe.selector||Ue);return He=He||[],(qe||Q(Ue,Ge))(je,We,!ae,He,!We||We),He},G.sortStable=pe.split('').sort(ye).join('')===pe,G.detectDuplicates=!!te,ne(),G.sortDetached=P(function(Ue){return 1&Ue.compareDocumentPosition(ie.createElement('fieldset'))}),P(function(Ue){return Ue.innerHTML='<a href=\'#\'></a>','#'===Ue.firstChild.getAttribute('href')})||E('type|href|height|width',function(Ue,We){return Ue.getAttribute(We,'type'===We.toLowerCase()?1:2)}),G.attributes&&P(function(Ue){return Ue.innerHTML='<input/>',Ue.firstChild.setAttribute('value',''),''===Ue.firstChild.getAttribute('value')})||E('value',function(Ue){if('input'===Ue.nodeName.toLowerCase())return Ue.defaultValue}),P(function(Ue){return null==Ue.getAttribute('disabled')})||E(Te,function(Ue,We){var He;return!0===Ue[We]?We.toLowerCase():(He=Ue.getAttributeNode(We))&&He.specified?He.value:null}),g.support=G,g.all=S}(dynamsoft.lib),function(g){function S(ke,_e,Oe){var Ne=this;return Ne instanceof S?ke?'string'==typeof ke?(g.error('Err 4001.'),Ne):g.isArray(ke)||ke.isNodeList?(R.apply(Ne,U(ke)),Ne):(Ne[0]=ke,Ne.length=1,Ne):Ne:new S(ke,_e,Oe)}function C(ke){if(ke in me)return ke;for(var _e=ke.charAt(0).toUpperCase()+ke.slice(1),Oe=fe.length;Oe--;)if(ke=fe[Oe]+_e,ke in me)return ke}function T(ke,_e){var Le=0,Ve='undefined'==typeof ke.getElementsByTagName?'undefined'==typeof ke.querySelectorAll?void 0:ke.querySelectorAll(_e||'*'):ke.getElementsByTagName(_e||'*'),Oe,Ne;if(!Ve)for(Ve=[],Oe=ke.childNodes||ke;null!=(Ne=Oe[Le]);Le++)!_e||ve.nodeName(Ne,_e)?Ve.push(Ne):ve.merge(Ve,T(Ne,_e));return _e===void 0||_e&&ve.nodeName(ke,_e)?ve.merge([ke],Ve):Ve}function P(ke,_e){for(var Be=ke.length,De=E(_e),Re=[],Ue=0,Oe,Ne,Le,Ve,Ae,Me,Fe;Ue<Be;Ue++)if(Ne=ke[Ue],Ne||0===Ne)if('object'===g.type(Ne))ve.merge(Re,Ne.nodeType?[Ne]:Ne);else if(!de.test(Ne))Re.push(_e.createTextNode(Ne));else{for(Ve=Ve||De.appendChild(_e.createElement('div')),Ae=(re.exec(Ne)||['',''])[1].toLowerCase(),Fe=ge[Ae]||ge._default,Ve.innerHTML=Fe[1]+ve.htmlPrefilter(Ne)+Fe[2],Oe=Fe[0];Oe--;)Ve=Ve.lastChild;if(!q.leadingWhitespace&&se.test(Ne)&&Re.push(_e.createTextNode(se.exec(Ne)[0])),!q.tbody)for(Ne='table'!==Ae||rtbody.test(Ne)?'<table>'!==Fe[1]||rtbody.test(Ne)?0:Ve:Ve.firstChild,Oe=Ne&&Ne.childNodes.length;Oe--;)ve.nodeName(Me=Ne.childNodes[Oe],'tbody')&&!Me.childNodes.length&&Ne.removeChild(Me);for(ve.merge(Re,Ve.childNodes),Ve.textContent='';Ve.firstChild;)Ve.removeChild(Ve.firstChild);Ve=De.lastChild}for(Ve&&De.removeChild(Ve),Ue=0;Ne=Re[Ue++];)Le=G.contains(Ne.ownerDocument,Ne),Ve=T(De.appendChild(Ne),'script'),Le&&setGlobalEval(Ve);return Ve=null,De}function E(ke){var _e='abbr|article|aside|audio|bdi|canvas|data|datalist|details|dialog|figcaption|figure|footer|header|hgroup|main|mark|meter|nav|output|picture|progress|section|summary|template|time|video'.split('|'),Oe=ke.createDocumentFragment();if(Oe.createElement)for(;_e.length;)Oe.createElement(_e.pop());return Oe}function I(ke,_e,Oe){var Ne=!0,Le='width'===_e?ke.offsetWidth:ke.offsetHeight,Ve=ne(ke),Ae=q.boxSizing&&'border-box'===ve.css(ke,'boxSizing',!1,Ve);if(0>=Le||null==Le){if(Le=ie(ke,_e,Ve),(0>Le||null==Le)&&(Le=ke.style[_e]),xe.test(Le))return Le;Ne=Ae&&(q.boxSizingReliable()||Le===ke.style[_e]),Le=parseFloat(Le)||0}return Le+O(ke,_e,Oe||(Ae?'border':'content'),Ne,Ve)}function O(ke,_e,Oe,Ne,Le){for(var Ve=Oe===(Ne?'border':'content')?4:'width'===_e?1:0,Ae=0;4>Ve;Ve+=2)'margin'===Oe&&(Ae+=ve.css(ke,Oe+he[Ve],!0,Le)),Ne?('content'===Oe&&(Ae-=ve.css(ke,'padding'+he[Ve],!0,Le)),'margin'!==Oe&&(Ae-=ve.css(ke,'border'+he[Ve]+'Width',!0,Le))):(Ae+=ve.css(ke,'padding'+he[Ve],!0,Le),'padding'!==Oe&&(Ae+=ve.css(ke,'border'+he[Ve]+'Width',!0,Le)));return Ae}function N(ke){return new RegExp('^(?:([+-])=|)('+ke+')([a-z%]*)$','i')}function L(ke,_e,Oe){var Ne=N(_e);return Ne?Math.max(0,Ne[2]-(Oe||0))+(Ne[3]||'px'):_e}function V(ke,_e,Oe,Ne){var Ve=1,Ae=20,Me=Ne?function(){return Ne.cur()}:function(){return ve.css(ke,_e,'')},Fe=Me(),Be=Oe&&Oe[3]||(ve.cssNumber[_e]?'':'px'),De=(ve.cssNumber[_e]||'px'!==Be&&+Fe)&&N(ve.css(ke,_e)),Le;if(De&&De[3]!==Be){Be=Be||De[3],Oe=Oe||[],De=+Fe||1;do Ve=Ve||'.5',De/=Ve,ve.style(ke,_e,De+Be);while(Ve!=(Ve=Me()/Fe)&&1!=Ve&&--Ae)}return Oe&&(De=+De||+Fe||0,Le=Oe[1]?De+(Oe[1]+1)*Oe[2]:+Oe[2],Ne&&(Ne.unit=Be,Ne.start=De,Ne.end=Le)),Le}var F=Array.prototype,D=F.slice,R=F.push,U=g.makeArray,W=document,H=W.documentElement,z;z=S.prototype={isNodeList:!0,length:0,item:function(ke){var _e=this;return g.isNumber(ke)?ke>=_e.length?null:new S(_e[ke]):new S(ke)},slice:function(){return new S(D.apply(this,arguments))},getDOMNodes:function(){return D.call(this)},each:function(ke,_e){var Oe=this;return g.each(Oe,function(Ne,Le){return Ne=new S(Ne),ke.call(_e||Ne,Ne,Le,Oe)}),Oe},getEL:function(){return this[0]},all:function(ke){var Oe=this,_e;return _e=0<Oe.length?S.all(ke,Oe):new S,_e},one:function(ke){var _e=this,Oe=_e.all(ke),Ne=Oe.length?Oe.slice(0,1):null;return Ne}},g.mix(S,{all:function(ke,_e){var Oe=_e;return Oe&&Oe.isNodeList&&(Oe=_e.getEL()),'string'==typeof ke?((ke=g.trim(ke))&&3<=ke.length&&g.startsWith(ke,'<')&&g.endsWith(ke,'>')&&g.err('Err 4002.'),new S(g.all(ke,Oe))):ke.isNodeList?ke:new S(ke)},one:function(ke,_e){var Oe=S.all(ke,_e);return Oe.length?Oe.slice(0,1):null}}),g.one=S.one;var q=g.support,G=g.all;{function ke(){var _e,Oe;H.appendChild(ee),te.style.cssText='-webkit-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%',X=$=Z=!1,Y=J=!0,window.getComputedStyle&&(Oe=window.getComputedStyle(te),X='1%'!==(Oe||{}).top,Z='2px'===(Oe||{}).marginLeft,$='4px'===(Oe||{width:'4px'}).width,te.style.marginRight='50%',Y='4px'===(Oe||{marginRight:'4px'}).marginRight,_e=te.appendChild(document.createElement('div')),_e.style.cssText=te.style.cssText='-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0',_e.style.marginRight=_e.style.width='0',te.style.width='1px',J=!parseFloat((window.getComputedStyle(_e)||{}).marginRight),te.removeChild(_e)),te.style.display='none',Q=0===te.getClientRects().length,Q&&(te.style.display='',te.innerHTML='<table><tr><td></td><td>t</td></tr></table>',te.childNodes[0].style.borderCollapse='separate',_e=te.getElementsByTagName('td'),_e[0].style.cssText='margin:0;border:0;padding:0;display:none',Q=0===_e[0].offsetHeight,Q&&(_e[0].style.display='',_e[1].style.display='none',Q=0===_e[0].offsetHeight)),H.removeChild(ee)}var ee=document.createElement('div'),te=document.createElement('div'),X,Y,$,Q,J,Z;if(!te.style)return;te.style.cssText='float:left;opacity:.5',q.opacity='0.5'===te.style.opacity,q.cssFloat=!!te.style.cssFloat,te.style.backgroundClip='content-box',te.cloneNode(!0).style.backgroundClip='',q.clearCloneStyle='content-box'===te.style.backgroundClip,ee=document.createElement('div'),ee.style.cssText='border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute',te.innerHTML='',ee.appendChild(te),q.boxSizing=''===te.style.boxSizing||''===te.style.MozBoxSizing||''===te.style.WebkitBoxSizing,g.mix(q,{reliableHiddenOffsets:function(){return null==X&&ke(),Q},boxSizingReliable:function(){return null==X&&ke(),$},pixelMarginRight:function(){return null==X&&ke(),Y},pixelPosition:function(){return null==X&&ke(),X},reliableMarginRight:function(){return null==X&&ke(),J},reliableMarginLeft:function(){return null==X&&ke(),Z}})}var oe=/^(top|right|bottom|left)$/,ne,ie;window.getComputedStyle?(ne=function(ke){var _e,Oe;return _e=g.isFunction(ke.getEL)?ke.getEL():ke,Oe=_e.ownerDocument.defaultView,Oe&&Oe.opener||(Oe=window),Oe.getComputedStyle(_e)},ie=function(ke,_e,Oe){var Me=ke.style,Ne,Le,Ve,Ae;return Oe=Oe||ne(ke),Ae=Oe?Oe.getPropertyValue(_e)||Oe[_e]:void 0,''!==Ae&&void 0!=Ae||ve.contains(ke.ownerDocument,ke)||(Ae=ve.style(ke,_e)),Oe&&!q.pixelMarginRight()&&xe.test(Ae)&&rmargin.test(_e)&&(Ne=Me.width,Le=Me.minWidth,Ve=Me.maxWidth,Me.minWidth=Me.maxWidth=Me.width=Ae,Ae=Oe.width,Me.width=Ne,Me.minWidth=Le,Me.maxWidth=Ve),void 0==Ae?Ae:Ae+''}):H.currentStyle&&(ne=function(ke){return ke.currentStyle},ie=function(ke,_e,Oe){var Me=ke.style,Ne,Le,Ve,Ae;return Oe=Oe||ne(ke),Ae=Oe?Oe[_e]:void 0,null==Ae&&Me&&Me[_e]&&(Ae=Me[_e]),xe.test(Ae)&&!oe.test(_e)&&(Ne=Me.left,Le=ke.runtimeStyle,Ve=Le&&Le.left,Ve&&(Le.left=ke.currentStyle.left),Me.left='fontSize'===_e?'1em':Ae,Ae=Me.pixelLeft+'px',Me.left=Ne,Ve&&(Le.left=Ve)),void 0==Ae?Ae:Ae+''||'auto'});var ae=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,re=/<([\w:-]+)/,se=/^\s+/,de=/<|&#?\w+;/,le=/^-ms-/,pe=/-([\da-z])/gi,ce=/^(none|table(?!-c[ea]).+)/,ue=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,he=['Top','Right','Bottom','Left'],ge={option:[1,'<select multiple=\'multiple\'>','</select>'],legend:[1,'<fieldset>','</fieldset>'],area:[1,'<map>','</map>'],param:[1,'<object>','</object>'],thead:[1,'<table>','</table>'],tr:[2,'<table><tbody>','</tbody></table>'],col:[2,'<table><tbody></tbody><colgroup>','</colgroup></table>'],td:[3,'<table><tbody><tr>','</tr></tbody></table>'],_default:q.htmlSerialize?[0,'','']:[1,'X<div>','</div>']},me,fe=['Webkit','O','Moz','ms'];{var te=document.createElement('div');if(!te.style)return;me=te.style,q.cssFloat=!!te.style.cssFloat}var be=function(ke,_e){return _e.toUpperCase()},ve={type:function(ke){return null==ke?ke+'':'object'==typeof ke||'function'==typeof ke?class2type[toString.call(ke)]||'object':typeof ke},cssHooks:{},htmlPrefilter:function(ke){return ke.replace(ae,'<$1></$2>')},nodeName:function(ke,_e){return ke.nodeName&&ke.nodeName.toLowerCase()===_e.toLowerCase()},merge:function(ke,_e){for(var Oe=+_e.length,Ne=0,Le=ke.length;Ne<Oe;)ke[Le++]=_e[Ne++];if(Oe!=Oe)for(;void 0!==_e[Ne];)ke[Le++]=_e[Ne++];return ke.length=Le,ke},camelCase:function(ke){return ke.replace(le,'ms-').replace(pe,be)},cssProps:{float:q.cssFloat?'cssFloat':'styleFloat'},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0}},we=function(ke,_e,Oe,Ne){var Ae={},Le,Ve;for(Ve in _e)Ae[Ve]=ke.style[Ve],ke.style[Ve]=_e[Ve];for(Ve in Le=Oe.apply(ke,Ne||[]),_e)ke.style[Ve]=Ae[Ve];return Le},Se=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,xe=new RegExp('^('+Se+')(?!px)[a-z%]+$','i');g.each(['height','width'],function(ke){ve.cssHooks[ke]={get:function(Oe,Ne,Le){if(Ne)return ce.test(ve.css(Oe,'display'))&&0===Oe.offsetWidth?we(Oe,cssShow,function(){return I(Oe,ke,Le)}):I(Oe,ke,Le)},set:function(Oe,Ne,Le){var Ve=Le&&ne(Oe);return L(Oe,Ne,Le?O(Oe,ke,Le,q.boxSizing&&'border-box'===ve.css(Oe,'boxSizing',!1,Ve),Ve):0)}}}),g.style=ve.style=function(ke,_e,Oe,Ne){if(ke&&3!==ke.nodeType&&8!==ke.nodeType&&ke.style){var Me=ve.camelCase(_e),Fe=ke.style,Le,Ve,Ae;if(_e=ve.cssProps[Me]||(ve.cssProps[Me]=C(Me)||Me),Ae=ve.cssHooks[_e]||ve.cssHooks[Me],void 0!==Oe){if(Ve=typeof Oe,'string'===Ve&&(Le=N(Oe))&&Le[1]&&(Oe=V(ke,_e,Le),Ve='number'),null==Oe||Oe!==Oe)return;'number'===Ve&&(Oe+=Le&&Le[3]||(ve.cssNumber[Me]?'':'px')),q.clearCloneStyle||''!==Oe||0!==_e.indexOf('background')||(Fe[_e]='inherit'),Ae&&'set'in Ae&&void 0===(Oe=Ae.set(ke,Oe,Ne))||(Fe[_e]=Oe)}else return Ae&&'get'in Ae&&void 0!==(Le=Ae.get(ke,!1,Ne))?Le:Fe[_e]}},g.css=ve.css=function(ke,_e,Oe,Ne){var Me=ve.camelCase(_e),Le,Ve,Ae;return _e=ve.cssProps[Me]||(ve.cssProps[Me]=C(Me)||Me),Ae=ve.cssHooks[_e]||ve.cssHooks[Me],Ae&&'get'in Ae&&(Ve=Ae.get(ke,!0,Oe)),void 0==Ve&&(Ve=ie(ke,_e,Ne)),'normal'===Ve&&_e in cssNormalTransform&&(Ve=cssNormalTransform[_e]),''===Oe||Oe?(Le=parseFloat(Ve),!0===Oe||isFinite(Le)?Le||0:Ve):Ve};{var Ce=' ',Te=/[\n\t\r]/g,Pe=function(ke){return(Ce+ke+Ce).replace(Te,Ce)},Ee=function(ke,_e){var Oe=ke.className,Le=_e.length,Ne,Ve,Ae;if(Oe){for(Ne=Pe(Oe),Ve=Oe,Ae=0;Ae<Le;Ae++)0>Ne.indexOf(Ce+_e[Ae]+Ce)&&(Ve+=Ce+_e[Ae]);Ve=g.trim(Ve)}else Ve=_e.join(' ');ke.className=Ve},Ie=function(ke,_e){var Oe=ke.className,Le=_e.length,Ne,Ve,Ae;if(Oe&&Le){for(Ne=Pe(Oe),Ve=0;Ve<Le;Ve++)for(Ae=Ce+_e[Ve]+Ce;0<=Ne.indexOf(Ae);)Ne=Ne.replace(Ae,Ce);ke.className=g.trim(Ne)}};g.mix(z,{before:function(ke){var _e=this.getEL(),Oe=ke;'string'==typeof ke&&(ke=g.trim(ke))&&3<=ke.length&&g.startsWith(ke,'<')&&g.endsWith(ke,'>')&&(Oe=g.parseHTML(ke)[0]),_e.insertBefore(Oe,_e.childNodes[0])},append:function(ke){var _e=this.getEL(),Oe=ke;'string'==typeof ke&&(ke=g.trim(ke))&&3<=ke.length&&g.startsWith(ke,'<')&&g.endsWith(ke,'>')&&(Oe=g.parseHTML(ke)[0]),_e.appendChild(Oe)},html:function(ke){this.getEL().innerHTML=ke},attr:function(ke,_e){var Oe=this.getEL();'class'==ke?Oe.className=_e:Oe[ke]=_e},style:function(ke,_e){var Oe=this.getEL();ve.style(Oe,ke,_e)},css:function(ke){var _e=this.getEL();g.each(ke,function(Oe,Ne){ve.style(_e,Ne,Oe)})},addClass:function(ke){var _e=this.getEL();Ee(_e,ke.split(Ce))},removeClass:function(ke){var _e=this.getEL();Ie(_e,ke.split(Ce))},parent:function(){var ke=this.getEL();return new S(ke.parentNode)},remove:function(){var ke=this.getEL();ke.parentNode.removeChild(ke)}})}g.parseHTML=function(ke,_e){if(!ke||'string'!=typeof ke)return null;'boolean'==typeof _e&&(_e=!1),_e=_e||document;var Oe=ue.exec(ke);return Oe?[_e.createElement(Oe[1])]:(Oe=P([ke],_e),ve.merge([],Oe.childNodes))}}(dynamsoft.lib),function(g){var S=Array.prototype,C=Function.prototype;g.isFunction(S.indexOf)||(S.indexOf=function(T,P){var E;if(null==this)return-1;var I=Object(this),O=I.length>>>0;if(0==O)return-1;var N=+P||0;if(Math.abs(N)===Infinity&&(N=0),N>=O)return-1;for(E=Math.max(0<=N?N:O-Math.abs(N),0);E<O;){if(E in I&&I[E]===T)return E;E++}return-1}),g.isFunction(C.bind)||(C.bind=function(T){var P=this;if(1<arguments.length){var E=S.slice.call(arguments,1);return function(){return P.apply(T,arguments.length?E.concat(S.slice.call(arguments)):E)}}return function(){return arguments.length?P.apply(T,arguments):P.call(T)}}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,'')})}(dynamsoft.lib),function(g){var S=g.lib,C=g.navInfo,T=window.document,P,E;E=function(I){var O=I;return'mousewheel'==O&&(O=C.bGecko?'DOMMouseScroll':'mousewheel'),O},P={addEventListener:T.addEventListener?function(I,O,N){var L=E(O);I&&I.addEventListener(L,N,!1)}:function(I,O,N){var L=E(O);I&&I.attachEvent('on'+L,N)},removeEventListener:T.removeEventListener?function(I,O,N){var L=E(O);I&&I.removeEventListener(L,N,!1)}:function(I,O,N){var L=E(O);I&&I.detachEvent('on'+L,N)},getWheelDelta:function(I){I=I||window.event;var N=I.wheelDelta,L=I.detail,O;return N&&(O=N/120),L&&(O=-(0==L%3?L/3:L)),O}},S.mix(S,P)}(dynamsoft),function(g){g.Events={registedClass:[],registedObjs:[]};g.addEventListener(document.documentElement,'keydown',function(C){C=C||window.event;var T=!0;return g.each(g.Events.registedObjs,function(P){g.each(g.Events.registedClass,function(E){if(P instanceof E&&P.bFocus&&P.handlerKeyDown&&(T=P.handlerKeyDown(C),!T))return!1})}),T})}(dynamsoft.lib),function(g){g.stopPropagation=function(S){var C=S||window.event;C.preventDefault&&C.preventDefault(),C.stopPropagation&&C.stopPropagation(),C.returnValue=!1,C.cancelBubble=!0}}(dynamsoft.lib),function(g){var S={LEFT:0,MIDDLE:1,RIGHT:2};g.EnumMouseButton=S,g.detectButton=function(C){return C=C||window.event,null==C.which?2>C.button?S.LEFT:4==C.button?S.MIDDLE:S.RIGHT:2>C.which?S.LEFT:2==C.which?S.MIDDLE:S.RIGHT},g.fireEvent=function(C,T){var P;doc.createEvent?(P=doc.createEvent('HTMLEvents'),P.initEvent(C,TRUE,TRUE),T.dispatchEvent&&T.dispatchEvent(P)):doc.createEventObject?(P=doc.createEventObject(),P.bubbles=TRUE,P.cancelable=TRUE,T.fireEvent(C,P)):(P=new Event(C),T.dispatchEvent&&T.dispatchEvent(P))}}(dynamsoft.lib),function(g,S,C){function T(re){var se=this;return re&&g.isString(re.url)?se instanceof T?void(g.mix(se,Z),g.mix(se,oe),re instanceof T&&(re=re.config),se.config=re,se.config.context=se,se._setupCfg(re),se.sendInternal()):new T(re):void g.log('the url is error.')}var P=window,E=/^(?:about|app|app\-storage|.+\-extension|file|widget)$/,I=200,L=304,R=-1022,U='The local service (Dynamsoft Service) is disconnected.',W='open error: ',H='send error: ',z=new g.Uri(location.href),q=z&&E.test(z.getScheme()),G=!1,X=function(){try{return new P.XMLHttpRequest}catch(re){}return C},Y=function(){try{var re=!1;return g.each(['Msxml2.XMLHTTP.6.0','Msxml2.XMLHTTP','Microsoft.XMLHTTP','Msxml2.XMLHTTP.3.0','Msxml3.XMLHTTP'],function(se){try{return re=new P.ActiveXObject(se)}catch(de){g.error('new xhr error: '+de.message)}}),re}catch(se){}return C},$=!q&&P.XMLHttpRequest&&'withCredentials'in(X()||[]),Q=P.ActiveXObject?function(re){return S.bIE&&9>=parseInt(S.strBrowserVersion)?Y():!q&&X()||Y()}:X,J=function(){return G},Z={url:!1,onSuccess:!1,onError:!1,onComplete:!1,method:'GET',async:!0,xhrFields:!1,mimeType:!1,username:!1,password:!1,data:!1,dataType:'text',headers:!1,contentType:'application/x-www-form-urlencoded; charset=UTF-8',beforeSend:!1,afterSend:!1,timeout:0,crossDomain:!1},ee=/^(?:GET|HEAD)$/,te=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,ne={xml:'application/xml, text/xml',html:'text/html',text:'text/plain',json:'application/json, text/javascript','*':'*/*'},ie=g.nil,oe,ae;S.bIE&&10>=parseInt(S.strBrowserVersion)&&(ie=g.noop),oe={setRequestHeader:function(re,se){var de=this;return de.headers[re]=se,de},getAllResponseHeaders:function(){var re=this;return 2===re.state?re.responseHeadersString:null},getNativeXhr:function(){var re=this;return re.nativeXhr},getResponseHeader:function(re){var de=this,se,le;if(re=re.toLowerCase(),2===de.state){if(!(le=de.responseHeaders))for(le=de.responseHeaders={};se=te.exec(de.responseHeadersString);)le[se[1].toLowerCase()]=se[2];se=le[re]}return se===C?null:se},overrideMimeType:function(re){var se=this;return se.state||(se.mimeType=re),se},abort:function(re){var se=this;return re=re||'abort',se.nativeXhr&&se.nativeXhr.abort(),se._ioReady(0,re),se},_ioReady:function(re,se){var de=this,le;if(2!==de.state){de.state=2,de.readyState=4,re>=I&&re<300||re===L?re===L?(se='not modified',le=!0):(se='success',le=!0):0>re&&(re=0);try{re>=I&&de.handleResponseData()}catch(fe){g.error(fe.stack||fe,'error'),se=fe.message||'parser error'}de.status=re,de.statusText=se;var pe=de,ce;(ce=de.timeoutTimer)&&(clearTimeout(ce),de.timeoutTimer=0);var ue=le?'onSuccess':'onError',ge=[de.responseData,se,de],me=pe.context,he;he=pe[ue],g.isFunction(he)&&he.apply(me,ge),he=pe.onComplete,g.isFunction(he)&&he.apply(me,ge)}},handleResponseData:function(){var re=this,de=re.dataType,le=re.nativeXhr,se;if('blob'===de||'arraybuffer'===de)se=P.Blob?le.response:le.responseBody;else if('json'==de)se=le.responseType&&'json'==le.responseType.toLowerCase()?le.response:le.responseText?P.JSON&&P.JSON.parse?P.JSON.parse(le.responseText):g.parse(le.responseText):{};else if('user-defined'===de)se=le.response===C?le.responseText:le.response;else{re.responseText=se=le.responseText||'';try{var pe=le.responseXML;pe&&pe.documentElement&&(re.responseXML=pe)}catch(ce){}}re.responseData=se},sendInternal:function(){var re=this,se=re,de,le,pe,ce,ue,he,ge,me,fe,ye;if((le=re.method,pe=re.url,ce=re.dataType,ge=re.mimeType,!!g.isString(pe))&&(se.nativeXhr=ue=Q(re.crossDomain),!!ue)){try{if(se.state=1,re.username?ue.open(le,pe,re.async,re.username,re.password):ue.open(le,pe,re.async),(re.async||S.bIE)&&ce&&'user-defined'!=ce&&'responseType'in ue)try{ue.responseType=ce}catch(we){}}catch(we){return void(2>se.state?(g.error(we.stack||we,'error'),se._ioReady(-1,W+(g.isNumber(we.number)?'('+we.number+')':'')+(we.message||''))):g.error(we))}for(de in he=re.xhrFields||{},'withCredentials'in he&&!$&&delete he.withCredentials,he)try{ue[de]=he[de]}catch(we){g.error(we)}ge&&ue.overrideMimeType&&ue.overrideMimeType(ge),me=re.headers||{};var be=me['X-Requested-With'];if(!1===be&&delete me['X-Requested-With'],'undefined'!=typeof ue.setRequestHeader)for(de in re.contentType&&ue.setRequestHeader('Content-Type',re.contentType),ue.setRequestHeader('Accept',ce&&ne[ce]?ne[ce]+('*'===ce?'':', */*; q=0.01'):ne['*']),me)ue.setRequestHeader(de,me[de]);fe=!ee.test(re.method),ye=fe&&re.data||null,fe&&S.bIE&&10>parseInt(S.strBrowserVersion)&&(ye=re.data),re.async&&0<re.timeout&&(se.timeoutTimer=setTimeout(function(){se.abort('timeout')},1E3*re.timeout));try{if(se.state=1,g.isFunction(se.beforeSend)){var ve=se.beforeSend(ue,se);if(!1===ve)return void se.abort('cancel')}ue.send(ye),g.isFunction(se.afterSend)&&se.afterSend(se)}catch(we){2>se.state?(g.error(we.stack||we,'error'),se._ioReady(-1,H+(we.message||''))):g.error(we)}re.async&&4!==ue.readyState?J(ue)?(ue.onload=function(){ue.readyState=4,ue.status=I,se._callback()},ue.onerror=function(){ue.readyState=4,ue.status=500,se._callback()}):ue.onreadystatechange=function(){se._callback()}:se._callback()}},_callback:function(re,se){var de=this,le=de.nativeXhr;try{if(4===le.readyState||se)if(J(le)?(le.onerror=ie,le.onload=ie):le.onreadystatechange=ie,se)4!==le.readyState&&le.abort();else{J(le)||(de.responseHeadersString=le.getAllResponseHeaders());var pe=le.status,ce;try{ce=le.statusText}catch(ue){g.error('xhr statusText error: '),g.error(ue),ce=''}de._ioReady(pe,ce)}}catch(ue){if(g.error(ue.stack||ue,'error'),ue.errorCode===R)throw{errorCode:R,errorString:U,toString:function(){return this.errorCode+': '+this.errorString}};le.onreadystatechange=ie,se||de._ioReady(-1,ue.message||'process error')}},_setupCfg:function(re){var se=this,de,le,pe,ce,ue;for(le in ce=re.url,g.startsWith(ce,'http://')||g.startsWith(ce,'https://')?ue=new g.Uri(ce):(g.startsWith(ce,'//')&&(re.url=ce='http:'+ce),ue=z.resolve(ce)),de=re.dataType?re.dataType.toLowerCase():'text',re.dataType=de,re.method=re.method?re.method.toUpperCase():'GET','crossDomain'in re||(re.crossDomain=!ue.isSameOriginAs(z)),pe=re.headers,pe)g.isUndefined(pe[le])&&delete pe[le];g.mix(se,re),se.state=1}};T._strOpenErr=W,T._strSendErr=H,T._strConnectionToServiceLostString=U,ae={ajax:T,io:{get:function(re,se,de,le){return new T({method:'GET',url:re,onSuccess:se,onError:de,dataType:le})},post:function(re,se,de,le,pe){return new T({method:'POST',data:se,url:re,onSuccess:de,onError:le,dataType:pe})},put:function(re,se,de,le,pe){return new T({method:'PUT',data:se,url:re,onSuccess:de,onError:le,dataType:pe})}}},g.mix(g,ae)}(dynamsoft.lib,dynamsoft.navInfo),function(g){function S(F){return 10>F?'0'+F:F}function C(F,D,R,U,W,H,z){var q=D[F];switch(q&&'object'==typeof q&&('function'==typeof q.toJSON?q=q.toJSON(F):q instanceof Date?q=isFinite(q.valueOf())?q.getUTCFullYear()+'-'+S(q.getUTCMonth()+1)+'-'+S(q.getUTCDate())+'T'+S(q.getUTCHours())+':'+S(q.getUTCMinutes())+':'+S(q.getUTCSeconds())+'Z':null:(q instanceof String||q instanceof Number||q instanceof Boolean)&&(q=q.valueOf())),void 0!==R&&(q=R.call(D,F,q)),typeof q){case'number':return isFinite(q)?q+'':'null';case'string':return I.quote(q);case'boolean':return q+'';case'object':return q?g.isArray(q)?P(q,R,U,W,H,z):T(q,R,U,W,H,z):'null';}}function T(F,D,R,U,W,H){var z=H;H+=U;var q,G,X,Y;q=void 0===R?g.keys(F):R;var $=[];for(X=0,G=q.length;X<G;X++){Y=q[X];var Q=C(Y,F,D,R,U,W,H);if(Q!==void 0){var J=I.quote(Y);J+=':',U&&(J+=' '),J+=Q,$[$.length]=J}}var Z;if(!$.length)Z='{}';else if(!U)Z='{'+$.join(',')+'}';else{var ee=',\n'+H,te=$.join(ee);Z='{\n'+H+te+'\n'+z+'}'}return Z}function P(F,D,R,U,W,H){var z=H;H+=U;for(var q=[],G=F.length,X=0,Y;X<G;)Y=C(X+'',F,D,R,U,W,H),q[q.length]=void 0===Y?'null':Y,++X;var $;if(!q.length)$='[]';else if(!U)$='['+q.join(',')+']';else{var Q='\n,'+H,J=q.join(Q);$='[\n'+H+J+'\n'+z+']'}return $}function E(F,D,R){var U=F[D],W,H,z;if('object'==typeof U)if(g.isArray(U)){W=0,H=U.length;for(var q=[];W<H;)z=E(U,W+'',R),void 0!=z&&(q[q.length]=z);U=q}else{var G=g.keys(U);for(W=0,H=G.length;W<H;W++){var X=G[W];z=E(U,X,R),void 0==z?delete U[X]:U[X]=z}}return R.call(F,D,U)}var I=function(){var F={'\b':'\\b','\f':'\\f','\n':'\\n','\r':'\\r','\t':'\\t','"':'\\"'},D={},R=/["\b\f\n\r\t\x00-\x1f]/g,U=/\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\"|\\u[0-9a-zA-Z]{4}/g;return g.each(F,function(W,H){D[W]=H}),D['\\/']='/',D['\\\\']='\\',{quote:function(W){return'"'+W.replace(R,function(H){var z;return(z=F[H])||(z='\\u'+('0000'+H.charCodeAt(0).toString(16)).slice(-4)),z})+'"'},unQuote:function(W){return W.slice(1,W.length-1).replace(U,function(H){var z;return(z=D[H])||(z=String.fromCharCode(parseInt(H.slice(2),16))),z})}}}();g.stringify=function(F,D,R){var U='',W,H;return D&&('function'==typeof D?H=D:g.isArray(D)&&(W=D)),'number'==typeof R?(R=Math.min(10,R),U=Array(R+1).join(' ')):'string'==typeof R&&(U=R.slice(0,10)),C('',{'':F},H,W,U,[],'')};var O={},N={SHIFT_TYPE:1,REDUCE_TYPE:2,ACCEPT_TYPE:0,TYPE_INDEX:0,PRODUCTION_INDEX:1,TO_INDEX:2},L;O.yy={unQuote:I.unQuote},L=function(F){var D=this;D.rules=[],g.mix(D,F),D.resetInput(D.input)},L.prototype={constructor:function(F){var D=this;D.rules=[],g.mix(D,F),D.resetInput(D.input)},resetInput:function(F){g.mix(this,{input:F,matched:'',stateStack:[L.STATIC.INITIAL],match:'',text:'',firstLine:1,lineNumber:1,lastLine:1,firstColumn:1,lastColumn:1})},getCurrentRules:function(){var F=this,D=F.stateStack[F.stateStack.length-1],R=[];return D=F.mapState(D),g.each(F.rules,function(U){var W=U.state||U[3];W?g.inArray(D,W)&&R.push(U):D==L.STATIC.INITIAL&&R.push(U)}),R},pushState:function(F){this.stateStack.push(F)},popState:function(){return this.stateStack.pop()},getStateStack:function(){return this.stateStack},showDebugInfo:function(){var F=this,D=L.STATIC.DEBUG_CONTEXT_LIMIT,R=F.matched,U=F.match,W=F.input;R=R.slice(0,R.length-U.length);var H=(R.length>D?'...':'')+R.slice(-D).replace(/\n/,' '),z=U+W;return z=z.slice(0,D)+(z.length>D?'...':''),H+z+'\n'+Array(H.length+1).join('-')+'^'},mapSymbol:function(F){var D=this,R=D.symbolMap;return R?R[F]||(R[F]=++D.symbolId):F},mapReverseSymbol:function(F){var D=this,R=D.symbolMap,W=D.reverseSymbolMap,U;if(!W&&R)for(U in W=D.reverseSymbolMap={},R)W[R[U]]=U;return W?W[F]:F},mapState:function(F){var D=this,R=D.stateMap;return R?R[F]||(R[F]=++D.stateId):F},lex:function(){var F=this,D=F.input,q=F.getCurrentRules(),R,U,W,H,z;if(F.match=F.text='',!D)return F.mapSymbol(L.STATIC.END_TAG);for(R=0;R<q.length;R++){U=q[R];var G=U.regexp||U[1],X=U.token||U[0],Y=U.action||U[2]||void 0;if(W=D.match(G)){z=W[0].match(/\n.*/g),z&&(F.lineNumber+=z.length),g.mix(F,{firstLine:F.lastLine,lastLine:F.lineNumber+1,firstColumn:F.lastColumn,lastColumn:z?z[z.length-1].length-1:F.lastColumn+W[0].length});var $;return $=F.match=W[0],F.matches=W,F.text=$,F.matched+=$,H=Y&&Y.call(F),H=void 0==H?X:F.mapSymbol(H),D=D.slice($.length),F.input=D,H?H:F.lex()}}return g.error('lex error at line '+F.lineNumber+':\n'+F.showDebugInfo()),void 0}},L.STATIC={INITIAL:'I',DEBUG_CONTEXT_LIMIT:20,END_TAG:'$EOF'};var V=new L({rules:[[2,/^"(\\"|\\\\|\\\/|\\b|\\f|\\n|\\r|\\t|\\u[0-9a-zA-Z]{4}|[^\\"\x00-\x1f])*"/,0],[0,/^[\t\r\n\x20]/,0],[3,/^,/,0],[4,/^:/,0],[5,/^\[/,0],[6,/^\]/,0],[7,/^\{/,0],[8,/^\}/,0],[9,/^-?\d+(?:\.\d+)?(?:e-?\d+)?/i,0],[10,/^true|false/,0],[11,/^null/,0],[12,/^./,0]]});O.lexer=V,V.symbolMap={$EOF:1,STRING:2,COMMA:3,COLON:4,LEFT_BRACKET:5,RIGHT_BRACKET:6,LEFT_BRACE:7,RIGHT_BRACE:8,NUMBER:9,BOOLEAN:10,NULL:11,INVALID:12,$START:13,json:14,value:15,object:16,array:17,elementList:18,member:19,memberList:20},O.productions=[[13,[14]],[14,[15],function(){return this.$1}],[15,[2],function(){return this.yy.unQuote(this.$1)}],[15,[9],function(){return parseFloat(this.$1)}],[15,[16],function(){return this.$1}],[15,[17],function(){return this.$1}],[15,[10],function(){return'true'===this.$1}],[15,[11],function(){return null}],[18,[15],function(){return[this.$1]}],[18,[18,3,15],function(){return this.$1[this.$1.length]=this.$3,this.$1}],[17,[5,6],function(){return[]}],[17,[5,18,6],function(){return this.$2}],[19,[2,4,15],function(){return{key:this.yy.unQuote(this.$1),value:this.$3}}],[20,[19],function(){var F={};return F[this.$1.key]=this.$1.value,F}],[20,[20,3,19],function(){return this.$1[this.$3.key]=this.$3.value,this.$1}],[16,[7,8],function(){return{}}],[16,[7,20,8],function(){return this.$2}]],O.table={gotos:{0:{14:7,15:8,16:9,17:10},2:{15:12,16:9,17:10,18:13},3:{19:16,20:17},18:{15:23,16:9,17:10},20:{15:24,16:9,17:10},21:{19:25}},action:{0:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},1:{1:[2,2,0],3:[2,2,0],6:[2,2,0],8:[2,2,0]},2:{2:[1,0,1],5:[1,0,2],6:[1,0,11],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},3:{2:[1,0,14],8:[1,0,15]},4:{1:[2,3,0],3:[2,3,0],6:[2,3,0],8:[2,3,0]},5:{1:[2,6,0],3:[2,6,0],6:[2,6,0],8:[2,6,0]},6:{1:[2,7,0],3:[2,7,0],6:[2,7,0],8:[2,7,0]},7:{1:[0,0,0]},8:{1:[2,1,0]},9:{1:[2,4,0],3:[2,4,0],6:[2,4,0],8:[2,4,0]},10:{1:[2,5,0],3:[2,5,0],6:[2,5,0],8:[2,5,0]},11:{1:[2,10,0],3:[2,10,0],6:[2,10,0],8:[2,10,0]},12:{3:[2,8,0],6:[2,8,0]},13:{3:[1,0,18],6:[1,0,19]},14:{4:[1,0,20]},15:{1:[2,15,0],3:[2,15,0],6:[2,15,0],8:[2,15,0]},16:{3:[2,13,0],8:[2,13,0]},17:{3:[1,0,21],8:[1,0,22]},18:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},19:{1:[2,11,0],3:[2,11,0],6:[2,11,0],8:[2,11,0]},20:{2:[1,0,1],5:[1,0,2],7:[1,0,3],9:[1,0,4],10:[1,0,5],11:[1,0,6]},21:{2:[1,0,14]},22:{1:[2,16,0],3:[2,16,0],6:[2,16,0],8:[2,16,0]},23:{3:[2,9,0],6:[2,9,0]},24:{3:[2,12,0],8:[2,12,0]},25:{3:[2,14,0],8:[2,14,0]}}},O.parse=function(D){var R=this,U=R.lexer,q=R.table,G=q.gotos,X=q.action,Y=R.productions,$=[null],Q=[0],W,H,z;for(U.resetInput(D);;){if(W=Q[Q.length-1],H||(H=U.lex()),!H)return g.log('it is not a valid input: '+D,'error'),!1;if(z=X[W]&&X[W][H],!z){var J=[],Z;return X[W]&&g.each(X[W],function(le,pe){J.push(R.lexer.mapReverseSymbol(pe))}),Z='Syntax error at line '+U.lineNumber+':\n'+U.showDebugInfo()+'\nexpect '+J.join(', '),g.log(Z),!1}switch(z[N.TYPE_INDEX]){case N.SHIFT_TYPE:Q.push(H),$.push(U.text),Q.push(z[N.TO_INDEX]),H=null;break;case N.REDUCE_TYPE:var ee=Y[z[N.PRODUCTION_INDEX]],te=ee.symbol||ee[0],ne=ee.action||ee[2],ie=ee.rhs||ee[1],oe=ie.length,ae=0,se=$[$.length-oe],re;for(R.$$=se,re=void 0;ae<oe;ae++)R['$'+(oe-ae)]=$[$.length-1-ae];ne&&(re=ne.call(R)),se=void 0==re?R.$$:re,oe&&(Q=Q.slice(0,2*(-1*oe)),$=$.slice(0,-1*oe)),Q.push(te),$.push(se);var de=G[Q[Q.length-2]][Q[Q.length-1]];Q.push(de);break;case N.ACCEPT_TYPE:return se;}}},g.parser=O,g.parse=function(F,D){var R=window,U=R.JSON;if(U&&U.parse)return U.parse(F+'');var W=O.parse(F+'');return D?E({'':W},'',D):W}}(dynamsoft.lib),function(g,S){var C=window,T=document,P=!0,E=!1,I={},O=S.bIE&&8>S.IEMode,N=O&&7>S.IEMode,L=5e5,F=function(z){var q,G,X;q=T.body.scrollTop||T.documentElement.scrollTop,X=C.innerHeight?C.innerHeight:T.documentElement.clientHeight,G=q+(X-z.offsetHeight)/2,z.style.top=G+'px',z._dlgInfo.isTopOverridden=P},D=function(z,q){for(var G=0;G<z.length;++G)if(z[G]==q)return P;return E},R=function(z){for(var q=0;q<T.styleSheets.length;++q){var G=T.styleSheets[q],X=E,Y=E,$,Q;try{X=G.cssRules,Y=T.querySelectorAll}catch(te){}if(X&&Y)for(var J=0;J<X.length;++J){$=X[J],Q=E;try{Q=Y($.selectorText)}catch(te){}if(Q&&D(Q,z)){var Z=$.style.getPropertyValue('top'),ee=$.style.getPropertyValue('bottom');if(Z&&'auto'!=Z||ee&&'auto'!=ee)return P}}}return E},U=function(z){var q=E;return C.getComputedStyle?q=C.getComputedStyle(z):z.currentStyle&&(q=z.currentStyle),q&&'absolute'!=q.position?E:'auto'!=z.style.top&&''!=z.style.top||'auto'!=z.style.bottom&&''!=z.style.bottom?E:!R(z)};I.showDialog=function(z){var q=this,G;if(q.open)return void g.error('showDialog called on open dialog.');if(q.open=P,q.setAttribute('open','open'),O&&(G=N?T.body:T.documentElement,q._dlgInfo.docOverflow=G.style.overflow,G.style.overflow='hidden'),U(q)&&F(q),z&&(q._dlgInfo.modal=P,I.dm.pushDialog(q),O)){var $=E,Q=E,X,Y;X=q.currentStyle.left,Y=q.currentStyle.top,'auto'===X?(N&&(q.style.textAlign='center'),X=(G.clientWidth-q.currentStyle.width)/2):0<X.indexOf('%')?($=X,X=+(X.replace('%','')*G.clientWidth/100)):X=+X.replace('px',''),0<X||(X=0),'auto'===Y?Y=(G.clientHeight-q.currentStyle.height)/2:0<Y.indexOf('%')?(Q=Y,Y=+(Y.replace('%','')*G.clientHeight/100)):Y=+Y.replace('px',''),0<Y||(Y=0),setTimeout(function(){var J=q.style,Z=q._dlgInfo.mask;Z.style.backgroundColor='#000',Z.style.filter='alpha(opacity=30)',J.position='absolute',J.left=X+'px',J.top=Y+'px'},0),q._scrollFn=function(){var J=G.scrollTop+'px',Z=G.scrollLeft+'px',ee=I.dm.overlay,te=q._dlgInfo.mask,ne=q.style;ne.top=Y+G.scrollTop+G.clientHeight<G.scrollHeight?Y+G.scrollTop+'px':J,ee&&(ee.style.top=J),te&&(te.style.top=J),ne.left=Z,ee&&(ee.style.left=Z),te&&(te.style.left=Z),setTimeout(function(){q._resizeFn()},100)},q._resizeFn=function(){var J=N?T.body:T.documentElement,Z=J.clientWidth+'px',ee=J.clientHeight+'px',te=I.dm.overlay,ne=q._dlgInfo.mask;te.style.width=Z,ne&&(ne.style.width=Z),te.style.height=ee,ne&&(ne.style.height=ee),setTimeout(function(){var ae=q.style,re=N?T.body:T.documentElement,ie,oe;$&&(ie=+($.replace('%','')*re.clientWidth/100),ae.left=ie+'px'),Q&&(oe=+(Q.replace('%','')*re.clientHeight/100),ae.top=oe+'px')},0)},q._scrollFn(),C.attachEvent('onscroll',q._scrollFn),C.attachEvent('onresize',q._resizeFn)}},I.closeDialog=function(z){var q=this;if(q.open||g.error('closeDialog called on closed dialog.'),q.open=E,q.removeAttribute('open'),O){var G=N?T.body:T.documentElement;G.style.overflow=q._dlgInfo.docOverflow}return'undefined'!=typeof z&&(q.returnValue=z),q._dlgInfo.isTopOverridden&&(q.style.top='auto'),q._dlgInfo.modal&&(O&&(C.detachEvent('onscroll',q._scrollFn),C.detachEvent('onresize',q._resizeFn)),I.dm.removeDialog(this)),q.returnValue},I.createMouseEvent=function(z){var q=T.createEvent('MouseEvents');return q.initMouseEvent(z.type,z.bubbles,z.cancelable,C,z.detail,z.screenX,z.screenY,z.clientX,z.clientY,z.ctrlKey,z.altKey,z.shiftKey,z.metaKey,z.button,z.relatedTarget),q},I.setup=function(z){var q=this;z.show=q.showDialog.bind(z,E),z.showModal=q.showDialog.bind(z,P),z.close=q.closeDialog.bind(z),z._dlgInfo={}};var W=function(){var z=this,q;z.pendingDialogStack=[],z.overlay=T.createElement(O?'iframe':'div'),q=z.overlay.style,q.position=O?'absolute':'fixed',q.display='block',q.left=q.top=q.margin=q.padding=0,q.backgroundColor='#000',q.filter='alpha(opacity=30)',q.opacity=q.MozOpacity=0.3,q.zIndex=L,q.width='100%',q.height=O&&0<T.documentElement.clientHeight?T.documentElement.clientHeight+'px':'100%',T.createEvent&&g.addEventListener(z.overlay,'click',function(G){var X=I.createMouseEvent(G);T.body.dispatchEvent(X)})},H=W.prototype;H._blockDocument=function(){T.body.contains(this.overlay)||T.body.appendChild(this.overlay)},H._unblockDocument=function(){T.body.removeChild(this.overlay)},H._updateStacking=function(){var z=this,G,Y;return G=z.pendingDialogStack,0==G.length?void z._unblockDocument():void(z._blockDocument(),Y=L,g.each(G,function($){Y++,$._dlgInfo.mask.style.zIndex=Y++,$.style.zIndex=Y}))},H.pushDialog=function(z){var q=this,G;return q.pendingDialogStack.length>=1e3?void g.error('Too many modal dialogs.'):void(G=T.createElement('div'),G.className='dynamsoft-backdrop',O&&(G.style.position='absolute'),T.createEvent&&g.addEventListener(G,'click',function(X){if(z.dispatchEvent){var Y=I.createMouseEvent(X);z.dispatchEvent(Y)}}),z.parentNode.insertBefore(G,z.nextSibling),z._dlgInfo.mask=G,q.pendingDialogStack.push(z),q._updateStacking())},H.removeDialog=function(z){var q=this,G,X;G=g.isArray(q.pendingDialogStack)?q.pendingDialogStack.indexOf(z):-1;-1==G||(q.pendingDialogStack.splice(G,1),X=z._dlgInfo.mask,X.parentNode.removeChild(X),z._dlgInfo.mask=null,q._updateStacking())},I.dm=new W,g.dialog=I}(dynamsoft.lib,dynamsoft.navInfo),function(g){g.ObservableArray=function(C){function T(N){N in E||Object.defineProperty(E,N,{configurable:!0,enumerable:!0,get:function(){return I[N]},set:function(L){I[N]=L,P({type:'itemset',index:N,item:L})}})}function P(N){O[N.type].forEach(function(L){L.call(E,N)})}var E=this,I=[],O={itemadded:[],itemremoved:[],itemset:[]};Object.defineProperty(E,'addEventListener',{configurable:!1,enumerable:!1,writable:!1,value:function(N,L){if(N=(''+N).toLowerCase(),!(N in O))throw new Error('Invalid event name.');if('function'!=typeof L)throw new Error('Invalid handler.');O[N].push(L)}}),Object.defineProperty(E,'removeEventListener',{configurable:!1,enumerable:!1,writable:!1,value:function(N,L){if(N=(''+N).toLowerCase(),!(N in O))throw new Error('Invalid event name.');if('function'!=typeof L)throw new Error('Invalid handler.');for(var V=O[N],F=V.length;0<=--F;)V[F]===L&&V.splice(F,1)}}),Object.defineProperty(E,'push',{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var L=0,V=arguments.length,N;L<V;L++)N=I.length,I.push(arguments[L]),T(N),P({type:'itemadded',index:N,item:arguments[L]});return I.length}}),Object.defineProperty(E,'pop',{configurable:!1,enumerable:!1,writable:!1,value:function(){if(-1<I.length){var N=I.length-1,L=I.pop();return delete E[N],P({type:'itemremoved',index:N,item:L}),L}}}),Object.defineProperty(E,'unshift',{configurable:!1,enumerable:!1,writable:!1,value:function(){for(var N=0,L=arguments.length;N<L;N++)I.splice(N,0,arguments[N]),T(I.length-1),P({type:'itemadded',index:N,item:arguments[N]});for(;N<I.length;N++)P({type:'itemset',index:N,item:I[N]});return I.length}}),Object.defineProperty(E,'shift',{configurable:!1,enumerable:!1,writable:!1,value:function(){if(-1<I.length){var N=I.shift();return delete E[I.length],P({type:'itemremoved',index:0,item:N}),N}}}),Object.defineProperty(E,'splice',{configurable:!1,enumerable:!1,writable:!1,value:function(N,L){var V=[],F;for(N=null==N?0:0>N?I.length+N:N,L=null==L?I.length-N:0<L?L:0;L--;)F=I.splice(N,1)[0],V.push(F),delete E[I.length],P({type:'itemremoved',index:N+V.length-1,item:F});for(var R=2,U=arguments.length;R<U;R++)I.splice(N,0,arguments[R]),T(I.length-1),P({type:'itemadded',index:N,item:arguments[R]}),N++;return V}}),Object.defineProperty(E,'length',{configurable:!1,enumerable:!1,get:function(){return I.length},set:function(N){var L=+N,V=I.length;if(0==L%1&&0<=L)L<V?E.splice(L):L>V&&E.push(...Array(L-V));else throw new RangeError('Invalid array length');return I.length=L,N}}),Object.getOwnPropertyNames(Array.prototype).forEach(function(N){N in E||Object.defineProperty(E,N,{configurable:!1,enumerable:!1,writable:!1,value:Array.prototype[N]})}),C instanceof Array&&E.push(...C)}}(dynamsoft.lib),function(g){function C(T){if(Object.create)return Object.create(T);var P=typeof T;if('object'!=P&&'function'!=P)throw new TypeError('type error');var E=function(){};return E.prototype=T,new E}g.enumFactory=function(T){'use strict';var P=function(){throw'cannot instantiate enumeration'},E=P.prototype={constructor:P,toString:function(){return this.name},valueOf:function(){return this.value},toJSON:function(){return this.name}};for(var I in P.values=[],T){var O=C(E);O.name=I,O.value=T[I],P[I]=O,P.values.push(O)}return P.foreach=function(N,L){for(var V=0;V<this.values.length;V++)N.call(L,this.values[V])},P},g.inherit=C}(dynamsoft.lib),function(g,S){g.MbcEnumFileType={FT_BMP:'image/bmp',FT_JPG:'image/jpeg',FT_PNG:'image/png',FT_PDF:'application/pdf',FT_TIF:'image/tiff'},g.MbcEnumError=S.enumFactory({OK:0,UndefineError:-1,ParameterNumberUnmatched:-1001,TypeNotValid:-1002,ValueOutOfRange:-1003,ValueNotValid:-1004,ContainerTypeNotValid:-1011,ContainerIdNotValid:-1012,ContainerIsNotEmpty:-1013,OperationNotSupported:-1021,ImgTypeNotSupport:-1022,BufferIsFull:-1023,BufferIsEmpty:-1024,UploadFileFailed:-1101,WrapperFunctionInvalid:-1102,DivInUsed:-1103,UnInstantiated:-1104,VideoStreamNotSupported:-1105,VideoStreamNotAvailable:-1106,AcquireVideoStreamFailed:-1107,LoadVideoStreamFailed:-1108,WasmNotSupported:-1109})}(dynamsoft,dynamsoft.lib),function(g){var S=dynamsoft.MbcEnumError;g.errorInfo={isUnknownCode:function(C){if(C===S.Unknown)return!0;for(var T in S)if(S[T]===C)return!1;return!0},getOkCode:function(){return S.OK},getOkString:function(){return'Successful.'},getParameterNumberUnmatchedCode:function(){return S.ParameterNumberUnmatched},getParameterNumberUnmatchedString:function(C){return C?'One or more parameters are missing.':'There are too many parameters.'},getTypeNotValidCode:function(){return S.TypeNotValid},getTypeNotValidString:function(C,T){return['The type of ',T?'event ':'parameter ',C,' is invalid.'].join('')},getContainerTypeNotValidCode:function(){return S.ContainerTypeNotValid},getContainerTypeNotValidString:function(){return'The container must be a DIV element.'},getContainerIdNotValidCode:function(){return S.ContainerIdNotValid},getContainerIdNotValidString:function(C){return'The element with the ID "'+C+'" could not be found.'},getContainerIsNotEmptyCode:function(){return S.ContainerIsNotEmpty},getContainerIsNotEmptyString:function(){return'The container must be empty.'},getImgTypeNotSupportCode:function(){return S.ImgTypeNotSupport},getImgTypeNotSupportString:function(){return'Only supports jpeg, png, gif and bmp.'},getValueOutOfRangeCode:function(){return S.ValueOutOfRange},getValueOutOfRangeString:function(C){return['The value of parameter ',C,' is out of range.'].join('')},getValueNotValidCode:function(){return S.ValueNotValid},getValueNotValidString:function(C){return['The value of parameter ',C,' is invalid.'].join('')},getBufferIsFullCode:function(){return S.BufferIsFull},getBufferIsFullString:function(){return'The free size in buffer can\'t store the img(s).'},getBufferIsEmptyCode:function(){return S.BufferIsEmpty},getBufferIsEmptyString:function(){return'The image buffer is Empty. Could not do this operation.'},getOperationNotSupportedCode:function(){return S.OperationNotSupported},getOperationNotSupportedString:function(C){return'This operation is only supported under '+C+' mode.'},getUploadFileFailedCode:function(){return S.UploadFileFailed},getUploadFileFailedString:function(){return'Failed to upload file(s). Please make sure the network is available, the url is valid and server code is correct. And try again later.'},getWrapperFunctionInvalidCode:function(){return S.WrapperFunctionInvalid},getWrapperFunctionInvalidString:function(C){return`The wrapper function ${C} is invalid. The return value of the function needs to be a Div dom.`},getDivInUsedCode:function(){return S.DivInUsed},getDivInUsedString:function(C){return`The Dom(id="${C}") is in used.`},getUnInstantiatedCode:function(){return S.UnInstantiated},getUnInstantiatedString:function(C){return`Cannot instantiate ${C}.`},getVideoStreamNotSupportedCode:function(){return S.VideoStreamNotSupported},getVideoStreamNotSupportedString:function(){return`Video stream is not supported.`},getVideoStreamNotAvailableCode:function(){return S.VideoStreamNotAvailable},getVideoStreamNotAvailableString:function(){return`Video stream is not available.`},getAcquireVideoStreamFailedCode:function(){return S.AcquireVideoStreamFailed},getAcquireVideoStreamFailedString:function(){return`Failed to get video stream.`},getLoadVideoStreamFailedCode:function(){return S.LoadVideoStreamFailed},getLoadVideoStreamFailedString:function(){return`Failed to load video stream.`},getWasmNotSupportedCode:function(){return S.WasmNotSupported},getWasmNotSupportedString:function(){return`Webassembly is not supported.`}}}(dynamsoft.lib),function(g){g.view=g.view||{};var S=S||{};S.Matrix=function(E,I,O,N,L,V){this.a=E,this.b=I,this.c=O,this.d=N,this.e=L,this.f=V},S.Matrix.dot=function(E,I){var O=E,N=I;return new S.Matrix(O.a*N.a+O.c*N.b,O.b*N.a+O.d*N.b,O.a*N.c+O.c*N.d,O.b*N.c+O.d*N.d,O.a*N.e+O.c*N.f+O.e,O.b*N.e+O.d*N.f+O.f)},S.Matrix.prototype.dot=function(E){return S.Matrix.dot(this,E)},S.Matrix.equals=function(E,I){var O=E,N=I;return O.a==N.a&&O.b==N.b&&O.c==N.c&&O.d==N.d&&O.e==N.e&&O.f==N.f},S.Matrix.prototype.equals=function(E){return S.Matrix.equals(this,E)},S.Matrix.prototype.inversion=function(){var E=this.a,I=this.b,O=this.c,N=this.d,L=this.e,V=this.f,F=E*N-I*O;return new S.Matrix(N/F,-I/F,-O/F,E/F,(O*V-N*L)/F,(I*L-E*V)/F)},S.cloneArray=function(E,I){for(var O=[],N=0;N<E.length;++N)O.push(I&&'object'==typeof E[N]&&E[N]instanceof Array?S.cloneArray(E[N]):E[N]);return O},S.convertURLToBlob=function(E){return new Promise(function(O){var N=new XMLHttpRequest;N.open('GET',E,!0),N.responseType='blob',N.onloadend=function(){O(this.response)},N.send()})},S.convertBase64ToBlob=function(E,I){for(var O=atob(E),N=Array(O.length),L=0;L<O.length;++L)N[L]=O.charCodeAt(L);var V=new Uint8Array(N);return new Blob([V],{type:I})},S.loadScript=function(E){return new Promise(function(I,O){var N=document.createElement('script');N.type='text/javascript',N.onload=function(){N.onload=N.onerror=null,I()},N.onerror=function(){N.onload=N.onerror=null,C(N).remove(),O()},N.src=E,document.body.appendChild(N)})},S.getSuffixFromMime=function(E){return'image/jpeg'===E?'.jpg':'image/png'===E?'.png':'image/bmp'===E?'.bmp':'image/gif'===E?'.gif':'image/webp'===E?'.webp':'application/pdf'===E?'.pdf':'image/tiff'===E?'.tif':''};var C=function(E){var I;if('string'!=typeof E)E instanceof HTMLElement||E instanceof HTMLDocument||window==E?I=new T([E]):E instanceof T&&(I=E);else if(E=E.trim(),'<'==E.charAt(0)){var O=document.createElement('div');O.innerHTML=E,I=new T(O.childNodes)}else I=new T,g.all(E,null,I);return I},T=function(E){E=E||[],this.length=0;for(var I=0;I<E.length;++I)this.push(E[I])};if(!window.applicationCache)T.prototype.push=function(E){this[this.length++]=E};else{var P=function(){};P.prototype=Array.prototype,T.prototype=new P}T.prototype.constructor=T,function(E){E.prototype.append=function(O){var N;if(O instanceof E)N=O[0];else if(O instanceof HTMLElement)N=O;else return;this[0].appendChild(N)},E.prototype.remove=function(){for(var O=this[0].parentNode,N=0;N<this.length;++N)O.removeChild(this[N])},E.prototype.clone=function(){for(var O=new E,N=0;N<this.length;++N)O.push(this[N].cloneNode(!0));return O},E.prototype.show=function(){for(var O=0;O<this.length;++O)this[O].style.display=''},E.prototype.hide=function(){for(var O=0;O<this.length;++O)this[O].style.display='none'},E.prototype.find=function(O){for(var N=new E,L=0;L<this.length;++L)g.all(O,this[L],N);return N},E.prototype.children=function(O){return this.find('>'+(O||''))},E.prototype.siblings=function(O){for(var N=this[0].parentNode,L=C(N).children(O),V=this,D=0,F;D<L.length;++D)if(L[D]==V[0]){F=D;break}return L.splice(F,1),L},E.prototype.val=function(O){if(1<=arguments.length)for(var N=0;N<this.length;++N)this[N].value=O;else return this[0].value},E.prototype.attr=function(O,N){if(2<=arguments.length)for(var L=0;L<this.length;++L)this[L].setAttribute(O,N);else return this[0].getAttribute(O)};var I=function(O){for(;;){var N=O.indexOf('-');if(-1!=N)O=O.substring(0,N)+O.charAt(N+1).toUpperCase()+O.substring(N+2);else return O}};E.prototype.css=function(O,N){if(2<=arguments.length)for(var L=0;L<this.length;++L)this[L].style[I(O)]=N;else if('object'==typeof O){var V=O;for(var L in V)this.css(L,V[L])}else return this[0].style[I(O)]},E.prototype.on=function(O,N){O=O.split(' ');for(var L=0;L<O.length;++L)for(var V=0;V<=this.length;++V)g.addEventListener(this[V],O[L],function(F){var D={};D.originalEvent=F,D.preventDefault=()=>{F.preventDefault()},D.stopPropagation=()=>{F.stopPropagation()},N.apply(this,[D])})},E.prototype.change=function(O){if(O)this.on('change',O);else for(var N=0;N<this.length;++N)this[N].change()},E.prototype.click=function(O){if(O)this.on('click',O);else for(var N=0;N<this.length;++N)this[N].click()},E.prototype.borderWidth=function(){var O=window.getComputedStyle(this[0]),N={};return N.left=parseFloat(O.getPropertyValue('border-left-width')),N.top=parseFloat(O.getPropertyValue('border-top-width')),N.right=parseFloat(O.getPropertyValue('border-right-width')),N.bottom=parseFloat(O.getPropertyValue('border-bottom-width')),N},E.prototype.padding=function(){var O=window.getComputedStyle(this[0]),N={};return N.left=parseFloat(O.getPropertyValue('padding-left')),N.top=parseFloat(O.getPropertyValue('padding-top')),N.right=parseFloat(O.getPropertyValue('padding-right')),N.bottom=parseFloat(O.getPropertyValue('padding-bottom')),N},E.prototype.width=function(){var O=this.padding();return this[0].clientWidth-O.left-O.right},E.prototype.height=function(){var O=this.padding();return this[0].clientWidth-O.top-O.bottom},E.prototype.borderBoxRect=function(){var O=window.getComputedStyle(this[0]),N=this[0].getBoundingClientRect(),L={};L.left=N.left+window.scrollX,L.top=N.top+window.scrollY;var V={};return V.pageX0=L.left,V.pageY0=L.top,V.width=parseFloat(O.width),V.height=parseFloat(O.height),V.pageX1=V.pageX0+V.width,V.pageY1=V.pageY0+V.height,V},E.prototype.paddingBoxRect=function(){var O=this.borderBoxRect(),N=this.borderWidth(),L={};return L.pageX0=O.pageX0+N.left,L.pageY0=O.pageY0+N.top,L.width=O.width-(N.left+N.right),L.height=O.height-(N.top+N.bottom),L.pageX1=O.pageX1-N.right,L.pageY1=O.pageY1-N.bottom,L},E.prototype.contentBoxRect=function(){var O=this.paddingBoxRect(),N=this.padding(),L={};return L.pageX0=O.pageX0+N.left,L.pageY0=O.pageY0+N.top,L.width=O.width-(N.left+N.right),L.height=O.height-(N.top+N.bottom),L.pageX1=O.pageX1-N.right,L.pageY1=O.pageY1-N.bottom,L},E.prototype.getTransform=function(){var O=this.css('transform');('none'==O||''==O)&&(O=this[0].style.transform);var N='matrix(',L=O.indexOf(N);if(-1!=L){L+=N.length;for(var V=O.substring(L,O.indexOf(')',L)).split(','),F=0;F<V.length;++F)V[F]=parseFloat(V[F]);return new S.Matrix(V[0],V[1],V[2],V[3],V[4],V[5])}N='scale(';var D=O.indexOf(N);if(-1!=D){D+=N.length;var R=parseFloat(O.substring(D));return new S.Matrix(R,0,0,R,0,0)}return new S.Matrix(1,0,0,1,0,0)},E.prototype.setTransform=function(O){var N=O,L='matrix('+[N.a,N.b,N.c,N.d,N.e,N.f].join(',')+')';this.css('transform',L)}}(T),g.view=g.view||{},g.kUtil=S,g.K=C}(dynamsoft.lib);var TaskQueue=function(){this._queue=[],this.isWorking=!1,this.timeout=100};TaskQueue.prototype.push=function(g,S,C){this._queue.push({task:g,context:S,args:C}),this.isWorking||this.next()},TaskQueue.prototype.unshift=function(g,S,C){this._queue.unshift({task:g,context:S,args:C}),this.isWorking||this.next()},TaskQueue.prototype.next=function(){if(0==this._queue.length)return void(this.isWorking=!1);this.isWorking=!0;var g=this._queue.shift(),S=g.task,C=g.context?g.context:window,T=g.args?g.args:[];setTimeout(function(){S.apply(C,T)},this.timeout)},function(){function S(Z){return!!Z.exifdata}function C(Z,ee){ee=ee||Z.match(/^data\:([^\;]+)\;base64,/mi)[1]||'',Z=Z.replace(/^data\:([^\;]+)\;base64,/gmi,'');for(var te=atob(Z),ne=te.length,ie=new ArrayBuffer(ne),oe=new Uint8Array(ie),ae=0;ae<ne;ae++)oe[ae]=te.charCodeAt(ae);return ie}function T(Z,ee){var te=new XMLHttpRequest;te.open('GET',Z,!0),te.responseType='blob',te.onload=function(){(200==this.status||0===this.status)&&ee(this.response)},te.send()}function P(Z,ee){function te(ae){var re=E(ae),se=I(ae),de=U(ae);Z.exifdata=re||{},Z.iptcdata=se||{},Z.xmpdata=de||{},ee&&ee.call(Z)}if(Z.src){if(/^data\:/i.test(Z.src)){var ne=C(Z.src);te(ne)}else if(/^blob\:/i.test(Z.src)){var ie=new FileReader;ie.onload=function(ae){te(ae.target.result)},T(Z.src,function(ae){ie.readAsArrayBuffer(ae)})}else{var oe=new XMLHttpRequest;oe.onload=function(){if(200==this.status||0===this.status)te(oe.response);else throw'Could not load image';oe=null},oe.open('GET',Z.src,!0),oe.responseType='arraybuffer',oe.send(null)}}else if(self.FileReader&&(Z instanceof self.Blob||Z instanceof self.File)){var ie=new FileReader;ie.onload=function(ae){H,te(ae.target.result)},ie.readAsArrayBuffer(Z)}}function E(Z){var ee=new DataView(Z);if(H,255!=ee.getUint8(0)||216!=ee.getUint8(1))return H,!1;for(var te=2,ne=Z.byteLength,ie;te<ne;){if(255!=ee.getUint8(te))return H,!1;if(ie=ee.getUint8(te+1),H,225==ie)return H,R(ee,te+4,ee.getUint16(te+2)-2);te+=2+ee.getUint16(te+2)}}function I(Z){var ee=new DataView(Z);if(H,255!=ee.getUint8(0)||216!=ee.getUint8(1))return H,!1;for(var te=2,ne=Z.byteLength,ie=function(se,de){return 56===se.getUint8(de)&&66===se.getUint8(de+1)&&73===se.getUint8(de+2)&&77===se.getUint8(de+3)&&4===se.getUint8(de+4)&&4===se.getUint8(de+5)};te<ne;){if(ie(ee,te)){var oe=ee.getUint8(te+7);0!=oe%2&&(oe+=1),0===oe&&(oe=4);var ae=te+8+oe,re=ee.getUint16(te+6+oe);return O(Z,ae,re)}te++}}function O(Z,ee,te){for(var ne=new DataView(Z),ie={},le=ee,oe,ae,re,se,de;le<ee+te;)28===ne.getUint8(le)&&2===ne.getUint8(le+1)&&(se=ne.getUint8(le+2),se in J&&(re=ne.getInt16(le+3),de=re+5,ae=J[se],oe=D(ne,le+5,re),ie.hasOwnProperty(ae)?ie[ae]instanceof Array?ie[ae].push(oe):ie[ae]=[ie[ae],oe]:ie[ae]=oe)),le++;return ie}function N(Z,ee,te,ne,ie){var oe=Z.getUint16(te,!ie),ae={},re,se,de;for(de=0;de<oe;de++)re=te+12*de+2,se=ne[Z.getUint16(re,!ie)],se||H,ae[se]=L(Z,re,ee,te,ie);return ae}function L(Z,ee,te,ne,ie){var oe=Z.getUint16(ee+2,!ie),ae=Z.getUint32(ee+4,!ie),re=Z.getUint32(ee+8,!ie)+te,se,de,le,pe,ce,ue;switch(oe){case 1:case 7:if(1==ae)return Z.getUint8(ee+8,!ie);for(se=4<ae?re:ee+8,de=[],pe=0;pe<ae;pe++)de[pe]=Z.getUint8(se+pe);return de;case 2:return se=4<ae?re:ee+8,D(Z,se,ae-1);case 3:if(1==ae)return Z.getUint16(ee+8,!ie);for(se=2<ae?re:ee+8,de=[],pe=0;pe<ae;pe++)de[pe]=Z.getUint16(se+2*pe,!ie);return de;case 4:if(1==ae)return Z.getUint32(ee+8,!ie);for(de=[],pe=0;pe<ae;pe++)de[pe]=Z.getUint32(re+4*pe,!ie);return de;case 5:if(1==ae)return ce=Z.getUint32(re,!ie),ue=Z.getUint32(re+4,!ie),le=new Number(ce/ue),le.numerator=ce,le.denominator=ue,le;for(de=[],pe=0;pe<ae;pe++)ce=Z.getUint32(re+8*pe,!ie),ue=Z.getUint32(re+4+8*pe,!ie),de[pe]=new Number(ce/ue),de[pe].numerator=ce,de[pe].denominator=ue;return de;case 9:if(1==ae)return Z.getInt32(ee+8,!ie);for(de=[],pe=0;pe<ae;pe++)de[pe]=Z.getInt32(re+4*pe,!ie);return de;case 10:if(1==ae)return Z.getInt32(re,!ie)/Z.getInt32(re+4,!ie);for(de=[],pe=0;pe<ae;pe++)de[pe]=Z.getInt32(re+8*pe,!ie)/Z.getInt32(re+4+8*pe,!ie);return de;}}function V(Z,ee,te){var ne=Z.getUint16(ee,!te);return Z.getUint32(ee+2+12*ne,!te)}function F(Z,ee,te,ne){var ie=V(Z,ee+te,ne);if(!ie)return{};if(ie>Z.byteLength)return{};var oe=N(Z,ee,ee+ie,$,ne);if(oe.Compression)switch(oe.Compression){case 6:if(oe.JpegIFOffset&&oe.JpegIFByteCount){var ae=ee+oe.JpegIFOffset,re=oe.JpegIFByteCount;oe.blob=new Blob([new Uint8Array(Z.buffer,ae,re)],{type:'image/jpeg'})}break;case 1:console.log('Thumbnail image format is TIFF, which is not implemented.');break;default:console.log('Unknown thumbnail image format \'%s\'',oe.Compression);}else 2==oe.PhotometricInterpretation&&console.log('Thumbnail image format is RGB, which is not implemented.');return oe}function D(Z,ee,te){for(var ne='',ie=ee;ie<ee+te;ie++)ne+=String.fromCharCode(Z.getUint8(ie));return ne}function R(Z,ee){if('Exif'!=D(Z,ee,4))return H,!1;var re=ee+6,te,ne,ie,oe,ae;if(18761==Z.getUint16(re))te=!1;else if(19789==Z.getUint16(re))te=!0;else return H,!1;if(42!=Z.getUint16(re+2,!te))return H,!1;var se=Z.getUint32(re+4,!te);if(8>se)return H,!1;if(ne=N(Z,re,re+se,X,te),ne.ExifIFDPointer)for(ie in oe=N(Z,re,re+ne.ExifIFDPointer,G,te),oe)'LightSource'===ie||'Flash'===ie||'MeteringMode'===ie||'ExposureProgram'===ie||'SensingMethod'===ie||'SceneCaptureType'===ie||'SceneType'===ie||'CustomRendered'===ie||'WhiteBalance'===ie||'GainControl'===ie||'Contrast'===ie||'Saturation'===ie||'Sharpness'===ie||'SubjectDistanceRange'===ie||'FileSource'===ie?oe[ie]=Q[ie][oe[ie]]:'ExifVersion'===ie||'FlashpixVersion'===ie?oe[ie]=String.fromCharCode(oe[ie][0],oe[ie][1],oe[ie][2],oe[ie][3]):'ComponentsConfiguration'===ie?oe[ie]=Q.Components[oe[ie][0]]+Q.Components[oe[ie][1]]+Q.Components[oe[ie][2]]+Q.Components[oe[ie][3]]:void 0,ne[ie]=oe[ie];if(ne.GPSInfoIFDPointer)for(ie in ae=N(Z,re,re+ne.GPSInfoIFDPointer,Y,te),ae)'GPSVersionID'===ie?ae[ie]=ae[ie][0]+'.'+ae[ie][1]+'.'+ae[ie][2]+'.'+ae[ie][3]:void 0,ne[ie]=ae[ie];return ne.thumbnail=F(Z,re,se,te),ne}function U(Z){if('DOMParser'in self){var ee=new DataView(Z);if(H,255!=ee.getUint8(0)||216!=ee.getUint8(1))return H,!1;for(var te=2,ne=Z.byteLength,ie=new DOMParser;te<ne-4;){if('http'==D(ee,te,4)){var oe=te-1,ae=ee.getUint16(te-2)-1,re=D(ee,oe,ae),se=re.indexOf('xmpmeta>')+8;re=re.substring(re.indexOf('<x:xmpmeta'),se);var de=re.indexOf('x:xmpmeta')+10;re=re.slice(0,de)+'xmlns:Iptc4xmpCore="http://iptc.org/std/Iptc4xmpCore/1.0/xmlns/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:tiff="http://ns.adobe.com/tiff/1.0/" xmlns:plus="http://schemas.android.com/apk/lib/com.google.android.gms.plus" xmlns:ext="http://www.gettyimages.com/xsltExtension/1.0" xmlns:exif="http://ns.adobe.com/exif/1.0/" xmlns:stEvt="http://ns.adobe.com/xap/1.0/sType/ResourceEvent#" xmlns:stRef="http://ns.adobe.com/xap/1.0/sType/ResourceRef#" xmlns:crs="http://ns.adobe.com/camera-raw-settings/1.0/" xmlns:xapGImg="http://ns.adobe.com/xap/1.0/g/img/" xmlns:Iptc4xmpExt="http://iptc.org/std/Iptc4xmpExt/2008-02-29/" '+re.slice(de);var le=ie.parseFromString(re,'text/xml');return W(le)}te++}}}function W(Z){try{var ee={};if(0<Z.children.length)for(var te=0;te<Z.children.length;te++){var ne=Z.children.item(te),ie=ne.attributes;for(var oe in ie){var ae=ie[oe],re=ae.nodeName,se=ae.nodeValue;void 0!==re&&(ee[re]=se)}var de=ne.nodeName;if('undefined'==typeof ee[de])ee[de]=xml2json(ne);else{if('undefined'==typeof ee[de].push){var le=ee[de];ee[de]=[],ee[de].push(le)}ee[de].push(xml2json(ne))}}else ee=Z.textContent;return ee}catch(pe){console.log(pe.message)}}var H=!1,z=this,q=function(Z){return Z instanceof q?Z:this instanceof q?void(this.EXIFwrapped=Z):new q(Z)};'undefined'==typeof exports?z.EXIF=q:('undefined'!=typeof module&&module.exports&&(exports=module.exports=q),exports.EXIF=q);var G=q.Tags={33434:'ExposureTime',33437:'FNumber',34850:'ExposureProgram',34852:'SpectralSensitivity',34855:'ISOSpeedRatings',34856:'OECF',36864:'ExifVersion',36867:'DateTimeOriginal',36868:'DateTimeDigitized',37121:'ComponentsConfiguration',37122:'CompressedBitsPerPixel',37377:'ShutterSpeedValue',37378:'ApertureValue',37379:'BrightnessValue',37380:'ExposureBias',37381:'MaxApertureValue',37382:'SubjectDistance',37383:'MeteringMode',37384:'LightSource',37385:'Flash',37386:'FocalLength',37396:'SubjectArea',37500:'MakerNote',37510:'UserComment',37520:'SubsecTime',37521:'SubsecTimeOriginal',37522:'SubsecTimeDigitized',40960:'FlashpixVersion',40961:'ColorSpace',40962:'PixelXDimension',40963:'PixelYDimension',40964:'RelatedSoundFile',40965:'InteroperabilityIFDPointer',41483:'FlashEnergy',41484:'SpatialFrequencyResponse',41486:'FocalPlaneXResolution',41487:'FocalPlaneYResolution',41488:'FocalPlaneResolutionUnit',41492:'SubjectLocation',41493:'ExposureIndex',41495:'SensingMethod',41728:'FileSource',41729:'SceneType',41730:'CFAPattern',41985:'CustomRendered',41986:'ExposureMode',41987:'WhiteBalance',41988:'DigitalZoomRation',41989:'FocalLengthIn35mmFilm',41990:'SceneCaptureType',41991:'GainControl',41992:'Contrast',41993:'Saturation',41994:'Sharpness',41995:'DeviceSettingDescription',41996:'SubjectDistanceRange',42016:'ImageUniqueID'},X=q.TiffTags={256:'ImageWidth',257:'ImageHeight',258:'BitsPerSample',259:'Compression',262:'PhotometricInterpretation',270:'ImageDescription',271:'Make',272:'Model',273:'StripOffsets',274:'Orientation',277:'SamplesPerPixel',278:'RowsPerStrip',279:'StripByteCounts',282:'XResolution',283:'YResolution',284:'PlanarConfiguration',296:'ResolutionUnit',301:'TransferFunction',305:'Software',306:'DateTime',315:'Artist',318:'WhitePoint',319:'PrimaryChromaticities',513:'JPEGInterchangeFormat',514:'JPEGInterchangeFormatLength',529:'YCbCrCoefficients',530:'YCbCrSubSampling',531:'YCbCrPositioning',532:'ReferenceBlackWhite',33432:'Copyright',34665:'ExifIFDPointer',34853:'GPSInfoIFDPointer',40965:'InteroperabilityIFDPointer'},Y=q.GPSTags={0:'GPSVersionID',1:'GPSLatitudeRef',2:'GPSLatitude',3:'GPSLongitudeRef',4:'GPSLongitude',5:'GPSAltitudeRef',6:'GPSAltitude',7:'GPSTimeStamp',8:'GPSSatellites',9:'GPSStatus',10:'GPSMeasureMode',11:'GPSDOP',12:'GPSSpeedRef',13:'GPSSpeed',14:'GPSTrackRef',15:'GPSTrack',16:'GPSImgDirectionRef',17:'GPSImgDirection',18:'GPSMapDatum',19:'GPSDestLatitudeRef',20:'GPSDestLatitude',21:'GPSDestLongitudeRef',22:'GPSDestLongitude',23:'GPSDestBearingRef',24:'GPSDestBearing',25:'GPSDestDistanceRef',26:'GPSDestDistance',27:'GPSProcessingMethod',28:'GPSAreaInformation',29:'GPSDateStamp',30:'GPSDifferential'},$=q.IFD1Tags={256:'ImageWidth',257:'ImageHeight',258:'BitsPerSample',259:'Compression',262:'PhotometricInterpretation',273:'StripOffsets',274:'Orientation',277:'SamplesPerPixel',278:'RowsPerStrip',279:'StripByteCounts',282:'XResolution',283:'YResolution',284:'PlanarConfiguration',296:'ResolutionUnit',513:'JpegIFOffset',514:'JpegIFByteCount',529:'YCbCrCoefficients',530:'YCbCrSubSampling',531:'YCbCrPositioning',532:'ReferenceBlackWhite'},Q=q.StringValues={ExposureProgram:{0:'Not defined',1:'Manual',2:'Normal program',3:'Aperture priority',4:'Shutter priority',5:'Creative program',6:'Action program',7:'Portrait mode',8:'Landscape mode'},MeteringMode:{0:'Unknown',1:'Average',2:'CenterWeightedAverage',3:'Spot',4:'MultiSpot',5:'Pattern',6:'Partial',255:'Other'},LightSource:{0:'Unknown',1:'Daylight',2:'Fluorescent',3:'Tungsten (incandescent light)',4:'Flash',9:'Fine weather',10:'Cloudy weather',11:'Shade',12:'Daylight fluorescent (D 5700 - 7100K)',13:'Day white fluorescent (N 4600 - 5400K)',14:'Cool white fluorescent (W 3900 - 4500K)',15:'White fluorescent (WW 3200 - 3700K)',17:'Standard light A',18:'Standard light B',19:'Standard light C',20:'D55',21:'D65',22:'D75',23:'D50',24:'ISO studio tungsten',255:'Other'},Flash:{0:'Flash did not fire',1:'Flash fired',5:'Strobe return light not detected',7:'Strobe return light detected',9:'Flash fired, compulsory flash mode',13:'Flash fired, compulsory flash mode, return light not detected',15:'Flash fired, compulsory flash mode, return light detected',16:'Flash did not fire, compulsory flash mode',24:'Flash did not fire, auto mode',25:'Flash fired, auto mode',29:'Flash fired, auto mode, return light not detected',31:'Flash fired, auto mode, return light detected',32:'No flash function',65:'Flash fired, red-eye reduction mode',69:'Flash fired, red-eye reduction mode, return light not detected',71:'Flash fired, red-eye reduction mode, return light detected',73:'Flash fired, compulsory flash mode, red-eye reduction mode',77:'Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected',79:'Flash fired, compulsory flash mode, red-eye reduction mode, return light detected',89:'Flash fired, auto mode, red-eye reduction mode',93:'Flash fired, auto mode, return light not detected, red-eye reduction mode',95:'Flash fired, auto mode, return light detected, red-eye reduction mode'},SensingMethod:{1:'Not defined',2:'One-chip color area sensor',3:'Two-chip color area sensor',4:'Three-chip color area sensor',5:'Color sequential area sensor',7:'Trilinear sensor',8:'Color sequential linear sensor'},SceneCaptureType:{0:'Standard',1:'Landscape',2:'Portrait',3:'Night scene'},SceneType:{1:'Directly photographed'},CustomRendered:{0:'Normal process',1:'Custom process'},WhiteBalance:{0:'Auto white balance',1:'Manual white balance'},GainControl:{0:'None',1:'Low gain up',2:'High gain up',3:'Low gain down',4:'High gain down'},Contrast:{0:'Normal',1:'Soft',2:'Hard'},Saturation:{0:'Normal',1:'Low saturation',2:'High saturation'},Sharpness:{0:'Normal',1:'Soft',2:'Hard'},SubjectDistanceRange:{0:'Unknown',1:'Macro',2:'Close view',3:'Distant view'},FileSource:{3:'DSC'},Components:{0:'',1:'Y',2:'Cb',3:'Cr',4:'R',5:'G',6:'B'}},J={15:'category',25:'keywords',55:'dateCreated',80:'byline',85:'bylineTitle',105:'headline',110:'credit',116:'copyright',120:'caption',122:'captionWriter'};q.getData=function(Z,ee){return(self.Image&&Z instanceof self.Image||self.HTMLImageElement&&Z instanceof self.HTMLImageElement)&&!Z.complete?!1:(S(Z)?ee&&ee.call(Z):P(Z,ee),!0)},q.getTag=function(Z,ee){return S(Z)?Z.exifdata[ee]:void 0},q.getIptcTag=function(Z,ee){return S(Z)?Z.iptcdata[ee]:void 0},q.getAllTags=function(Z){if(!S(Z))return{};var te=Z.exifdata,ne={},ee;for(ee in te)te.hasOwnProperty(ee)&&(ne[ee]=te[ee]);return ne},q.getAllIptcTags=function(Z){if(!S(Z))return{};var te=Z.iptcdata,ne={},ee;for(ee in te)te.hasOwnProperty(ee)&&(ne[ee]=te[ee]);return ne},q.pretty=function(Z){if(!S(Z))return'';var te=Z.exifdata,ne='',ee;for(ee in te)te.hasOwnProperty(ee)&&(ne+='object'==typeof te[ee]?te[ee]instanceof Number?ee+' : '+te[ee]+' ['+te[ee].numerator+'/'+te[ee].denominator+']\r\n':ee+' : ['+te[ee].length+' values]\r\n':ee+' : '+te[ee]+'\r\n');return ne},q.readFromBinaryFile=function(Z){return E(Z)},'function'==typeof define&&define.amd&&define('exif-js',[],function(){return q})}.call(this),function(g){var C=g.lib,T=g.MbcEnumError,P=C.errorInfo,E=C.kUtil,I=C.K,O=function(N,L){var V=this;V.initSetting=N||{},V.viewObj=L;const F='asset';C.isString(N.strAssetsPath)?(N.strAssetsPath=N.strAssetsPath.trim(),!N.strAssetsPath&&(N.strAssetsPath=F),N.strAssetsPath.endsWith('/')&&(N.strAssetsPath=N.strAssetsPath.slice(0,-1))):N.strAssetsPath=F,O.cvFolder=N.strAssetsPath;var D=V._isSafari=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),R=!!D&&(/iPhone/i.test(navigator.platform)||/iPod/i.test(navigator.platform)||/iPad/i.test(navigator.userAgent))&&!!navigator.appVersion.match(/(?:Version\/)([\w\._]+)/),U=1e5,W=function(Se,xe,Ce){return new Promise(function(Te){if(Se.toBlob)Se.toBlob(function(Ie){Te(Ie)},xe,Ce);else{var Pe=Se.toDataURL(xe,Ce),Ee=E.convertBase64ToBlob(Pe.substring(Pe.indexOf(',')+1),xe);Te(Ee)}})},H=function(Se,xe){xe=xe||new E.Matrix(1,0,0,1,0,0);var Ce=document.createElement('canvas');0!=xe.a*xe.d&&0==xe.b*xe.c?(Ce.width=Se.naturalWidth||Se.width,Ce.height=Se.naturalHeight||Se.height):(Ce.width=Se.naturalHeight||Se.height,Ce.height=Se.naturalWidth||Se.width);var Te=Ce.getContext('2d');return Te.setTransform(xe.a,xe.b,xe.c,xe.d,xe.e*Ce.width,xe.f*Ce.height),Te.drawImage(Se,0,0),Ce},z=function(Se,xe){return new Promise(function(Ce,Te){if(window.createImageBitmap)createImageBitmap(Se).then(function(Ie){Ce(H(Ie,xe))}).catch(Ie=>{setTimeout(function(){throw Ie},0),Te(Ie)});else{var Pe=URL.createObjectURL(Se),Ee=new Image;Ee.onload=function(){Ee.onload=Ee.onerror=null;var Ie=H(Ee,xe);URL.revokeObjectURL(Pe),Ce(Ie)},Ee.onerror=function(){Ee.onload=Ee.onerror=null,URL.revokeObjectURL(Pe);const ke=Error(`Failed to convert blob to canvas.`);Te(ke)},Ee.src=Pe}})},q=O._doCallbackNoBreak,G=I(['<div class="dynamsoft-mobile-view">','<div class="dynamsoft-mobile-subsidiary-toolbar dynamsoft-display-as-none"></div>','<div class="dynamsoft-mobile-thumbnail-viewer dynamsoft-display-as-none"></div>','<div class="dynamsoft-mobile-toolbar dynamsoft-display-as-none"></div>','</div>'].join(''))[0];const X=I(G).find('.dynamsoft-mobile-toolbar'),Y=I(G).find('.dynamsoft-mobile-subsidiary-toolbar'),$=I(['<div class="kPainterImgsDiv">','<canvas class="kPainterCanvas" style="display:none;left:0;top:0;"></canvas>','</div','><div class="kPainterCroper" style="width:50px;height:50px;display:none;">','<div class="kPainterCells">','<div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>','</div','><div class="kPainterBigMover" data-orient="0,0" style="display:none"></div','><div class="kPainterEdges">','<div data-orient="-1,0"></div','><div data-orient="0,-1"></div','><div data-orient="1,0"></div','><div data-orient="0,1"></div>','</div','><div class="kPainterCorners">','<div data-orient="-1,-1"><i></i></div','><div data-orient="1,-1"><i></i></div','><div data-orient="1,1"><i></i></div','><div data-orient="-1,1"><i></i></div>','</div','><div class="kPainterMover" data-orient="0,0">','<div></div>','<svg width="20" height="20" viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1792 896q0 26-19 45l-256 256q-19 19-45 19t-45-19-19-45v-128h-384v384h128q26 0 45 19t19 45-19 45l-256 256q-19 19-45 19t-45-19l-256-256q-19-19-19-45t19-45 45-19h128v-384h-384v128q0 26-19 45t-45 19-45-19l-256-256q-19-19-19-45t19-45l256-256q19-19 45-19t45 19 19 45v128h384v-384h-128q-26 0-45-19t-19-45 19-45l256-256q19-19 45-19t45 19l256 256q19 19 19 45t-19 45-45 19h-128v384h384v-128q0-26 19-45t45-19 45 19l256 256q19 19 19 45z" fill="#fff"/></svg>','</div>','</div','><div class="kPainterPerspect" style="display:none;">','<canvas class="kPainterPerspectCvs"></canvas','><div class="kPainterPerspectCorner" data-index="0">lt</div','><div class="kPainterPerspectCorner" data-index="1">rt</div','><div class="kPainterPerspectCorner" data-index="2">rb</div','><div class="kPainterPerspectCorner" data-index="3">lb</div>','</div','><div class="kPainterGesturePanel"></div>',`<img onload="__positionIllustrationImg(true);" class="dynamsoft-illustration dynamsoft-display-as-none" src="${N.strAssetsPath}/images/illustration.png">`,'<div class="kPainterVideoMdl dynamsoft-display-as-none">','</div>'].join(''));var Q=I('<div class="kPainterBox"></div>'),J;let Z=N.imageViewer.funcImageViewerWrapper&&N.imageViewer.funcImageViewerWrapper();Z&&Z instanceof HTMLDivElement?(Z.appendChild(Q[0]),J=I(Z)):J=Q,X[0].parentNode.insertBefore(J[0],X[0]),$.forEach(Se=>{Q[0].appendChild(Se)});const ee=3;let te=N.imageViewer.iPadding;C.isNumber(te)&&te===te?(te=0>te?ee:te,te=49<te?49:te):te=ee,Q[0].style.padding=`${te}%`;const ne=Q.find('.dynamsoft-illustration');ne.on('touchend click',function(){V.showFileChooseWindow()});var ie=Q.find('> .kPainterImgsDiv > .kPainterCanvas')[0];V.getHtmlElement=function(){return G};var oe=-1,ae=[],re=null,se=null,de=!1;V.getCurIndex=function(){return oe},V.getCount=function(){return ae.length},V.isEditing=function(){return de},V.getImage=function(Se,xe){if(void 0==xe&&(xe=oe),!isNaN(xe))return xe=Math.round(xe),0>xe||xe>=ae.length?void 0:Se?ae[xe]:I(ae[xe]).clone()[0]},V.onStartLoading=null,V.onFinishLoading=null,V.setOnStartLoading=function(Se){V.onStartLoading=Se},V.setOnFinishLoading=function(Se){V.onFinishLoading=Se};var le=function(){q(V.onStartLoading)},pe=function(){q(V.onFinishLoading)},ce=V.blobReferenceDictionary={},ue=new function(){var Se=this,xe=I('<input type="file" accept="image/bmp,image/gif,image/jpeg,image/png,image/webp" multiple style="display:none">');I(xe).change(function(){V.showToolbarLoader(!0);const je=this.files;(function(){let ze=je.length;for(var qe=0;qe<je.length;++qe)(function(Ge){Te(Ge).then(()=>{0==--ze&&V.showToolbarLoader(!1)}).catch(Xe=>{V.showErrorPopup(!0,Xe.message),0==--ze&&V.showToolbarLoader(!1)})})(je[qe])})(),I(this).val('')}),V.setHiddenFileIpt=function(je){return!!(je instanceof je)&&(xe=je,!0)},V.showFileChooseWindow=function(){return de?null:(xe.click(),xe)};var Ce=new TaskQueue,Te=V.addImageAsync=function(je){return new Promise(function(ze,qe){if(de){var Ge=Error(P.getOperationNotSupportedString('browsing'));return Ge.name=T.OperationNotSupported.toString(),void qe(Ge)}if(!je){var Ge=Error(P.getValueNotValidString('imgData'));return Ge.name=T.ValueNotValid.toString(),void qe(Ge)}if(je instanceof Blob);else if(je instanceof HTMLCanvasElement);else if('string'==typeof je||je instanceof String);else if(je instanceof HTMLImageElement);else{var Ge=Error(P.getValueNotValidString('imgData'));return Ge.name=T.ValueNotValid.toString(),void qe(Ge)}le(),Ce.push(function(){ke(je).then(Xe=>{pe(),ze(Xe),Ce.next(),X.find('.icn-edit, .icn-download').forEach(Ye=>{Ye.classList.remove('dynamsoft-display-as-none')}),X.find('.video-tool-kit')[0].classList.contains('dynamsoft-display-as-none')&&(V.funcShowToolKit('.entry-tool-kit'),V.funcShowSubsidiaryToolKit('.view-mode-tool-kit'),!X[0].classList.contains('dynamsoft-display-as-none')&&Y[0].classList.contains('dynamsoft-display-as-none')&&(Y[0].classList.remove('dynamsoft-display-as-none'),V.refresh()))}).catch(Xe=>{pe(),qe(Xe),Ce.next()})},null,null)})},Pe=function(je){return new Promise(function(ze){return'image/gif'==je.type?ze(new E.Matrix(1,0,0,1,0,0)):'image/jpeg'==je.type?void EXIF.getData(je,function(){var qe=EXIF.getTag(this,'Orientation'),Ge=null;switch(qe){case 6:Ge=new E.Matrix(0,1,-1,0,1,0);break;case 3:Ge=new E.Matrix(-1,0,0,-1,1,1);break;case 8:Ge=new E.Matrix(0,-1,1,0,0,1);break;default:}ze(Ge)}):ze(null)})},Ee=function(je,ze){var qe=je.slice(25,26),Ge=new FileReader;Ge.onload=function(){var Xe=new Int8Array(Ge.result),Ye=Xe[0];ze(4==(4&Ye))},Ge.readAsArrayBuffer(qe)},Ie=function(je){return new Promise(function(ze){var qe=je.type;-1==qe.indexOf('webp')?-1==qe.indexOf('svg')?-1==qe.indexOf('png')?ze('image/jpeg'):Ee(je,function(Ge){ze(Ge?'image/png':'image/jpeg')}):ze('image/png'):ze('image/webp')})},ke=function(je){return new Promise((ze,qe)=>{_e(je).then(([Ge,Xe])=>{return Ne(Ge,Xe)}).then(Ge=>{ze(Ge)}).catch(Ge=>qe(Ge))})},_e=Se.getBlobAndFormatFromAnyImgData=function(je){return new Promise(function(ze,qe){var Ge=function(Je){var Ze;Ie(Je).then(et=>{return Ze=et,Pe(Je)}).then(et=>{return Oe(Je,et,Ze)}).then(et=>{ze([et,Ze])}).catch(et=>{qe(et)})};if(je instanceof Blob)Ge(je);else if(je instanceof HTMLCanvasElement)W(je).then(Je=>{Ge(Je)}).catch(Je=>qe(Je));else if('string'==typeof je||je instanceof String){var Xe=je;if('data:'==Xe.substring(0,5)){var Ye='';'image/'==Xe.substring(5,11)&&(Ye=Xe.substring(5,Xe.indexOf(';',11)));var Ke=E.convertBase64ToBlob(Xe.substring(Xe.indexOf('base64,')+7),Ye);Ge(Ke)}else E.convertURLToBlob(Xe).then(Je=>{if(Je)Ge(Je);else{var Ze=Error('Url not available.');Ze.name=T.ImgTypeNotSupport.toString(),qe(Ze)}})}else if(je instanceof HTMLImageElement){var $e;try{var $e=je.src}catch(Je){return setTimeout(function(){throw Je},0),void qe(Je)}_e($e).then(([Je,Ze])=>{ze(Je,Ze)}).catch(()=>{var Je=document.createElement('canvas');Je.width=je.naturalWidth,Je.height=je.naturalHeight;var Ze=Je.getContext('2d');Ze.drawImage(je,0,0);var et='',tt=$e.lastIndexOf('?'),nt=-1;-1==tt?(nt=$e.lastIndexOf('.'),-1!=nt&&(5>=$e.length-nt?et=$e.substring(nt+1):et=$e.substring(nt+1,nt+5))):(nt=$e.lastIndexOf('.',tt),-1!=nt&&5>=tt-nt&&(et=$e.substring(nt+1,tt)));var it;it=-1==et.indexOf('webp')?-1!=et.indexOf('png')||-1!=et.indexOf('gif')||-1!=et.indexOf('svg')?'image/png':'image/jpeg':'image/webp',W(Je,it).then(ot=>{Ge(ot)})})}else{var Qe=Error(P.getImgTypeNotSupportString());Qe.name=T.ImgTypeNotSupport.toString(),qe(Qe)}})},Oe=function(je,ze,qe){return new Promise(function(Ge,Xe){ze?z(je,ze).then(Ye=>{return W(Ye,qe)}).then(Ye=>{Ge(Ye)}).catch(Ye=>{Xe(Ye)}):Ge(je)})};V.isShowNewImgWhenAdd=!0;var Ne=function(je,ze){return new Promise(function(qe,Ge){var Xe=new Image;Xe.kPainterSaveFormat=ze;var Ye=URL.createObjectURL(je);Xe.onload=function(){Xe.onload=Xe.onerror=null,V._noAnyUseButForIosSafariBug0=Xe.naturalWidth,V._noAnyUseButForIosSafariBug1=Xe.naturalHeight,Xe.kPainterWidth=Xe.naturalWidth,Xe.kPainterHeight=Xe.naturalHeight,Xe.kPainterOriWidth=Xe.kPainterWidth,Xe.kPainterOriHeight=Xe.kPainterHeight,D&&(Xe.kPainterBlob=je),Xe.kPainterOriBlobId=Xe.kPainterBlobId=Math.random()+E.getSuffixFromMime(je.type),ce[Xe.kPainterBlobId]={count:2,width:Xe.kPainterWidth,height:Xe.kPainterHeight,size:je.size,time:new Date().getTime()},we.addEntityAsync({id:Xe.kPainterBlobId,data:je}).then(()=>{return Le(Xe,je)}).then(()=>{Q.find('.kPainterImgsDiv').append(Xe),ae.push(Xe),(V.isShowNewImgWhenAdd||-1==oe)&&We(ae.length-1),V.addThumbnailBase64(ae.length-1,Xe),qe(je)})},Xe.onerror=function(){Xe.onload=Xe.onerror=null,URL.revokeObjectURL(Xe.src),Ge(Error('Fail to load image.'))},Xe.src=Ye,I(Xe).hide()})},Le=Se.__setSnapshotAndPreUpload=function(je,ze){return new Promise(qe=>{var Ge=je.kPainterOriBlobId;Ve(je,ze,function(Xe,Ye){qe(),V.__preUploadPage&&(V.__isPreUploadOri?Ae(Ge,ze):Ae(Xe,Ye))})})},Ve=function(je,ze,qe){var Ge=Math.sqrt(345600/(je.kPainterWidth*je.kPainterHeight)),Xe='image/jpeg';if(1<=Ge&&Xe==ze.type)je.kPainterOriSnapshotBlobId=je.kPainterOriBlobId,++V.blobReferenceDictionary[je.kPainterOriBlobId].count,qe(je.kPainterOriBlobId,ze);else{var Ye=document.createElement('canvas');Ye.width=1>Ge?Math.floor(je.kPainterWidth*Ge)||1:je.kPainterWidth,4096<Ye.width&&(Ye.width=4096),Ye.height=1>Ge?Math.floor(je.kPainterHeight*Ge)||1:je.kPainterHeight,4096<Ye.height&&(Ye.height=4096);var Ke=Ye.getContext('2d');Ke.drawImage(je,0,0,Ye.width,Ye.height);var $e=function(Je){je.kPainterOriSnapshotBlobId=Math.random()+E.getSuffixFromMime(Je.type),V.blobReferenceDictionary[je.kPainterOriSnapshotBlobId]={count:1,width:Ye.width,height:Ye.height,size:Je.size,time:new Date().getTime()},V.imageDataRepo.addEntityAsync({id:je.kPainterOriSnapshotBlobId,data:Je}).then(()=>{qe(je.kPainterOriSnapshotBlobId,Je)})};if(Ye.toBlob)Ye.toBlob(function(Je){$e(Je)},Xe);else{var Qe=Ye.toDataURL(Xe);$e(E.convertBase64ToBlob(Qe.substring(Qe.indexOf(',')+1),Xe))}}},Ae=function(je,ze){if(V.__preUploadPage){var qe=new Promise(Ge=>Ge());V.__clientId||(qe=qe.then(()=>{var Ge=new FormData;return Ge.append('MbcMethod','getClientId'),fetch(V.__preUploadPage,{method:'POST',body:Ge})}).then(Ge=>Ge.json()).then(Ge=>{if(!Ge.MbcSuccess)throw Error();return V.__clientId=V.__clientId||Ge.MbcClientId,new Promise(Xe=>Xe())})),qe.then(()=>{var Ge=new FormData;return Ge.append('MbcClientId',V.__clientId),Ge.append('MbcMethod','upload'),Ge.append('MbcBlobId',je),Ge.append('MbcBlob',ze),fetch(V.__preUploadPage,{method:'POST',body:Ge})})}},Me=function(){var je=ae[oe],ze=Q,qe=ze.paddingBoxRect(),Ge=ze.contentBoxRect(),Xe=je.kPainterZoom=Math.min(Ge.width/je.kPainterWidth,Ge.height/je.kPainterHeight);if(je.style.width=(Math.round(je.kPainterWidth*Xe)||1)+'px',je.style.height=(Math.round(je.kPainterHeight*Xe)||1)+'px',je.style.left=je.style.right=je.style.top=je.style.bottom=-U+'px',2<=ae.length){var Ye=ae[(ae.length+oe-1)%ae.length];Xe=Math.min(Ge.width/Ye.kPainterWidth,Ge.height/Ye.kPainterHeight),Ye.style.width=(Math.round(Ye.kPainterWidth*Xe)||1)+'px',Ye.style.height=(Math.round(Ye.kPainterHeight*Xe)||1)+'px',Ye.style.right=U+'px',Ye.style.left=Ye.style.top=Ye.style.bottom=-U+'px'}if(3<=ae.length){var Ke=ae[(ae.length+oe+1)%ae.length];Xe=Math.min(Ge.width/Ke.kPainterWidth,Ge.height/Ke.kPainterHeight),Ke.style.width=(Math.round(Ke.kPainterWidth*Xe)||1)+'px',Ke.style.height=(Math.round(Ke.kPainterHeight*Xe)||1)+'px',Ke.style.left=U+'px',Ke.style.right=Ke.style.top=Ye.style.bottom=-U+'px'}},Fe=null,Re;V.updateUIOnResize=function(je){null!=Fe&&(clearTimeout(Fe),Fe=null),je?(Re=de,Fe=setTimeout(function(){-1!=oe&&Re==de&&(de?(he.setImgStyleFit(),fe.isFreeTransformMode&&fe.setCornerPos([[-0.5,-0.5],[0.5,-0.5],[0.5,0.5],[-0.5,0.5]])):Me()),Fe=null},500)):-1!=oe&&(de?(he.setImgStyleFit(),fe.isFreeTransformMode&&fe.setCornerPos([[-0.5,-0.5],[0.5,-0.5],[0.5,0.5],[-0.5,0.5]])):Me())};var Ue=[],We=Se.showImg=function(je){var ze=Ue;Ue=[];var qe=ae[je];I(qe).siblings().hide(),oe=je,qe.src||we.getEntityAsync(qe.kPainterBlobId).then($e=>{oe==je&&(D&&(qe.kPainterBlob=$e),qe.src=URL.createObjectURL($e))}),I(qe).show(),Ue.push(qe);var Ge,Xe;if(2<=ae.length&&(0<je||V.allowedTouchMoveSwitchImgOverBoundary)){var Ge=ae[(ae.length+je-1)%ae.length];Ge.src||we.getEntityAsync(Ge.kPainterBlobId).then($e=>{oe==je&&(D&&(Ge.kPainterBlob=$e),Ge.src=URL.createObjectURL($e))}),I(Ge).show(),Ue.push(Ge)}if(3<=ae.length&&(je<ae.length-1||V.allowedTouchMoveSwitchImgOverBoundary)){var Xe=ae[(ae.length+je+1)%ae.length];Xe.src||we.getEntityAsync(Xe.kPainterBlobId).then($e=>{oe==je&&(D&&(Xe.kPainterBlob=$e),Xe.src=URL.createObjectURL($e))}),I(Xe).show(),Ue.push(Xe)}for(var Ye=0,Ke;Ye<ze.length;++Ye)Ke=ze[Ye],Ke!=qe&&Ke!=Ge&&Ke!=Xe&&Ke.src&&(D&&delete Ke.kPainterBlob,URL.revokeObjectURL(Ke.src),Ke.removeAttribute('src'));Me(),He(),V.selectThumbnail(oe),V.setSelectedThumbnailVisible(),V.toggleThumbnailViewerNav()};V.onNumChange=null,V.setOnNumChange=function(je){V.onNumChange=je},V._onNumChange=null;var He=function(){q(V.onNumChange,[oe,ae.length]),q(V._onNumChange,[oe,ae.length]),V.positionIllustrationImg(!0)};V.changePage=function(je){if(de){var ze=Error(P.getOperationNotSupportedString('browsing'));return ze.name=T.OperationNotSupported.toString(),ze}var qe;switch(je){case'f':qe=0;break;case'p':qe=oe-1;break;case'n':qe=oe+1;break;case'l':qe=ae.length-1;break;default:if(1>arguments.length||isNaN(je)){var ze=Error(P.ValueNotValid('index'));return ze.name=T.ValueNotValid.toString(),ze}qe=Math.round(je);;}if(0>qe||qe>=ae.length||qe==oe){var ze=Error(P.getValueOutOfRangeString('index'));return ze.name=T.ValueOutOfRange.toString(),ze}We(qe)},V.del=function(je){if(de){var ze=Error(P.getOperationNotSupportedString('browsing'));return ze.name=T.OperationNotSupported.toString(),ze}if(1>arguments.length&&(je=oe),isNaN(je)){var ze=Error(P.ValueNotValid('index'));return ze.name=T.ValueNotValid.toString(),ze}if(je=Math.round(je),0>je||je>=ae.length){var ze=Error(P.getValueOutOfRangeString('index'));return ze.name=T.ValueOutOfRange.toString(),ze}var qe=ae[je];qe.src&&URL.revokeObjectURL(qe.src),--ce[qe.kPainterBlobId].count||(delete ce[qe.kPainterBlobId],we.removeEntityAsync(qe.kPainterBlobId)),--ce[qe.kPainterOriBlobId].count||(delete ce[qe.kPainterOriBlobId],we.removeEntityAsync(qe.kPainterOriBlobId)),qe.kPainterOriSnapshotBlobId&&! --ce[qe.kPainterOriSnapshotBlobId].count&&(delete ce[qe.kPainterOriSnapshotBlobId],we.removeEntityAsync(qe.kPainterOriSnapshotBlobId)),I(qe).remove(),ae.splice(je,1),je==oe&&(oe==ae.length&&--oe,0<=oe?We(oe):He()),V.removeThumbnailBase64(je),0===V.getCount()&&(Y[0].classList.add('dynamsoft-display-as-none'),X.find('.icn-edit, .icn-download').forEach(Ge=>{Ge.classList.add('dynamsoft-display-as-none')}),!X[0].classList.contains('dynamsoft-display-as-none')&&V.refresh()),V.showDeletePopup(!1)},V.download=function(je,ze){return D?new Promise((qe,Ge)=>{if(de){var Xe=Error(P.getOperationNotSupportedString('browsing'));return Xe.name=T.OperationNotSupported.toString(),void Ge(Xe)}if(!ae.length){var Xe=Error(P.getBufferIsEmptyString());return Xe.name=T.BufferIsEmpty.toString(),void Ge(Xe)}if(2>arguments.length&&(ze=oe),isNaN(ze)){var Xe=Error(P.getValueNotValidString('index'));return Xe.name=T.ValueNotValid.toString(),void Ge(Xe)}if(ze=Math.round(ze),0>ze||ze!=oe){var Xe=Error('Only support download current showed image in iOS.');return Xe.name=T.ValueOutOfRange.toString(),void Ge(Xe)}var Ye=document.createElement('a');Ye.target='_blank';var Ke=ae[ze],$e=Ke.kPainterBlob;if(!$e){var Xe=Error('Image data haven\'t finished loading. Please try again later.');return void Ge(Xe)}je||(je=new Date().getTime()+E.getSuffixFromMime($e.type)),Ye.download=je;var Qe=new MouseEvent('click',{view:window,bubbles:!0,cancelable:!1});if(navigator.userAgent.match('CriOS')){var Je=new FileReader;Je.onload=function(){Ye.href=Je.result,Ye.dispatchEvent(Qe),qe(je)},Je.onerror=function(){var et=Error('Failed to parse image data. Please try again later.');Ge(et)},Je.readAsDataURL($e)}else{var Ze=URL.createObjectURL($e);Ye.href=Ze,Ye.dispatchEvent(Qe),setTimeout(function(){URL.revokeObjectURL(Ze)},1e4),qe(je)}}):new Promise((qe,Ge)=>{if(de){var Xe=Error(P.getOperationNotSupportedString('browsing'));return Xe.name=T.OperationNotSupported.toString(),Ge(Xe)}if(!ae.length){var Xe=Error(P.getBufferIsEmptyString());return Xe.name=T.BufferIsEmpty,Ge(Xe)}if(2>arguments.length&&(ze=oe),isNaN(ze)){var Xe=Error(P.getValueNotValidString('index'));return Xe.name=T.ValueNotValid.toString(),Ge(Xe)}if(ze=Math.round(ze),0>ze||ze>=ae.length){var Xe=Error(P.getValueOutOfRangeString('index'));return Xe.name=T.ValueOutOfRange.toString(),Ge(Xe)}var Ye=document.createElement('a');Ye.target='_blank';var Ke=ae[ze];we.getEntityAsync(Ke.kPainterBlobId).then($e=>{var Qe=URL.createObjectURL($e);Ye.href=Qe,je||(je=new Date().getTime()+E.getSuffixFromMime($e.type)),Ye.download=je;var Je=new MouseEvent('click',{view:window,bubbles:!0,cancelable:!1});return Ye.dispatchEvent(Je),setTimeout(function(){URL.revokeObjectURL(Qe)},1e4),qe(je)}).catch($e=>Ge($e))})},V.positionIllustrationImg=window.__positionIllustrationImg=je=>{const ze=ne[0];return ze.naturalWidth&&ze.naturalHeight?!je||0<V.getCount()||0>window.getComputedStyle(Q[0]).getPropertyValue('width').indexOf('px')?void ze.classList.add('dynamsoft-display-as-none'):void setTimeout(()=>{var qe=parseFloat(window.getComputedStyle(Q[0]).getPropertyValue('width')),Ge=parseFloat(window.getComputedStyle(Q[0]).getPropertyValue('height')),Xe=Math.min(qe,Ge),Ye=0.35*Xe,Ke=Ye/ze.naturalWidth*ze.naturalHeight;(Ye>ze.naturalWidth||Ke>ze.naturalHeight)&&(Ye=ze.width,Ke=ze.height),ze.style.width=Ye+'px',ze.style.height=Ke+'px',ze.classList.remove('dynamsoft-display-as-none')},50):void 0}},he=new function(){var Se=this,xe=Number.NEGATIVE_INFINITY,Te=8,Pe;V.leftDoubleClickZoomRate=2,V.rightDoubleClickZoomRate=0.5;var Ee,Ie,ke,_e,Oe,Ne,Le,Ve,Ae,Me,Fe,Be,De,We,He,je,ze,qe,Ge,Xe,Ye,Ke=4,$e,Ze=50,et=200;V.allowedTouchMoveSwitchImgOverBoundary=!0;var tt=function(){if(-1!=oe&&'posZoom'==re){if(se=null,re=null,Q.find('> .kPainterCroper > .kPainterEdges').children().css('z-index',1),Q.find('> .kPainterCroper > .kPainterCorners').children().css('z-index',1),Q.find('> .kPainterCroper > .kPainterMover').css('z-index',1),Q.find('> .kPainterCroper > .kPainterBigMover').css('z-index',1),!de&&1!=ae.length){var at=Xe/Ye,rt=!1,st,dt;if(at<1.2&&(rt=!0,st=Oe-Ee,dt=st/((new Date().getTime()-xe)/1e3)),qe<-(Math.round(je*Xe)||1)/2||rt&&st<-Ze&&dt<-et){if(oe+1<ae.length||V.allowedTouchMoveSwitchImgOverBoundary)return void ue.showImg((ae.length+oe+1)%ae.length);}else if((qe>(Math.round(je*Xe)||1)/2||rt&&st>Ze&&dt>et)&&(0<=oe-1||V.allowedTouchMoveSwitchImgOverBoundary))return void ue.showImg((ae.length+oe-1)%ae.length)}ot(),it()}},nt=function(at){var rt=Q;if(de?(We=ie,je=We.width,ze=We.height):(We=ae[oe],je=We.kPainterWidth,ze=We.kPainterHeight),qe=parseFloat(We.style.left)+U,Ge=parseFloat(We.style.top)+U,He=I(We).getTransform(),0!=He.a*He.d&&0==He.b*He.c);else{var st=je;je=ze,ze=st}if(Xe=We.kPainterZoom||1,Be=rt.paddingBoxRect(),De=rt.contentBoxRect(),Ye=Math.min(De.width/je,De.height/ze),de&&me.isCropRectShowing&&!at){var dt=me.getNeededRect();Ye=Math.max(Math.max(dt.width,je*Ye)/je,Math.max(dt.height,ze*Ye)/ze)}};V.onUpdateImgPosZoom=null;var it=function(){if(We.style.left=qe-U+'px',We.style.right=-qe-U+'px',We.style.top=Ge-U+'px',We.style.bottom=-Ge-U+'px',We.kPainterZoom=Xe,0!=He.a*He.d&&0==He.b*He.c?(We.style.width=(Math.round(je*Xe)||1)+'px',We.style.height=(Math.round(ze*Xe)||1)+'px'):(We.style.height=(Math.round(je*Xe)||1)+'px',We.style.width=(Math.round(ze*Xe)||1)+'px'),!de&&1!=ae.length){var at=Math.max(0,((Math.round(je*Xe)||1)-Be.width)/2);if(2<ae.length||qe>at){var rt=ae[(ae.length+oe-1)%ae.length];rt.style.left=qe-at-Be.width+'px',rt.style.right=-qe+at+Be.width+'px'}if(2<ae.length||qe<=-at){var st=ae[(ae.length+oe+1)%ae.length];st.style.left=qe+at+Be.width+'px',st.style.right=-qe-at-Be.width+'px'}}q(V.onUpdateImgPosZoom)},ot=function(at,rt){if(Xe>Ke&&(Xe=Ke),Xe<Ye&&(Xe=Ye),!at){var st=Math.round(je*Xe)||1;if(De.width>st)qe=0;else{var dt=(st-De.width)/2;qe<-dt?qe=-dt:qe>dt&&(qe=dt)}}if(!rt){var lt=Math.round(ze*Xe)||1;if(De.height>lt)Ge=0;else{var pt=(lt-De.height)/2;Ge<-pt?Ge=-pt:Ge>pt&&(Ge=pt)}}};V.getZoom=function(){return 0==ae.length?void 0:Xe},V.setZoom=function(at,rt){if(0!=ae.length){var at=parseFloat(at);if(at===at)return rt?Xe*=at:Xe=at,ot(),it(),Xe}},Se.setImgStyleFit=function(){nt(!0),Xe=Ye,ot(),it(),V.setCropRectArea()},Q.on('touchstart touchcancel touchend mousedown',function(at){if(at.preventDefault(),-1!=oe){var rt=at.originalEvent,st=rt.targetTouches,dt;if(!st){if(!se)se='mouse';else if('mouse'!=se)return;st=[{pageX:rt.clientX,pageY:rt.clientY}],dt=rt.buttons}else if(st.length)if(!se)se='touch';else if('touch'!=se)return;if(1==st.length){Oe=Ee=st[0].pageX,Ne=Ie=st[0].pageY,nt();var lt=xe;xe=new Date().getTime();var pt=Pe;if(Pe=dt||(0.01>Math.abs(Xe-Ye)/Ye?1:2),xe-lt<1e3&&Pe==pt&&(1==Pe||2==Pe)&&Math.abs(st[0].pageX-ke)<Te&&Math.abs(st[0].pageY-_e)<Te){xe=Number.NEGATIVE_INFINITY;var ct=Oe,ut=Ne,ht=Xe,gt=1==Pe?V.leftDoubleClickZoomRate:V.rightDoubleClickZoomRate;Xe*=gt,Xe>Ke&&(Xe=Ke,gt=Ke/ht),Xe<Ye&&(Xe=Ye,gt=Ye/ht);var mt=qe+Be.pageX0+Be.width/2,ft=Ge+Be.pageY0+Be.height/2;qe-=(gt-1)*(ct-mt),Ge-=(gt-1)*(ut-ft),ot()}if(null==re)re='posZoom';else return;Q.find('> .kPainterCroper > .kPainterEdges').children().css('z-index','unset'),Q.find('> .kPainterCroper > .kPainterCorners').children().css('z-index','unset'),Q.find('> .kPainterCroper > .kPainterMover').css('z-index','unset'),Q.find('> .kPainterCroper > .kPainterBigMover').css('z-index','unset'),$e=st[0].identifier}else if(2==st.length){if(Oe=Ee=st[0].pageX,Ne=Ie=st[0].pageY,null==re&&(re='posZoom'),'posZoom'!=re)return;nt(),Q.find('> .kPainterCroper > .kPainterEdges').children().css('z-index','unset'),Q.find('> .kPainterCroper > .kPainterCorners').children().css('z-index','unset'),Q.find('> .kPainterCroper > .kPainterMover').css('z-index','unset'),Q.find('> .kPainterCroper > .kPainterBigMover').css('z-index','unset'),Ae=st[1].pageX,Me=st[1].pageY,Le=(Oe+Ae)/2,Ve=(Ne+Me)/2,Fe=Math.sqrt(Math.pow(Oe-Ae,2)+Math.pow(Ne-Me,2))}else 0==st.length&&(ke=Oe,_e=Ne,tt())}}),Q.on('mouseup',function(at){if('mouse'==se){var rt=at.originalEvent;ke=rt.clientX,_e=rt.clientY,tt()}}),Q.on('mouseleave',function(at){if('mouse'==se){var rt=at.originalEvent;rt.buttons&&(ke=Oe,_e=Ne,tt())}}),Q.on('contextmenu',function(at){at.preventDefault()}),Q.on('touchmove mousemove',function(at){at.preventDefault();var rt=at.originalEvent.targetTouches;if(!rt){if('mouse'!=se)return;rt=[{pageX:at.originalEvent.clientX,pageY:at.originalEvent.clientY}]}else if('touch'!=se)return;if(1==rt.length){if('posZoom'!=re||$e!=rt[0].identifier)return;var st=Oe,dt=Ne;Oe=rt[0].pageX,Ne=rt[0].pageY,qe+=Oe-st,Ge+=Ne-dt,ot(!de),it()}else if(2==rt.length){if('posZoom'!=re)return;var lt=Le,pt=Ve,ct=Fe,ut=Xe;Oe=rt[0].pageX,Ne=rt[0].pageY,Ae=rt[1].pageX,Me=rt[1].pageY,Le=(Oe+Ae)/2,Ve=(Ne+Me)/2,Fe=Math.sqrt(Math.pow(Oe-Ae,2)+Math.pow(Ne-Me,2));var ht=Fe/ct;Xe*=ht,Xe>Ke&&(Xe=Ke,ht=Ke/ut),Xe<Ye&&(Xe=Ye,ht=Ye/ut);var gt=qe+Be.pageX0+Be.width/2,mt=Ge+Be.pageY0+Be.height/2;qe-=(ht-1)*(lt-gt),Ge-=(ht-1)*(pt-mt),ot(),it()}})},ge=new function(){var Se=this,xe,Ce=[];V.stepImgsGCThreshold=10;var Te=[],Pe=[];V.addProtectedStep=function(Fe){if(Fe=parseInt(Fe),Fe!==Fe){var Be=Error(P.ValueNotValid('index'));return Be.name=T.ValueNotValid.toString(),Be}-1!=Pe.indexOf(Fe)||(Pe.push(Fe),Pe.sort(function(De,Re){return De-Re}))},V.removeProtectedStep=function(Fe){if(Fe=parseInt(Fe),Fe!==Fe){var Be=Error(P.ValueNotValid('index'));return Be.name=T.ValueNotValid.toString(),Be}var De=Pe.indexOf(Fe);-1==De||Pe.splice(De,1)},V.getProtectedSteps=function(){return Pe.concat()};var Ee=Se.pushStack=function(Fe){Ce.length=xe+1;for(var Be=Te.length-1;0<Be&&Te[Be].beginStep>xe;--Be)--Te.length;if(!Fe.srcBlob){var De=Ce[xe],Re=De.crop,Ue=Fe.transform,We=Fe.crop,je={},He;He=Ue?Ue:De.transform,je.left=Re.left,je.top=Re.top,je.width=Re.width,je.height=Re.height,0!=He.a*He.d&&0==He.b*He.c?(Ue&&(He=new E.Matrix(Math.sign(Ue.a),0,0,Math.sign(Ue.d),0,0)),We&&(je.left+=1==He.a?We.left*Re.width:(1-We.left-We.width)*Re.width,je.top+=1==He.d?We.top*Re.height:(1-We.top-We.height)*Re.height,je.width*=We.width,je.height*=We.height)):(Ue&&(He=new E.Matrix(0,Math.sign(Ue.b),Math.sign(Ue.c),0,0,0)),We&&(je.left+=1==He.b?We.top*Re.width:(1-We.top-We.height)*Re.width,je.top+=1==He.c?We.left*Re.height:(1-We.left-We.width)*Re.height,je.width*=We.height,je.height*=We.width));var ze=ae[oe],qe=Math.pow(10,Math.ceil(Math.max(ze.kPainterWidth,ze.kPainterHeight)).toString().length+2);je.left=Math.round(je.left*qe)/qe,je.top=Math.round(je.top*qe)/qe,je.width=Math.round(je.width*qe)/qe,je.height=Math.round(je.height*qe)/qe;var Ge={crop:je,transform:He,srcBlob:De.srcBlob,saveFormat:De.saveFormat};Ce.push(Ge),++xe,Ge.srcBlob&&(Te[Te.length-1].endStep=xe+1)}else{for(var Ge={crop:{left:0,top:0,width:1,height:1},transform:new E.Matrix(1,0,0,1,0,0),srcBlob:Fe.srcBlob,saveFormat:Fe.saveFormat},Be=0;Te.length>=V.stepImgsGCThreshold;)if(!Pe.filter(function(Qe){return Te[Be].beginStep<=Qe&&Qe<Te[Be].endStep}).length){for(var Xe=Te[Be].beginStep,Ye=Te[Be].endStep,Ke=Xe;Ke<Ye;++Ke)Ce[Ke]=null;Te.splice(Be,1)}else if(++Be<Te.length)continue;else break;Ce.push(Ge),++xe;var $e={blob:Ge.srcBlob,beginStep:xe,endStep:xe+1};Te.push($e)}};V.undoAsync=function(Fe){if(!de){var Be=Error(P.getOperationNotSupportedString('editing'));return Be.name=T.OperationNotSupported.toString(),void q(Fe,[!1,Be])}if(0<xe){for(var De=xe-1;null==Ce[De];)--De;Ie(xe,De,function(){q(Fe,[!0])})}else q(Fe,[!0])},V.redoAsync=function(Fe){if(!de){var Be=Error(P.getOperationNotSupportedString('editing'));return Be.name=T.OperationNotSupported.toString(),void q(Fe,[!1,Be])}if(xe<Ce.length-1){for(var De=xe+1;null==Ce[De];)++De;Ie(xe,De,function(){q(Fe,[!0])})}else q(Fe,[!0])},V.getStepCount=function(){return Ce.length},V.getCurStep=function(){return xe},V.setCurStepAsync=function(Fe,Be){if(!de){var De=Error(P.getOperationNotSupportedString('editing'));return De.name=T.OperationNotSupported.toString(),void q(Be,[!1,De])}if(1>arguments.length||isNaN(Fe)){var De=Error(P.ValueNotValid('index'));return De.name=T.ValueNotValid.toString(),void q(Be,[!1,De])}if(Fe=Math.round(Fe),0>Fe||Fe>=Ce.length||null==Ce[Fe]){var De=Error(P.getValueOutOfRangeString('index'));return De.name=T.ValueOutOfRange.toString(),void q(Be,[!1,De])}Ie(xe,Fe,function(){q(Be,[!0])})},Se.needAlwaysTrueTransform=!1;var Ie=function(Fe,Be,De){xe=Be;var Re=Ce[Fe].crop,Ue=Ce[xe].crop;Re.left==Ue.left&&Re.top==Ue.top&&Re.width==Ue.width&&Re.bottom==Ue.bottom&&Ce[Fe].srcBlob==Ce[xe].srcBlob?(I(ie).setTransform(Ce[xe].transform.dot(Ce[Fe].transform.inversion()).dot(I(ie).getTransform())),he.setImgStyleFit(),De&&De()):Oe(Se.needAlwaysTrueTransform,!1,De)},ke=function(Fe){I(ie).siblings().hide(),Oe(!1,!1,function(){V.isAutoShowCropUI&&me.showCropRect(),Fe&&Fe()})},_e;(function(){var Fe=window.devicePixelRatio||1,Be=screen.width,De=screen.height;_e=Math.min(Be,De)*Fe})();var Oe=Se.updateCvsAsync=function(Fe,Be,De){I(ie).hide();var Re=Ce[xe],Ue=Re.srcBlob||ae[oe].kPainterOriBlob;if(window.createImageBitmap)createImageBitmap(Ue).then(function(je){Ne(je,Re,Fe,Be),De&&De()});else{var We=URL.createObjectURL(Ue),He=new Image;He.onload=He.onerror=function(){He.onload=He.onerror=null,Ne(He,Re,Fe,Be),URL.revokeObjectURL(We),De&&De()},He.src=We}},Ne=function(Fe,Be,De,Re){V._noAnyUseButForIosSafariBug0=Fe.naturalWidth,V._noAnyUseButForIosSafariBug1=Fe.naturalHeight;var Ue=Fe.naturalWidth||Fe.width,We=Fe.naturalHeight||Fe.height,He=Be.crop,je=Be.transform,ze=ie.getContext('2d'),qe=ie.fullQualityWidth=Math.round(Ue*He.width)||1,Ge=ie.fullQualityHeight=Math.round(We*He.height)||1,Xe=!1;if(0!=je.a*je.d&&0==je.b*je.c?(ie.fullQualityWidth=qe,ie.fullQualityHeight=Ge):(ie.fullQualityWidth=Ge,ie.fullQualityHeight=qe,De&&(Xe=!0)),ie.hasCompressed=!1,De){var Ye,Ke;Xe?(Ye=Ge,Ke=qe):(Ye=qe,Ke=Ge),ie.width=Ye,ie.height=Ke;var $e=Ye/2*(1-je.a-je.c),Qe=Ke/2*(1-je.b-je.d);ze.setTransform(je.a,je.b,je.c,je.d,$e,Qe)}else if(qe>_e||Ge>_e){var Je=_e/Math.max(qe,Ge);ie.width=Math.round(qe*Je)||1,ie.height=Math.round(Ge*Je)||1,ie.hasCompressed=!0}else ie.width=qe,ie.height=Ge;var Ze=Math.round(Ue*He.left),et=Math.round(We*He.top);Ze==Ue&&--Ze,et==We&&--et;var tt,nt;if(Xe?(tt=ie.height,nt=ie.width):(tt=ie.width,nt=ie.height),2>=qe/tt)ze.drawImage(Fe,Ze,et,qe,Ge,0,0,tt,nt);else{var it=document.createElement('canvas');it.width=Math.round(qe/2),it.height=Math.round(Ge/2);var ot=it.getContext('2d'),st=Math.round(qe/2),dt=Math.round(Ge/2),at,rt;for(ot.drawImage(Fe,Ze,et,qe,Ge,0,0,st,dt);;){if(at=st,rt=dt,st=Math.round(at/2),dt=Math.round(rt/2),st<=tt||dt<=nt)break;ot.drawImage(it,0,0,at,rt,0,0,st,dt)}ze.drawImage(it,0,0,at,rt,0,0,tt,nt)}De?I(ie).setTransform(new E.Matrix(1,0,0,1,0,0)):I(ie).setTransform(je),Re||(he.setImgStyleFit(),I(ie).show())},Le=function(){I(ie).hide(),me.hideCropRect(),fe.hideFreeTransformBorderDirectly()};V.enterEditAsync=function(){return new Promise(function(Fe,Be){if(de)return void Fe(ae[oe].kPainterOriBlob);if(-1==oe){var De=Error(P.getBufferIsEmptyString());return De.name=T.BufferIsEmpty.toString(),void Be(De)}le(),de=!0;var Re=ae[oe].kPainterProcess||{crop:{left:0,top:0,width:1,height:1},transform:new E.Matrix(1,0,0,1,0,0),srcBlob:null,saveFormat:null,freeTransform:null};Ce.push(Re),xe=0;var Ue=ae[oe];we.getEntityAsync(Ue.kPainterOriBlobId).then(We=>{Ue.kPainterOriBlob=We,ke(function(){pe(),Fe(ae[oe].kPainterOriBlob),V.funcShowToolKit('.edit-tool-kit'),V.funcShowSubsidiaryToolKit('.edit-mode-tool-kit'),X[0].classList.contains('dynamsoft-display-as-none')||(Y[0].classList.remove('dynamsoft-display-as-none'),V.refresh())})}).catch(We=>{pe(),Be(We)})})};var Ve=V.cancelEdit=function(){return!de||(de=!1,fe.isFreeTransformMode=!1,re=null,delete ae[oe].kPainterOriBlob,Ce.length=0,Te.length=0,ue.showImg(oe),Le(),V.removeActiveState(),V.funcShowToolKit('.entry-tool-kit'),V.funcShowSubsidiaryToolKit('.view-mode-tool-kit'),!0)},Ae=function(Fe,Be){var De=Ce[xe].crop,Re=Ce[xe].transform,Ue=Ce[0].crop,We=Ce[0].transform,He=ae[oe];if(Ce[xe].srcBlob||We.a!=Re.a||We.b!=Re.b||We.c!=Re.c||We.d!=Re.d||Math.round(He.kPainterOriWidth*De.left)!=Math.round(He.kPainterOriWidth*Ue.left)||Math.round(He.kPainterOriHeight*De.top)!=Math.round(He.kPainterOriHeight*Ue.top)||Math.round(He.kPainterOriWidth*(De.left+De.width))!=Math.round(He.kPainterOriWidth*(Ue.left+Ue.width))||Math.round(He.kPainterOriHeight*(De.top+De.height))!=Math.round(He.kPainterOriHeight*(Ue.top+Ue.height))){var je=new Image,ze=function(){delete He.kPainterOriBlob,W(ie,Ce[xe].saveFormat||He.kPainterSaveFormat).then(qe=>{var Ge=Math.random()+E.getSuffixFromMime(qe.type);je.kPainterBlobId=Ge,D&&(je.kPainterBlob=qe),ce[Ge]={count:1,width:ie.width,height:ie.height,size:qe.size,time:new Date().getTime()},we.addEntityAsync({id:Ge,data:qe}).then(()=>{je.kPainterWidth=ie.width,je.kPainterHeight=ie.height,Ce[xe].srcBlob?(je.kPainterOriBlobId=Ge,++ce[Ge].count,je.kPainterOriWidth=ie.width,je.kPainterOriHeight=ie.height,je.kPainterProcess={crop:{left:0,top:0,width:1,height:1},transform:new E.Matrix(1,0,0,1,0,0),freeTransform:Ce[xe].freeTransform},je.kPainterSaveFormat=Ce[xe].saveFormat):(je.kPainterOriBlobId=He.kPainterOriBlobId,++ce[He.kPainterOriBlobId].count,He.kPainterOriSnapshotBlobId&&(je.kPainterOriSnapshotBlobId=He.kPainterOriSnapshotBlobId,++ce[He.kPainterOriSnapshotBlobId].count),je.kPainterOriWidth=He.kPainterOriWidth,je.kPainterOriHeight=He.kPainterOriHeight,je.kPainterProcess=Ce[xe],je.kPainterSaveFormat=He.kPainterSaveFormat);var Xe=URL.createObjectURL(qe);je.onload=je.onerror=function(){je.onload=je.onerror=null;var Ye=function(){Be?(He.src&&URL.revokeObjectURL(He.src),! --ce[He.kPainterBlobId].count&&(delete ce[He.kPainterBlobId],we.removeEntityAsync(He.kPainterBlobId)),! --ce[He.kPainterOriBlobId].count&&(delete ce[He.kPainterOriBlobId],we.removeEntityAsync(He.kPainterOriBlobId)),He.kPainterOriSnapshotBlobId&&! --ce[He.kPainterOriSnapshotBlobId].count&&(delete ce[He.kPainterOriSnapshotBlobId],we.removeEntityAsync(He.kPainterOriSnapshotBlobId)),I(He).remove(),ae.splice(oe,1,je)):ae.splice(++oe,0,je),Q.find('.kPainterImgsDiv').append(je),Fe&&Fe(qe)};Ce[xe].srcBlob?ue.__setSnapshotAndPreUpload(je,qe).then(Ye):Ye()},je.src=Xe})})};ie.hasCompressed||1!=Re.a||0!=Re.b||0!=Re.c||1!=Re.d||0!=Re.e||0!=Re.f?(I(ie).hide(),Oe(!0,!0,ze)):ze()}else{if(!Be){var je=new Image;je.kPainterWidth=He.width,je.kPainterHeight=He.height,je.kPainterProcess=He.kPainterProcess,je.kPainterSaveFormat=He.kPainterSaveFormat,je.kPainterBlobId=He.kPainterBlobId,++ce[je.kPainterBlobId].count,je.kPainterOriBlobId=He.kPainterOriBlobId,++ce[je.kPainterOriBlobId].count,D&&(je.kPainterBlob=He.kPainterBlob),He.kPainterOriSnapshotBlobId&&(je.kPainterOriSnapshotBlobId=He.kPainterOriSnapshotBlobId,++ce[je.kPainterOriSnapshotBlobId].count),ae.splice(++oe,0,je),Q.find('.kPainterImgsDiv').append(je)}Fe(He.kPainterOriBlob)}},Me=!1;V.saveEditAsync=function(Fe){return new Promise(function(Be,De){if(!de||Me){var Re=Error(P.getOperationNotSupportedString('editing'));return Re.name=T.OperationNotSupported.toString(),void De(Re)}Me=!0,le(),setTimeout(function(){Ae(function(Ue){Ve(),pe(),Me=!1,Fe?V.updateThumbnailBase64(oe,ae[oe]):V.addThumbnailBase64(oe,ae[oe]),Be(Ue),V.removeActiveState(),V.funcShowToolKit('.entry-tool-kit'),V.funcShowSubsidiaryToolKit('.view-mode-tool-kit')},Fe)},100)})},V.rotateRight=function(){if(!de){var Fe=Error(P.getOperationNotSupportedString('editing'));return Fe.name=T.OperationNotSupported.toString(),Fe}var Be=I(ie).getTransform(),De=E.Matrix.dot(new E.Matrix(0,1,-1,0,0,0),Be);I(ie).setTransform(De),Ee({transform:De});var Re=ie.fullQualityWidth;ie.fullQualityWidth=ie.fullQualityHidth,ie.fullQualityHeight=Re,he.setImgStyleFit(),V.removeActiveState()},V.rotateLeft=function(){if(!de){var Fe=Error(P.getOperationNotSupportedString('editing'));return Fe.name=T.OperationNotSupported.toString(),Fe}var Be=I(ie).getTransform(),De=E.Matrix.dot(new E.Matrix(0,-1,1,0,0,0),Be);I(ie).setTransform(De),Ee({transform:De});var Re=ie.fullQualityWidth;ie.fullQualityWidth=ie.fullQualityHidth,ie.fullQualityHeight=Re,he.setImgStyleFit(),V.removeActiveState()},V.mirror=function(){if(!de){var Fe=Error(P.getOperationNotSupportedString('editing'));return Fe.name=T.OperationNotSupported.toString(),Fe}var Be=I(ie).getTransform(),De=E.Matrix.dot(new E.Matrix(-1,0,0,1,0,0),Be);I(ie).setTransform(De),Ee({transform:De}),he.setImgStyleFit(),V.removeActiveState()},V.getEditWidth=function(){return de?ie.fullQualityWidth:NaN},V.getEditHeight=function(){return de?ie.fullQualityHeight:NaN}},me=new function(){var Se=this;V.isAutoShowCropUI=!C.isBoolean(N.editorViewer.bAutoShowCropUI)||N.editorViewer.bAutoShowCropUI;var xe=Q.find('.kPainterCroper');Se.isCropRectShowing=!1,V.showCropRect=Se.showCropRect=function(){if(!de){var Qe=Error(P.getOperationNotSupportedString('editing'));return Qe.name=T.OperationNotSupported.toString(),Qe}Se.isCropRectShowing=!0,Ke(),xe.show(),V.funcShowToolKit('.crop-tool-kit'),V.removeActiveState(),X[0].classList.contains('dynamsoft-display-as-none')||(Y[0].classList.add('dynamsoft-display-as-none'),V.refresh())},V.hideCropRect=Se.hideCropRect=function(){Se.isCropRectShowing=!1,xe.hide(),V.funcShowToolKit('.edit-tool-kit'),X[0].classList.contains('dynamsoft-display-as-none')||(Y[0].classList.remove('dynamsoft-display-as-none'),V.refresh())},xe.css({'border-left-width':U+'px','border-top-width':U+'px','border-right-width':U+'px','border-bottom-width':U+'px',left:-U+'px',top:-U+'px',right:-U+'px',bottom:-U+'px'}),V.setCropRectStyle=function(Qe){return 0===Qe?(xe.find('>.kPainterBigMover').hide(),xe.find('>.kPainterMover').show(),!0):!(1!=Qe)&&(xe.find('>.kPainterMover').hide(),xe.find('>.kPainterBigMover').show(),!0)};var Ce,Te,Pe,Ee,Ie,ke,_e,Oe,Ne,Le,Ve,Ae,Me,Fe,Be,De,Re,Ue,We,He,je;V.cropRectMinW=50,V.cropRectMinH=50;var qe=function(){'crop'==re&&(se=null,re=null)},Ge=function(){var Qe=Q;ke=Qe.paddingBoxRect(),_e=Qe.contentBoxRect(),Xe(),De=parseFloat(xe[0].style.width),Re=parseFloat(xe[0].style.height),Fe=parseFloat(xe[0].style.left)-De/2+U,Be=parseFloat(xe[0].style.top)-Re/2+U,Ue=Math.max(-_e.width/2,Oe),We=Math.max(-_e.height/2,Ne),He=Math.min(_e.width/2,Le),je=Math.min(_e.height/2,Ve)},Xe=function(){var Qe=I(ie).getTransform(),Je=ie.kPainterZoom,Ze=parseFloat(ie.style.left)+U,et=parseFloat(ie.style.top)+U;0!=Qe.a*Qe.d&&0==Qe.b*Qe.c?(Ae=parseFloat(ie.style.width),Me=parseFloat(ie.style.height)):(Ae=parseFloat(ie.style.height),Me=parseFloat(ie.style.width));var tt=Ae/2,nt=Me/2;Oe=Ze-tt,Ne=et-nt,Le=Ze+tt,Ve=et+nt};Q.find('> .kPainterCroper > .kPainterEdges > div, > .kPainterCroper > .kPainterCorners > div, > .kPainterCroper > .kPainterMover, > .kPainterCroper > .kPainterBigMover').on('touchstart touchcancel touchend mousedown',function(Qe){Qe.preventDefault();var Je=Qe.originalEvent.targetTouches;if(!Je){if(!se)se='mouse';else if('mouse'!=se)return;Je=[{pageX:Qe.originalEvent.clientX,pageY:Qe.originalEvent.clientY}]}else if(Je.length)if(!se)se='touch';else if('touch'!=se)return;if(1==Je.length){if(null==re)re='crop';else return;Pe=Je[0].identifier,Ce=Je[0].pageX,Te=Je[0].pageY;var Ze=I(this).attr('data-orient').split(',');Ee=Ze[0],Ie=Ze[1],Ge()}else 0==Je.length&&qe()}),Q.on('mouseup',function(){'mouse'!=se||qe()}),Q.on('mouseleave',function(Qe){if('mouse'==se){var Je=Qe.originalEvent;Je.buttons&&qe()}}),V.onCropRectChange=null;var Ye=function(){xe[0].style.left=Fe+De/2-U+'px',xe[0].style.right=-Fe-De/2-U+'px',xe[0].style.top=Be+Re/2-U+'px',xe[0].style.bottom=-Be-Re/2-U+'px',xe[0].style.width=De+'px',xe[0].style.height=Re+'px',q(V.onCropRectChange)};Q.on('touchmove mousemove',function(Qe){Qe.preventDefault();var Je=Qe.originalEvent.targetTouches;if(!Je){if('mouse'!=se)return;Je=[{pageX:Qe.originalEvent.clientX,pageY:Qe.originalEvent.clientY}]}else if('touch'!=se)return;if(1==Je.length){if('crop'!=re||Pe!=Je[0].identifier)return;var Ze=Ce,et=Te;Ce=Je[0].pageX,Te=Je[0].pageY;var tt=Ce-Ze,nt=Te-et;-1==Ee?(De-tt<V.cropRectMinW&&(tt=De-V.cropRectMinW),Fe+tt<Ue&&(tt=Ue-Fe),De-=tt,Fe+=tt):1==Ee&&(De+tt<V.cropRectMinW&&(tt=-De+V.cropRectMinW),Fe+De+tt>He&&(tt=He-De-Fe),De+=tt),-1==Ie?(Re-nt<V.cropRectMinH&&(nt=Re-V.cropRectMinH),Be+nt<We&&(nt=We-Be),Re-=nt,Be+=nt):1==Ie&&(Re+nt<V.cropRectMinH&&(nt=-Re+V.cropRectMinH),Be+Re+nt>je&&(nt=je-Re-Be),Re+=nt),0==Ee&&0==Ie&&(Fe+tt<Ue?tt=Ue-Fe:Fe+De+tt>He&&(tt=He-De-Fe),Be+nt<We?nt=We-Be:Be+Re+nt>je&&(nt=je-Re-Be),Fe+=tt,Be+=nt),Ye()}});var Ke=V.setCropRectArea=function(Qe,Je,Ze,et){if(!Se.isCropRectShowing){var tt=Error(P.getOperationNotSupportedString('croping'));return tt.name=T.OperationNotSupported.toString(),tt}-0.5<=Qe||(Qe=-0.5),-0.5<=Je||(Je=-0.5),0.5>=Ze||(Ze=0.5),0.5>=et||(et=0.5),Qe>Ze&&(Qe=Ze=(Qe+Ze)/2),Je>et&&(Je=et=(Je+et)/2),Ge(),Fe=Oe+(Qe+0.5)*Ae,Fe<Ue&&(Fe=Ue),Be=Ne+(Je+0.5)*Me,Be<We&&(Be=We);var nt=Oe+(Ze+0.5)*Ae;nt>He&&(nt=He),De=nt-Fe;var it=Ne+(et+0.5)*Me;return it>je&&(it=je),Re=it-Be,void Ye()},$e=V.getCropRectArea=function(Qe){if(!Se.isCropRectShowing)return null;Ae!=parseFloat(ie.style.width)&&Ge();var Je=(Fe-Oe)/Ae-0.5,Ze=(Be-Ne)/Me-0.5,et=De/Ae,tt=Re/Me,nt=Je+et,it=Ze+tt;return Qe&&(Je=Math.round(Je*ie.fullQualityWidth),Ze=Math.round(Ze*ie.fullQualityHeight),nt=Math.round(nt*ie.fullQualityWidth),it=Math.round(it*ie.fullQualityHeight)),[Je,Ze,nt,it]};Se.getNeededRect=function(){Ge();var Qe={width:2*Math.max(-Fe,Fe+De),height:2*Math.max(-Be,Be+Re)};return Qe},V.cropAsync=function(Qe){return new Promise(function(Je,Ze){if(!de){var et=Error(P.getOperationNotSupportedString('editing'));return et.name=T.OperationNotSupported.toString(),void Ze(et)}if(Ge(),Qe=Qe||$e(),!Qe){var et=Error(P.getOperationNotSupportedString('croping'));return et.name=T.OperationNotSupported.toString(),void Ze(et)}var tt=Qe[0],nt=Qe[1],it=Qe[2],ot=Qe[3];0.5>(tt+0.5)*ie.fullQualityWidth&&0.5>=(0.5-it)*ie.fullQualityWidth&&0.5>(nt+0.5)*ie.fullQualityHeight&&0.5>=(0.5-ot)*ie.fullQualityHeight?Je([tt,nt,it,ot]):(ge.pushStack({crop:{left:tt+0.5,top:nt+0.5,width:it-tt,height:ot-nt}}),ge.updateCvsAsync(ge.needAlwaysTrueTransform,!1,function(){Je([tt,nt,it,ot])}))})}},fe=new function(){var Se=this;(function(){var xe={blurSize:5,cannyThreshold1:8,cannyThreshold2Rt:0.5,houghLineRho:1,houghLineTheta:Math.PI/180,houghLineThreshold:8,houghLinesMinLength:8,houghLinesMaxGap:3,linesMaxRadDifToHV:Math.PI/6,fitlineMaxDRange:2,fitlineMaxRadRange:Math.PI/18,cornerMinRad:Math.PI/3},Ce=function(Fe){var Be=ie.width,De=ie.height,Re=1;Be>De?Be>Fe&&(Re=Fe/Be,Be=Fe,De=Math.round(De*Re)||1):De>Fe&&(Re=Fe/De,De=Fe,Be=Math.round(Be*Re)||1);var Ue=I(ie).getTransform(),We,He;0!=Ue.a*Ue.d&&0==Ue.b*Ue.c?(We=Be,He=De):(We=De,He=Be);var je=document.createElement('canvas');je.width=We,je.height=He;var ze=je.getContext('2d'),qe=We/2*(1-Ue.a-Ue.c),Ge=He/2*(1-Ue.b-Ue.d);ze.setTransform(Ue.a,Ue.b,Ue.c,Ue.d,qe,Ge),ze.drawImage(ie,0,0,Be,De);var Xe=ze.getImageData(0,0,We,He);return Xe},Te=function(Fe,Be){return new Promise((De,Re)=>{if('string'==typeof Fe||Fe instanceof String||Fe instanceof Blob)return void ue.getBlobAndFormatFromAnyImgData(Fe).then(([Ge,Xe])=>{return z(Ge)}).then(Ge=>{return Te(Ge,Be)}).then(Ge=>De(Ge)).catch(Ge=>Re(Ge));if(Fe instanceof Image)try{V._noUseButTestSrc=Fe.src}catch(Ge){return setTimeout(function(Xe){throw Xe},0),void Re(Ge)}else if(Fe instanceof ImageData){if(Fe.width<=Be&&Fe.height<=Be)return void De(Fe);var Ue=Fe;Fe=document.createElement('canvas'),Fe.width=Ue.width,Fe.height=Ue.height,Fe.getContext('2d').putImageData(Ue,Fe.width,Fe.height)}var We=document.createElement('canvas'),He=Fe.naturalWidth||Fe.videoWidth||Fe.width,je=Fe.naturalHeight||Fe.videoHeight||Fe.height,ze=1;He>je?He>Be&&(ze=Be/He,He=Be,je=Math.round(je*ze)||1):je>Be&&(ze=Be/je,je=Be,He=Math.round(He*ze)||1),We.width=He,We.height=je;var qe=We.getContext('2d');qe.drawImage(Fe,0,0,We.width,We.height),De(qe.getImageData(0,0,We.width,We.height))})};V.documentDetectAsync=function(Fe,Be){if(!Be){if(!Se.isFreeTransformMode){var De=Error('You haven\'t enter the freeTransform mode.');return void q(Fe,[null,De])}le()}var Re=O._cv;Te(Be||Ce(256),256).then(Ue=>{var We=new Re.matFromArray(Ue,Re.CV_8UC4),He=We.cols,je=We.rows,ze=Math.min(We.cols,We.rows);Re.cvtColor(We,We,Re.ColorConversionCodes.COLOR_RGBA2GRAY.value,0);var qe=new Re.Mat,Ge=xe.blurSize;Re.GaussianBlur(We,qe,[Ge,Ge],0,0,Re.BORDER_DEFAULT),Re.delMat(We);var Xe=new Re.Mat;Re.Canny(qe,Xe,xe.cannyThreshold1,xe.cannyThreshold2Rt*ze,3,!1),Re.delMat(qe);var Ye=new Re.Mat;Re.HoughLinesP(Xe,Ye,xe.houghLineRho,xe.houghLineTheta,xe.houghLineThreshold,xe.houghLinesMinLength,xe.houghLinesMaxGap),Re.delMat(Xe);var Ke=Ye.data32s(),$e=[],Qe=He/2,Je=je/2;for(let Et=0;Et<Ke.length;Et+=2)$e.push(Ke[Et]-Qe),$e.push(Ke[Et+1]-Je);Re.delMat(Ye);var Ze=[];for(let Et=0;Et<$e.length;Et+=4){let It=$e[Et+0],kt=$e[Et+1],_t=$e[Et+2],Ot=$e[Et+3],Nt=kt-Ot,Lt=_t-It,Vt=It*Ot-_t*kt;if(0!=Vt){var et=0>Vt?-1:1,tt=Math.sqrt(Nt*Nt+Lt*Lt);Nt=Nt/tt*et,Lt=Lt/tt*et,Vt=Vt/tt*et;var nt=Math.atan(Nt/Lt);{var it=Math.abs(nt);if(it>xe.linesMaxRadDifToHV&&it<Math.PI/2-xe.linesMaxRadDifToHV)continue}0>Lt?0==Nt?(Lt=-1,nt=0):nt=-nt:0<Lt?0>Nt?nt=-Math.PI-nt:0<Nt?nt=Math.PI-nt:(Lt=1,nt=Math.PI):0<Nt?(Nt=1,nt=Math.PI/2):(Nt=-1,nt=-Math.PI/2);var ot=Math.sqrt((_t-It)*(_t-It)+(Ot-kt)*(Ot-kt));Ze.push([Nt,Lt,Vt,nt,ot])}}var at=[],rt=[],st=xe.fitlineMaxDRange,dt=xe.fitlineMaxRadRange;Pe(Ze,at,st,dt,0.7*ze),Pe(at,rt,st,dt,0.7*ze);for(var lt=[null,null,null,null],pt=0;pt<rt.length;++pt){var ct=rt[pt],nt=ct[3],ut=null;if(ut=nt<3*-Math.PI/4?0:nt<-Math.PI/4?1:nt<Math.PI/4?2:nt<3*Math.PI/4?3:0,!lt[ut])lt[ut]=ct;else{var ht=lt[ut],gt=ht[2],mt=ht[4],ft=ct[2],ot=ct[4];ft*ot>gt*mt&&(lt[ut]=ct)}}for(var pt=0,ct;pt<lt.length;++pt)ct=lt[pt],null==ct&&(ct=[],lt[pt]=ct,0==pt?(ct[2]=Je,ct[3]=Math.PI):1==pt?(ct[2]=Qe,ct[3]=-Math.PI/2):2==pt?(ct[2]=Je,ct[3]=0):3==pt&&(ct[2]=Qe,ct[3]=Math.PI/2)),ct[0]=Math.sin(ct[3]),ct[1]=-Math.cos(ct[3]);for(var yt=[],pt=0;pt<lt.length;++pt){var bt=lt[pt],vt=lt[(pt-1+lt.length)%lt.length],wt=bt[0],St=bt[1],xt=bt[2],Ct=bt[3];a2=vt[0],b2=vt[1],c2=vt[2],rad2=vt[3];var Tt=(St*c2-b2*xt)/(b2*wt-St*a2),Pt=(wt*c2-a2*xt)/(a2*St-wt*b2);yt.push([Tt/He,Pt/je])}Be||(ke(yt),pe()),q(Fe,[yt])}).catch(Ue=>{pe(),q(Fe,[null,Ue])})};var Pe=function(Fe,Be,De,Re,Ue){for(var We=0;We<Fe.length;++We){for(var He=Fe[We],je=!1,ze=0;ze<Be.length;++ze){var qe=Be[ze],Ge=qe[3],Xe=He[3],Ye=Ge-Xe;Ye>Math.PI?Xe+=2*Math.PI:Ye<-Math.PI&&(Xe-=2*Math.PI);var Ke=Math.abs(Ge-Xe),$e=Math.abs(qe[2]-He[2]);if(Ke<Re&&$e<De){je=!0;var Qe=qe[4],Je=He[4],Ze=Qe+Je;qe[2]=(qe[2]*Qe+He[2]*Je)/Ze;var et;et=(Ge*Qe+Xe*Je)/Ze,et>Math.PI?et-=2*Math.PI:et<=-Math.PI&&(et+=2*Math.PI),qe[3]=et,qe[4]=Math.min(Ze,Ue);break}}je||Be.push([null,null,He[2],He[3],He[4]])}},Ee=Q.find('.kPainterPerspect');Se.hideFreeTransformBorderDirectly=function(){Ee.hide()};var Ie=Q.find('> .kPainterPerspect > .kPainterPerspectCvs')[0],ke=Se.setCornerPos=V.setFreeTransformCornerPos=function(Fe){if('perspect'==re){var Be=ie.kPainterZoom,De=I(ie).getTransform(),Re=ie.width*Be,Ue=ie.height*Be;if(0==De.a*De.d||0!=De.b*De.c){var We=Re;Re=Ue,Ue=We}for(var He=Q.borderBoxRect(),je=He.width/2,ze=He.height/2,qe=0;qe<Ne.length;++qe){var Ge=Ne[qe],Xe=I(Ge).attr('data-index'),Ye=Fe[Xe],Ke=Re*Ye[0],$e=Ue*Ye[1];Ke<-je?Ke=-je:Ke>je&&(Ke=je),$e<-ze?$e=-ze:$e>ze&&($e=ze),Ge.style.left=Ke+'px',Ge.style.right=-Ke+'px',Ge.style.top=$e+'px',Ge.style.bottom=-$e+'px'}Oe(),Ee.show()}},_e=V.getFreeTransformCornerPos=function(){var Fe=ie.kPainterZoom,Be=I(ie).getTransform(),De=ie.width*Fe,Re=ie.height*Fe;if(0==Be.a*Be.d||0!=Be.b*Be.c){var Ue=De;De=Re,Re=Ue}for(var We=[],He=0,je;He<Ne.length;++He)je=Ne[He],We.push([parseFloat(je.style.left)/De,parseFloat(je.style.top)/Re]);return We},Oe=function(){var Fe=Q.borderBoxRect();Ie.width=Math.round(Fe.width),Ie.height=Math.round(Fe.height);for(var Be=[],De=0;De<Ne.length;++De)Be.push([Math.round(parseFloat(Ne[De].style.left)+Fe.width/2),Math.round(parseFloat(Ne[De].style.top)+Fe.height/2)]);var Re=Ie.getContext('2d');Re.strokeStyle='#5bbfff',Re.lineWidth=3,Re.setLineDash([10,5]),Re.beginPath(),Re.moveTo(Be[0][0],Be[0][1]),Re.lineTo(Be[1][0],Be[1][1]),Re.lineTo(Be[2][0],Be[2][1]),Re.lineTo(Be[3][0],Be[3][1]),Re.closePath(),Re.stroke()},Ne=Q.find('> .kPainterPerspect > .kPainterPerspectCorner');Ne.css('left','0'),Ne.css('top','0'),Ne.css('right','0'),Ne.css('bottom','0');var Le=null,Ve,Ae,Me;Ne.on('touchstart touchcancel touchend mousedown',function(Fe){Me=this,Fe.preventDefault();var Be=Fe.originalEvent.targetTouches;if(!Be){if(!se)se='mouse';else if('mouse'!=se)return;Be=[{pageX:Fe.originalEvent.clientX,pageY:Fe.originalEvent.clientY}]}else if(Be.length)if(!se)se='touch';else if('touch'!=se)return;1==Be.length?('perspect'==re&&(re='perspectCornerMoving'),Le=Be[0].identifier,Ve=Be[0].pageX,Ae=Be[0].pageY):0==Be.length&&'perspectCornerMoving'==re&&(se=null,re='perspect',ke(_e()))}),Q.on('touchmove mousemove',function(Fe){Fe.preventDefault();var Be=Fe.originalEvent.targetTouches;if(!Be){if('mouse'!=se)return;Be=[{pageX:Fe.originalEvent.clientX,pageY:Fe.originalEvent.clientY}]}else if('touch'!=se)return;if(1==Be.length){if('perspectCornerMoving'!=re||Le!=Be[0].identifier)return;var De=Ve,Re=Ae;Ve=Be[0].pageX,Ae=Be[0].pageY;var Ue=Ve-De,We=Ae-Re,He=parseFloat(Me.style.left)+Ue,je=parseFloat(Me.style.top)+We;Me.style.left=He+'px',Me.style.right=-He+'px',Me.style.top=je+'px',Me.style.bottom=-je+'px',Oe()}}),Q.on('mouseup',function(){'mouse'!=se||'perspectCornerMoving'==re&&(se=null,re='perspect')}),Q.on('mouseleave',function(Fe){if('mouse'==se){var Be=Fe.originalEvent;Be.buttons&&('perspectCornerMoving'!=re||(se=null,re='perspect'))}}),V.freeTransformAsync=function(Fe,Be,De){if(!De){if(!Se.isFreeTransformMode){var Re=Error('You haven\'t enter the freeTransform mode.');return void q(Fe,[!1,Re])}le()}var Ue=O._cv;Be=Be||_e();var We=Be;return 5e-3>Math.abs(We[0][0]-0.5)&&5e-3>Math.abs(We[0][1]-0.5)&&5e-3>Math.abs(We[1][0]+0.5)&&5e-3>Math.abs(We[1][1]-0.5)&&5e-3>Math.abs(We[2][0]+0.5)&&5e-3>Math.abs(We[2][1]+0.5)&&5e-3>Math.abs(We[3][0]-0.5)&&5e-3>Math.abs(We[3][1]+0.5)?(pe(),void q(Fe,[!0])):void Te(De||Ce(2048),2048).then(He=>{var je=new Ue.matFromArray(He,Ue.CV_8UC4);Ue.cvtColor(je,je,Ue.ColorConversionCodes.COLOR_RGBA2RGB.value,0);for(var ze=new Ue.Mat.zeros(4,1,Ue.CV_32FC2),qe=ze.data32f(),Ge=0,Xe;Ge<Be.length;++Ge)Xe=Be[Ge],qe[2*Ge]=Math.round((Xe[0]+0.5)*je.cols),qe[2*Ge+1]=Math.round((Xe[1]+0.5)*je.rows);var Ye=qe[2]-qe[0],Ke=qe[3]-qe[1],$e=qe[4]-qe[2],Qe=qe[5]-qe[3],Je=qe[6]-qe[4],Ze=qe[7]-qe[5],et=qe[0]-qe[6],tt=qe[1]-qe[7],nt=Math.round(Math.max(Math.sqrt(Ye*Ye+Ke*Ke),Math.sqrt(Je*Je+Ze*Ze))),it=Math.round(Math.max(Math.sqrt($e*$e+Qe*Qe),Math.sqrt(et*et+tt*tt))),ot=new Ue.Mat.zeros(4,1,Ue.CV_32FC2),at=ot.data32f();at[2]=nt,at[4]=nt,at[5]=it,at[7]=it;var rt=Ue.getPerspectiveTransform(ze,ot);Ue.delMat(ze),Ue.delMat(ot);var st=new Ue.Mat.zeros(it,nt,Ue.CV_8UC3),dt=new Ue.Scalar(218,231,255);Ue.warpPerspective(je,st,rt,[st.rows,st.cols],Ue.InterpolationFlags.INTER_LINEAR.value,Ue.BORDER_CONSTANT,dt),Ue.delMat(je),Ue.delMat(rt),Ue.delMat(dt);for(var lt=new ImageData(nt,it),pt=st.channels(),ct=st.data(),Ge=0,ut=0;Ge<ct.length;Ge+=pt,ut+=4)lt.data[ut]=ct[Ge],lt.data[ut+1]=ct[Ge+1%pt],lt.data[ut+2]=ct[Ge+2%pt],lt.data[ut+3]=255;Ue.delMat(st),ie.width=nt,ie.height=it;var ht=ie.getContext('2d');ht.putImageData(lt,0,0),W(ie,'image/jpeg').then(gt=>{De?q(Fe,[gt]):(he.setImgStyleFit(),ge.pushStack({srcBlob:gt,saveFormat:'image/jpeg',freeTransform:Be}),ge.updateCvsAsync(!0,!1,function(){ke([[-0.5,-0.5],[0.5,-0.5],[0.5,0.5],[-0.5,0.5]]),pe(),q(Fe,[!0])}))})}).catch(He=>{De?q(Fe,[null,He]):(pe(),q(Fe,[!1,He]))})},Se.isFreeTransformMode=!1,V.enterFreeTransformModeAsync=function(Fe){if(!O.cvHasLoaded){var Be=Error('Cv module not loaded.');return Be.name=T.OperationNotSupported.toString(),void q(Fe,[!1,Be])}if(!de){var Be=Error(P.getOperationNotSupportedString('editing'));return Be.name=T.OperationNotSupported.toString(),void q(Fe,[!1,Be])}re='perspect',le(),setTimeout(function(){me.hideCropRect(),ge.updateCvsAsync(!0,!1,function(){ke([[-0.5,-0.5],[0.5,-0.5],[0.5,0.5],[-0.5,0.5]]),Ee.show(),pe(),ge.needAlwaysTrueTransform=!0,Se.isFreeTransformMode=!0,X[0].classList.contains('dynamsoft-display-as-none')?q(Fe,[!0]):(V.funcShowToolKit('.detection-tool-kit'),Y[0].classList.add('dynamsoft-display-as-none'),V.refresh(()=>{q(Fe,[!0])}))})},0)},V.exitFreeTransformModeAsync=function(Fe){if(!Se.isFreeTransformMode){var Be=Error(P.getOperationNotSupportedString('freeTransform'));return Be.name=T.OperationNotSupported.toString(),void q(Fe,[!1,Be])}Ee.hide(),ge.updateCvsAsync(!1,!1,function(){V.isAutoShowCropUI&&me.showCropRect(),re=null,ge.needAlwaysTrueTransform=!1,Se.isFreeTransformMode=!1,V.funcShowToolKit('.edit-tool-kit'),X[0].classList.contains('dynamsoft-display-as-none')||(Y[0].classList.remove('dynamsoft-display-as-none'),V.refresh()),q(Fe,[!0])})}})()},ye=new function(){this;let xe=Q.find('.kPainterVideoMdl'),Ce=I('<div class="dynamsoft-video-viewer-inner"></div>');xe[0].appendChild(Ce[0]);let Te=N.videoViewer,Ee=!1;if(Te.strHtmlElementId){xe=I(document.getElementById(Te.strHtmlElementId)),xe[0].appendChild(Ce[0]);const Ne=Te.funcVideoViewerWrapper&&Te.funcVideoViewerWrapper();Ne&&(Ce[0].appendChild(Ne),Ce=I(Ne)),Ee=!0}const Ie=I('<video autoplay="true" preload="auto" src="" muted="true" playsinline="true" style="width: 100%; height: 100%;"></video>')[0];Ce[0].appendChild(Ie),C.isString(Te.strFacingMode)?(Te.strFacingMode=Te.strFacingMode.trim().toLowerCase(),'environment'!==Te.strFacingMode&&'user'!==Te.strFacingMode&&'left'!==Te.strFacingMode&&'right'!==Te.strFacingMode&&(Te.strFacingMode='environment')):Te.strFacingMode='environment';const ke=!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia);V.isUserMediaValid=function(){return ke};let _e,Oe;V.videoSettings={video:{width:{ideal:2048},height:{ideal:2048},facingMode:{ideal:Te.strFacingMode}}},V.grabVideo=function(Ne){return new Promise(function(Le,Ve){const Ae=document.createElement('canvas');Ae.width=Ie.videoWidth,Ae.height=Ie.videoHeight;const Me=Ae.getContext('2d');if(Me.drawImage(Ie,0,0),!_e||Oe){const Fe=Error(P.getVideoStreamNotAvailableString());return Fe.name=P.getVideoStreamNotAvailableCode(),void Ve(Fe)}return Ne?void V.addImageAsync(Ae).then(Fe=>{V.showVideoFrameInToolbar(Le,Fe)}).catch(Fe=>{Ve(Fe)}):void Le(Ae)})},V.showVideoFrameInToolbar=function(Ne,Le){if(!X[0].classList.contains('dynamsoft-display-as-none')&&!X.find('.video-tool-kit')[0].classList.contains('dynamsoft-display-as-none')){const Ve=URL.createObjectURL(Le),Ae=X.find('.icn-video-frame img')[0];Ae.onload=function(){Ae.onload=Ae.onerror=null,X.find('.icn-video-frame')[0].style.visibility='',X.find('.icn-video-ok > .icn-wrapper > img')[0].src=`${N.strAssetsPath}/images/icn_ok.png`,URL.revokeObjectURL(Ve),Ne(Le)},Ae.onerror=function(){Ae.onload=Ae.onerror=null,URL.revokeObjectURL(Ve),Ne(Le)},Ae.src=Ve}},V.showVideoViewer=()=>{Ee||Q.find('.kPainterImgsDiv')[0].classList.add('dynamsoft-display-as-none'),xe[0].classList.remove('dynamsoft-display-as-none')},V.hideVideoViewer=()=>{Ee||Q.find('.kPainterImgsDiv')[0].classList.remove('dynamsoft-display-as-none'),xe[0].classList.add('dynamsoft-display-as-none')},V.playVideoAsync=function(){return new Promise(function(Ne,Le){if(!ke){const Ve=Error(P.getVideoStreamNotSupportedString());return Ve.name=P.getVideoStreamNotSupportedCode(),Oe=JSON.parse(JSON.stringify(Ve)),Oe.message=Ve.message,void Le(Ve)}return!Oe&&_e?(Ie.play(),void Ne(_e)):void navigator.mediaDevices.getUserMedia(V.videoSettings).then(function(Ve){Ie.onloadedmetadata=function(){if(Ie.onloadedmetadata=Ie.onerror=null,Ie.play().then().catch(Ae=>{_e=null;var Ae=Error(P.getLoadVideoStreamFailedString());return Ae.name=P.getLoadVideoStreamFailedCode(),Oe=JSON.parse(JSON.stringify(Ae)),Oe.message=Ae.message,void Le(Ae)}),Oe=null,Ne(_e),!X[0].classList.contains('dynamsoft-display-as-none')){if(V.refresh(),0>window.getComputedStyle(X[0]).getPropertyValue('height').indexOf('px'))return;const Me=40;bPortrait=window.innerWidth<window.innerHeight,iWidth=parseFloat(window.getComputedStyle(X[0]).getPropertyValue('width')),iHeight=parseFloat(window.getComputedStyle(X[0]).getPropertyValue('height'));let De=40;De=bPortrait?Me/353*iWidth:Me/300*iHeight;const Re=X.find('.icn-video-frame')[0];Re.setAttribute('style',`width:${De}px !important; height:${De}px !important;`),Re.style.visibility='hidden'}V.funcShowToolKit('.video-tool-kit'),Y[0].classList.add('dynamsoft-display-as-none')},Ie.onerror=function(){Ie.onloadedmetadata=Ie.onerror=null,_e=null;const Me=Error(P.getLoadVideoStreamFailedString());Me.name=P.getLoadVideoStreamFailedCode(),Oe=JSON.parse(JSON.stringify(Me)),Oe.message=Me.message,Le(Me)},Ie.srcObject=Ve,_e=Ve}).catch(function(Ve){_e=null;const Ae=Error(Ve.message||P.getAcquireVideoStreamFailedString());Ae.name=P.getAcquireVideoStreamFailedCode(),Oe=JSON.parse(JSON.stringify(Ae)),Oe.message=Ae.message,Le(Ae)})})},V.pauseVideo=()=>{return null==Oe?(Ie.pause(),[P.getOkCode(),P.getOkString()]):[T[Oe.name],Oe.message]},V.stopVideo=function(){return null==Oe?(Ie.srcObject&&Ie.srcObject.stop(),Ie.srcObject=null,_e=null,X.find('.icn-video-frame')[0].style.visibility='hidden',X.find('.icn-video-ok > .icn-wrapper > img')[0].src=`${N.strAssetsPath}/images/icn_close.png`,V.funcShowToolKit('.entry-tool-kit'),V.funcShowSubsidiaryToolKit('.view-mode-tool-kit'),!X[0].classList.contains('dynamsoft-display-as-none')&&Y[0].classList.contains('dynamsoft-display-as-none')&&0<V.getCount()&&(Y[0].classList.remove('dynamsoft-display-as-none'),X.find('.icn-edit, .icn-download').forEach(Ne=>{Ne.classList.remove('dynamsoft-display-as-none')}),V.refresh()),[P.getOkCode(),P.getOkString()]):[T[Oe.name],Oe.message]}},be=new function(){function Se(wt){if(wt){const St=window.innerWidth<window.innerHeight;if(it[0].style.left='unset',it[0].style.top='unset',it[0].style.right='unset',it[0].style.bottom='unset',it[0].style.width='auto',it[0].style.padding='',St)it[0].style.left='0',it[0].style.bottom='100%',it[0].style.padding='3% 8%';else{it[0].style.right='100%',it[0].style.bottom='0',it[0].style.padding='20% 150%';const xt=parseFloat(window.getComputedStyle(G).getPropertyValue('width')),Ct=parseFloat(J[0].style.width);it[0].style.width=xt*Ct/100+'px'}it[0].classList.remove('dynamsoft-display-as-none')}else it[0].classList.add('dynamsoft-display-as-none')}function xe(wt){if(!(X[0].classList.contains('dynamsoft-display-as-none')||0>window.getComputedStyle(X[0]).getPropertyValue('height').indexOf('px'))){let St=parseFloat(window.getComputedStyle(X[0]).getPropertyValue('height')),xt=parseFloat(window.getComputedStyle(X[0]).getPropertyValue('width')),Ct=window.innerWidth<window.innerHeight,Tt=353,Pt=300;(I(wt)||X.find('.icn-wrapper > img')).forEach(Et=>{if(!(0>=Et.naturalWidth||0>=Et.naturalHeight)&&(at(Et,4)===X[0]||at(Et,5)===X[0])){const It=Et.parentNode;if(Ct)Et.width=Et.naturalWidth/1.9/Tt*xt,Et.height=Et.width/Et.naturalWidth*Et.naturalHeight,It.style.height='65%',It.style.margin='0';else{Et.width=Et.naturalWidth/1.9/Pt*St,Et.height=Et.width/Et.naturalWidth*Et.naturalHeight,It.style.height=Et.height+'px';let Ot=7/353*St;Ot=0>=Ot?2:Ot,It.style['margin-bottom']=`${Ot}px`}}}),Y[0].classList.contains('dynamsoft-display-as-none')||0>window.getComputedStyle(Y[0]).getPropertyValue('height').indexOf('px')||(St=parseFloat(window.getComputedStyle(Y[0]).getPropertyValue('height')),xt=parseFloat(window.getComputedStyle(Y[0]).getPropertyValue('width')),Tt=353,Pt=300,Y.find('.icn-wrapper > img').forEach(Et=>{if(!(0>=Et.naturalWidth||0>=Et.naturalHeight)&&(at(Et,4)===Y[0]||at(Et,5)===Y[0])){Et.parentNode;Ct?(Et.width=Et.naturalWidth/1.9/Tt*xt,Et.height=Et.width/Et.naturalWidth*Et.naturalHeight):(Et.width=Et.naturalWidth/1.9/Pt*St,Et.height=Et.width/Et.naturalWidth*Et.naturalHeight)}}))}}function Ce(){if(!(X[0].classList.contains('dynamsoft-display-as-none')||0>window.getComputedStyle(X[0]).getPropertyValue('height').indexOf('px'))){const wt=(It,kt)=>{return Tt=kt/It*(St?Ct:xt),Tt=25<Tt?25:Tt,Tt=8>Tt?8:Tt,Tt},St=window.innerWidth<window.innerHeight;let xt=parseFloat(window.getComputedStyle(X[0]).getPropertyValue('height')),Ct=parseFloat(window.getComputedStyle(X[0]).getPropertyValue('width')),Tt=10;if(Tt=wt(St?340:300,15),X[0].style['font-size']=Tt+'px',Y[0].classList.contains('dynamsoft-display-as-none')||0>window.getComputedStyle(Y[0]).getPropertyValue('height').indexOf('px'))return void(Y[0].style['font-size']=Tt+3+'px');xt=parseFloat(window.getComputedStyle(Y[0]).getPropertyValue('height')),Ct=parseFloat(window.getComputedStyle(Y[0]).getPropertyValue('width'));Tt=wt(St?330:300,17),Y[0].style['font-size']=Tt+'px'}}function Te(wt){var St=parseFloat((V.viewObj.imageViewer.getConsumedImageSize(!0,wt)/1024/1024).toFixed(2)),xt=parseFloat((V.viewObj.imageViewer.getConsumedImageSize(!1,wt)/1024/1024).toFixed(2));0==St&&(St=0.01),0==xt&&(xt=0.01),xt<St&&(xt=St),st.find('.sp-snapshot-size')[0].innerHTML=St,st.find('.sp-org-file-size')[0].innerHTML=xt}function Pe(wt,St,xt){var Ct='';xt=xt||7;var Tt=new Date;Tt.setTime(Tt.getTime()+1e3*(60*(60*(24*xt)))),Ct='; expires='+Tt.toUTCString(),document.cookie=wt+'='+St+Ct+'; path=/'}const Ie=I(['<div class="dynamsoft-toolbar-loader dynamsoft-display-as-none">',`<img class="dynamsoft-toolbar-loader-content" src="${N.strAssetsPath}/images/loading.gif" alt="Loading title="Loading">`,'</div>'].join(''));X.append(Ie),V.showToolbarLoader=function(wt){wt?Ie[0].classList.remove('dynamsoft-display-as-none'):Ie[0].classList.add('dynamsoft-display-as-none')};const ke=I(['<div class="flex-box flex-tool-bar-container view-mode-tool-kit tool-kit dynamsoft-display-as-none">','<div class="flex-tool-bar-item icn-delete">','<div class="icn-wrapper dynamsoft-display-as-none">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_delete.png" alt="Delete" title="Delete">`,'</div>','<span class="sp-button-text">Delete</span>','</div>','<div class="flex-tool-bar-item icn-nav">','<span class="sp-button-text">1/1</span>','</div>','<div class="flex-tool-bar-item icn-upload">','<div class="icn-wrapper  dynamsoft-display-as-none">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_upload.png" alt="Upload" title="Upload">`,'</div>','<span class="sp-button-text">Upload</span>','</div>','</div>','<div class="flex-box flex-tool-bar-container edit-mode-tool-kit tool-kit dynamsoft-display-as-none">','<div class="flex-tool-bar-item icn-cancel-edit">','<div class="icn-wrapper dynamsoft-display-as-none">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_white_close.png" alt="Back" title="Back">`,'</div>','<span class="sp-button-text">Back</span>','</div>','<div class="flex-tool-bar-item icn-save-edit">','<div class="icn-wrapper  dynamsoft-display-as-none">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_white_ok.png" alt="OK" title="OK">`,'</div>','<span class="sp-button-text">OK</span>','</div>','</div>'].join('')),_e=I(['<div class="flex-box flex-tool-bar-container entry-tool-kit tool-kit">','<div class="flex-tool-bar-item icn-camera">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_camera.png" alt="Grab Image" title="Grab Image">`,'</div>','<span class="sp-button-text">Grab Image</span>','</div>','<div class="flex-tool-bar-item icn-video">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_video.png" alt="Show Video" title="Show Video">`,'</div>','<span class="sp-button-text">Show Video</span>','</div>','<div class="flex-tool-bar-item icn-edit dynamsoft-display-as-none">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_edit.png" alt="Edit Tools" title="Edit Tools">`,'</div>','<span class="sp-button-text">Edit Tools</span>','</div>','<div class="flex-tool-bar-item icn-download dynamsoft-display-as-none">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_download.png" alt="Download" title="Download">`,'</div>','<span class="sp-button-text">Download</span>','</div>','</div>','<div class="flex-box flex-tool-bar-container video-tool-kit tool-kit dynamsoft-display-as-none">','<div class="flex-tool-bar-item icn-video-frame">','<div class="icn-wrapper">','<img>','</div>','<span class="sp-button-text">Frame</span>','</div>','<div class="flex-tool-bar-item icn-grab-from-video">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_grab_from_video.png" alt="Grab" title="Grab">`,'</div>','<span class="sp-button-text">Grab</span>','</div>','<div class="flex-tool-bar-item icn-video-ok">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_close.png" alt="Ok" title="Ok">`,'</div>','<span class="sp-button-text">Ok</span>','</div>','</div>','<div class="flex-box flex-tool-bar-container edit-tool-kit tool-kit dynamsoft-display-as-none">','<div class="flex-tool-bar-item icn-rotate">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_rotate.png" alt="Rotate" title="Rotate">`,'</div>','<span class="sp-button-text">Rotate</span>','</div>','<div class="flex-tool-bar-item icn-flip">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_flip.png" alt="Flip" title="Flip">`,'</div>','<span class="sp-button-text">Flip</span>','</div>','<div class="flex-tool-bar-item icn-detection">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_detection.png" alt="Detection" title="Detection">`,'</div>','<span class="sp-button-text">Detection</span>','</div>','<div class="flex-tool-bar-item icn-crop">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_crop.png" alt="Crop" title="Crop">`,'</div>','<span class="sp-button-text">Crop</span>','</div>','</div>','<div class="flex-box flex-tool-bar-container detection-tool-kit tool-kit dynamsoft-display-as-none">','<div class="flex-tool-bar-item icn-detection-back">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_close.png" alt="Back" title="Back">`,'</div>','<span class="sp-button-text">Back</span>','</div>','<div class="flex-tool-bar-item icn-detection-auto dynamsoft-display-as-none">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_detection_auto.png" alt="Automatic" title="Automatic">`,'</div>','<span class="sp-button-text">Automatic</span>','</div>','<div class="flex-tool-bar-item icn-detection-ok">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_ok.png" alt="Ok" title="Ok">`,'</div>','<span class="sp-button-text">Ok</span>','</div>','</div>','<div class="flex-box flex-tool-bar-container crop-tool-kit tool-kit dynamsoft-display-as-none">','<div class="flex-tool-bar-item icn-crop-back">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_close.png" alt="Back" title="Back">`,'</div>','<span class="sp-button-text">Back</span>','</div>','<div class="flex-tool-bar-item icn-undo disabled dynamsoft-display-as-none">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_undo.png" alt="Undo" title="Undo">`,'</div>','<span class="sp-button-text">Undo</span>','</div>','<div class="flex-tool-bar-item icn-redo disabled dynamsoft-display-as-none">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_redo.png" alt="Redo" title="Redo">`,'</div>','<span class="sp-button-text">Redo</span>','</div>','<div class="flex-tool-bar-item icn-crop-ok">','<div class="icn-wrapper">','<span class="vertical-allign-helper"></span>',`<img onload="__fixToolbarIcnSize(this);" src="${N.strAssetsPath}/images/icn_ok.png" alt="Ok" title="Ok">`,'</div>','<span class="sp-button-text">Ok</span>','</div>','</div>','<div class="dynamsoft-hint dynamsoft-display-as-none">To use automatic border detection, please download the required module first.</div>'].join('')),Oe=N.toolbar;let Ne=Oe.funcToolbarWrapper&&Oe.funcToolbarWrapper();Ne&&Ne instanceof HTMLDivElement?X[0].appendChild(Ne):Ne=X[0],_e.forEach(wt=>{Ne.appendChild(wt)});let Le=Oe.funcSubsidiaryToolbarWrapper&&Oe.funcSubsidiaryToolbarWrapper();Le&&Le instanceof HTMLDivElement?Y[0].appendChild(Le):Le=Y[0],ke.forEach(wt=>{Le.appendChild(wt)});const Ve=X.find('.icn-camera'),Ae=X.find('.icn-video'),Me=X.find('.icn-edit'),Fe=X.find('.icn-download'),Be=X.find('.icn-grab-from-video'),De=X.find('.icn-video-ok'),Re=X.find('.icn-flip'),Ue=X.find('.icn-rotate'),We=X.find('.icn-detection'),He=X.find('.icn-detection-back'),je=X.find('.icn-detection-auto'),ze=X.find('.icn-detection-ok'),qe=X.find('.icn-crop'),Ge=X.find('.icn-crop-back'),Xe=X.find('.icn-undo'),Ye=X.find('.icn-redo'),Ke=X.find('.icn-crop-ok'),$e=Y.find('.icn-delete'),Qe=Y.find('.icn-nav .sp-button-text'),Je=Y.find('.icn-upload'),Ze=Y.find('.icn-cancel-edit'),et=Y.find('.icn-save-edit'),tt=V.funcShowToolKit=wt=>{X.find('.tool-kit').forEach(St=>{St.classList.add('dynamsoft-display-as-none')}),X.find(wt)[0]&&X.find(wt)[0].classList.remove('dynamsoft-display-as-none'),V.makeToolBarAdaptive()},nt=V.funcShowSubsidiaryToolKit=wt=>{Y.find('.tool-kit').forEach(St=>{St.classList.add('dynamsoft-display-as-none')}),Y.find(wt)[0]&&Y.find(wt)[0].classList.remove('dynamsoft-display-as-none'),V.makeToolBarAdaptive()};Ve.on('click',()=>{V.showFileChooseWindow()}),V.isUserMediaValid()||Ae[0].classList.add('dynamsoft-display-as-none'),Ae.on('click',()=>{V.showToolbarLoader(!0),V.playVideoAsync().then(()=>{V.showVideoViewer(),V.showToolbarLoader(!1)}).catch(wt=>{V.showErrorPopup(!0,wt.message),V.showToolbarLoader(!1)})}),Be.on('click',()=>{V.showToolbarLoader(!0),V.grabVideo(!0).then(()=>{V.showToolbarLoader(!1)}).catch(wt=>{V.showErrorPopup(!0,wt.message),V.showToolbarLoader(!1)})}),De.on('click',()=>{V.hideVideoViewer(),V.stopVideo()}),Me.on('click',()=>{mt(),V.showToolbarLoader(!0),V.enterEditAsync().then(()=>{V.hideCropRect(),V.showToolbarLoader(!1)}).catch(wt=>{V.showErrorPopup(!0,wt.message),V.showToolbarLoader(!1)})}),Fe.on('click',()=>{V.download('mobile_browser_capture').catch(wt=>{V.showErrorPopup(!0,wt.message)})}),Re.on('click',()=>{V.mirror()}),Ue.on('click',()=>{ot(),V.rotateRight()}),O.bWasmValid?O.loadCvScriptAsync():We[0].classList.add('dynamsoft-display-as-none');const it=X.find('.dynamsoft-hint'),ot=V.removeActiveState=function(){We.find('img')[0].src=`${N.strAssetsPath}/images/icn_detection.png`,We.find('.sp-button-text')[0].innerHTML='Detection',We[0].classList.remove('active'),Se(!1)};We.on('click',()=>{const wt=()=>{X[0].classList.contains('dynamsoft-display-as-none')||X.find('.edit-tool-kit')[0].classList.contains('dynamsoft-display-as-none')||V.enterFreeTransformModeAsync((St,xt)=>{St?V.documentDetectAsync((Ct,Tt)=>{null===Ct&&V.showErrorPopup(!0,Tt.message),V.showToolbarLoader(!1)}):(V.showErrorPopup(!0,xt.message),V.showToolbarLoader(!1))})};return O.cvHasLoaded?void wt():0<=We.find('img')[0].src.indexOf('icn_detection')?(We.find('img')[0].src=`${N.strAssetsPath}/images/icn_download_blue.png`,We.find('.sp-button-text')[0].innerHTML='Detection',We[0].classList.add('active'),void Se(!0)):void(V.showToolbarLoader(!0),O.loadCvScriptAsync().then(()=>{ot(),wt()}).catch(St=>{ot(),V.showErrorPopup(!0,St.message),V.showToolbarLoader(!1)}))}),He.on('click',()=>{V.showToolbarLoader(!0),V.exitFreeTransformModeAsync((wt,St)=>{wt?V.hideCropRect():V.showErrorPopup(!0,St.message),V.showToolbarLoader(!1)})}),ze.on('click',()=>{V.showToolbarLoader(!0),V.freeTransformAsync(()=>{V.exitFreeTransformModeAsync(()=>{V.hideCropRect(),V.showToolbarLoader(!1)})})}),qe.on('click',()=>{V.showCropRect()}),Ge.on('click',()=>{V.hideCropRect()}),Ke.on('click',()=>{V.showToolbarLoader(!0),V.cropAsync().then(()=>{V.hideCropRect(),V.showToolbarLoader(!1)}).catch(wt=>{V.showErrorPopup(!0,wt.message),V.showToolbarLoader(!1)})}),$e.on('click',()=>{ut?V.showDeletePopup(!0):V.del()}),V._onNumChange=(wt,St)=>{Qe[0].innerHTML=1>St?'':`${wt+1}/${St}`},Je.on('click',()=>{V.showUploadPopup(!0)}),Ze.on('click',()=>{V.cancelEdit(),ft()}),et.on('click',()=>{V.showToolbarLoader(!0),V.saveEditAsync(!0).then(()=>{V.showToolbarLoader(!1),ft()}).catch(wt=>{V.showErrorPopup(!0,wt.message),V.showToolbarLoader(!1),ft()})}),V.showToolbar=()=>{X[0].classList.remove('dynamsoft-display-as-none'),0<V.getCount()&&X.find('.crop-tool-kit')[0].classList.contains('dynamsoft-display-as-none')&&X.find('.detection-tool-kit')[0].classList.contains('dynamsoft-display-as-none')&&Y[0].classList.remove('dynamsoft-display-as-none'),V.refresh()},V.hideToolbar=()=>{X[0].classList.add('dynamsoft-display-as-none'),Y[0].classList.add('dynamsoft-display-as-none'),V.refresh()};const at=(wt,St)=>{if(wt){for(let xt=0;xt<St;xt++)wt=wt&&wt.parentNode;return wt}};window.__fixToolbarIcnSize=function(wt){X[0].classList.contains('dynamsoft-display-as-none')||xe(wt)},V.makeToolBarAdaptive=function(){if(!X[0].classList.contains('dynamsoft-display-as-none')){const wt=window.innerWidth>=window.innerHeight;Y.find('.flex-tool-bar-item').forEach(St=>{I(St).children().forEach(xt=>{xt.classList.add('dynamsoft-display-as-none')}),wt?I(St).children('.icn-wrapper')[0]&&I(St).children('.icn-wrapper')[0].classList.remove('dynamsoft-display-as-none'):I(St).children('.sp-button-text')[0]&&I(St).children('.sp-button-text')[0].classList.remove('dynamsoft-display-as-none'),Y.find('.icn-nav > .sp-button-text')[0].classList.remove('dynamsoft-display-as-none')}),xe(),Ce(),it[0].classList.contains('dynamsoft-display-as-none')||Se(!0)}};const rt=I([`<div class="div-upload-image-popup dynamsoft-display-as-none" id="divUploadImagePopup${+new Date}">`,`<div class="div-upload-image-popup-content">`,`<div class="popup-title">Upload Image</div>`,`<div class="file-name-zone">`,`<div class="div-file-name-hint">File Name</div>`,`<input class="tb-file-name" type="text" value="MbcFile">`,`</div>`,`<div class="file-type-zone">`,`<div class="div-file-type-hint">File Type</div>`,`<label><div class="flex-box"><input class="radio-file-type-jpg" type="radio" value="image/jpeg" name="imageType" checked="checked"><span> JPEG</span></div></label>`,`<label><div class="flex-box"><input class="radio-file-type-png" type="radio" value="image/png" name="imageType"><span> PNG</span></div></label>`,`<label><div class="flex-box"><input class="radio-file-type-one-pdf" type="radio" value="application/pdf" name="imageType"><span> 1-page PDF</span></div></label>`,`<label><div class="flex-box"><input class="radio-file-type-n-pdf" type="radio" value="application/pdf" name="imageType"><span> multi-pages PDF</span></div></label>`,`</div>`,`<div class="file-size-zone">`,`<div class="div-file-size-title">Upload Size</div>`,`<label class="lbl-snapshot"><div class="flex-box"><input type="radio" class="radio-snapshot" name="imageSize" checked="checked"><span> Thumbnail</span>`,`<span class="sp-file-size-info">(about <span class="sp-snapshot-size">XX</span> MB)</span></div>`,`</label>`,`<label class="lbl-org-file"><div class="flex-box"><input type="radio" class="radio-org" name="imageSize"><span> Original</span>`,`<span class="sp-file-size-info">(about <span class="sp-org-file-size">XX</span> MB)</span></div>`,`</label>`,`</div>`,`<div class="operation-zone flex-box">`,`<a class="btn-cancel">`,`<span>Cancel</span>`,`</a>`,`<a class="btn-upload">`,`<span>Upload</span>`,`</a>`,`</div>`,`</div>`,`</div>`].join('')),st=rt.find('.div-upload-image-popup-content');X.append(rt),st.find('.btn-upload')[0].onclick=()=>{const xt=C.isString(N.toolbar.strUploadPage)?N.toolbar.strUploadPage.trim():'upload.ashx',Ct=I(`#${rt[0].id} .file-type-zone input:checked`)[0].value,Tt=I(`#${rt[0].id} .file-type-zone input:checked`)[0].classList.contains('radio-file-type-n-pdf'),Pt=I(`#${rt[0].id} .file-size-zone input:checked`)[0].classList.contains('radio-snapshot'),Et=st.find('.tb-file-name')[0].value.trim();''===Et&&(Et='MbcFile'),V.showToolbarLoader(!0),V.showUploadPopup(!1),V.viewObj.imageViewer.uploadAsync(xt,Ct,Pt,Tt,Et).then(It=>{setTimeout(()=>{yt(It)},0),V.showToolbarLoader(!1)}).catch(It=>{V.showErrorPopup(!0,It.message),V.showToolbarLoader(!1)})},st.find('.btn-cancel')[0].onclick=()=>{V.showUploadPopup(!1)},st.find('.file-type-zone input').on('click',function(){Te(this.classList.contains('radio-file-type-n-pdf'))}),V.showUploadPopup=function(wt){if(wt){const St=I(`#${rt[0].id} .file-type-zone input:checked`)[0];Te(St.classList.contains('radio-file-type-n-pdf'));const xt=window.innerWidth<window.innerHeight;if(xt){const Tt=294;let It=Tt/375*window.innerWidth,kt=374/558*window.innerHeight;It=350<It?350:It,st[0].style.width=`${It}px`,st[0].style.height=`auto`,st[0].style['font-size']=`${14/Tt*It}px`,st[0].style.padding=`${23/Tt*It}px `+`${20/Tt*It}px `+`${30/Tt*It}px `+`${20/Tt*It}px`,st.find('.popup-title')[0].style['font-size']=`${17/Tt*It}px`,st.find('.file-name-zone')[0].style['padding-top']=`${25/Tt*It}px`,st.find('.div-file-name-hint')[0].style['padding-bottom']=`${10/Tt*It}px`,st.find('.tb-file-name')[0].style.width=`${220/Tt*It}px`,st.find('.tb-file-name')[0].style.height=`${26/Tt*It}px`,st.find('.tb-file-name')[0].style.padding=`${5/Tt*It}px`,st.find('.tb-file-name')[0].style['font-size']=st[0].style['font-size'],st.find('.file-type-zone')[0].style['padding-top']=`${20/Tt*It}px`,st.find('.file-type-zone')[0].style['padding-bottom']=`${20/Tt*It}px`,st.find('.file-type-zone label').forEach(_t=>{_t.style['padding-top']=`${10/Tt*It}px`,_t.style['margin-right']=`${15/Tt*It}px`}),st.find('.file-size-zone')[0].style['padding-top']=`${20/Tt*It}px`,st.find('.file-size-zone label').forEach(_t=>{_t.style['padding-top']=`${10/Tt*It}px`,_t.style['margin-right']=`${20/Tt*It}px`}),st.find('.operation-zone')[0].style['padding-top']=`${30/Tt*It}px`,st.find('.operation-zone > a').forEach(_t=>{_t.style.width=`${95/Tt*It}px`,_t.style.height=`${35/Tt*It}px`})}else{const Et=324;let It=444/558*window.innerWidth,kt=Et/375*window.innerHeight;kt=390<kt?390:kt,st[0].style.width=`auto`,st[0].style.height=`auto`,st[0].style['font-size']=`${14/Et*kt}px`,st[0].style.padding=`${15/Et*kt}px`,st.find('.popup-title')[0].style['font-size']=`${17/Et*kt}px`,st.find('.file-name-zone')[0].style['padding-top']=`${15/Et*kt}px`,st.find('.div-file-name-hint')[0].style['padding-bottom']=`${10/Et*kt}px`,st.find('.tb-file-name')[0].style.width=`${220/Et*kt}px`,st.find('.tb-file-name')[0].style.height=`${26/Et*kt}px`,st.find('.tb-file-name')[0].style.padding=`${5/Et*kt}px`,st.find('.tb-file-name')[0].style['font-size']=st[0].style['font-size'],st.find('.file-type-zone')[0].style['padding-top']=`${15/Et*kt}px`,st.find('.file-type-zone')[0].style['padding-bottom']=`${15/Et*kt}px`,st.find('.file-type-zone label').forEach(_t=>{_t.style['padding-top']=`${10/Et*kt}px`,_t.style['margin-right']=`${20/Et*kt}px`}),st.find('.file-size-zone')[0].style['padding-top']=`${15/Et*kt}px`,st.find('.file-size-zone label').forEach(_t=>{_t.style['padding-top']=`${10/Et*kt}px`,_t.style['margin-right']=`${15/Et*kt}px`}),st.find('.operation-zone')[0].style['padding-top']=`${15/Et*kt}px`,st.find('.operation-zone > a').forEach(_t=>{_t.style.width=`${95/Et*kt}px`,_t.style.height=`${35/Et*kt}px`})}rt[0].classList.remove('dynamsoft-display-as-none')}else rt[0].classList.add('dynamsoft-display-as-none')};const dt=I(['<div class="div-delete-image-popup dynamsoft-display-as-none">','<div class="div-delete-image-popup-content">',`<div class="btn-cancel"><img src="${N.strAssetsPath}/images/icn_close_popup.png"></div>`,'<span class="sp-title">Delete</span>','<span class="sp-message">Are you sure to delete this image?</span>',`<label class="lbl-option flex-box"><input type="checkbox" class="ckb-option"> Don't show this message again</label>`,'<div class="btn-ok">','<span>Delete</span>','</div>','</div>','</div>'].join('')),lt=dt.find('.div-delete-image-popup-content');X.append(dt),V.showDeletePopup=function(wt){if(wt){const xt=293;let Pt=xt/375*window.innerWidth,Et=181/558*window.innerHeight;Pt=350<Pt?350:Pt,lt[0].style.width=`${Pt}px`,lt[0].style.height=`auto`,lt.find('.btn-cancel')[0].style.padding=`${15/xt*Pt}px `+`${15/xt*Pt}px`,lt.find('.btn-cancel > img')[0].style.width=`${14/xt*Pt}px`,lt.find('.btn-cancel > img')[0].style.height=`${14/xt*Pt}px`,lt.find('.sp-title')[0].style['font-size']=`${17/xt*Pt}px`,lt.find('.sp-title')[0].style.padding=`${22/xt*Pt}px `+`0 0 ${20/xt*Pt}px`,lt.find('.sp-message')[0].style.padding=`${20/xt*Pt}px`,lt.find('.sp-message')[0].style['padding-bottom']=`${10/xt*Pt}px`,lt.find('.sp-message')[0].style['font-size']=`${14/xt*Pt}px`,lt.find('.lbl-option')[0].style.padding=`0 0 ${20/xt*Pt}px ${20/xt*Pt}px`,lt.find('.lbl-option')[0].style['font-size']=`${13/xt*Pt}px`,lt.find('.btn-ok')[0].style['line-height']=lt.find('.btn-ok')[0].style.height=`${42/xt*Pt}px`,lt.find('.btn-ok')[0].style['font-size']=`${17/xt*Pt}px`,dt[0].classList.remove('dynamsoft-display-as-none')}else dt[0].classList.add('dynamsoft-display-as-none')};const pt='showDeletePopupKey',ct=window.localStorage.getItem(pt)||function(wt){for(var St=wt+'=',xt=document.cookie.split(';'),Ct=0,Tt;Ct<xt.length;Ct++){for(Tt=xt[Ct];' '==Tt.charAt(0);)Tt=Tt.substring(1,Tt.length);if(0==Tt.indexOf(St))return Tt.substring(St.length,Tt.length)}return null}(pt);let ut='false'!==ct;dt.find('.btn-cancel').on('click',function(){V.showDeletePopup(!1)}),dt.find('.btn-ok').on('click',function(){ut=!dt.find('.lbl-option input')[0].checked;try{window.localStorage.setItem(pt,ut)}catch(wt){Pe(pt,ut)}V.del()});const ht=I(['<div class="div-error-image-popup dynamsoft-display-as-none">','<div class="div-error-image-popup-content">',`<div class="btn-cancel"><img src="${N.strAssetsPath}/images/icn_close_popup.png"></div>`,'<span class="sp-title">Error</span>','<span class="sp-message"></span>','<div class="btn-ok">','<span>OK</span>','</div>','</div>','</div>'].join('')),gt=ht.find('.div-error-image-popup-content');X.append(ht),V.showErrorPopup=function(wt,St){if(wt){const Ct=293;let Et=Ct/375*window.innerWidth,It=181/558*window.innerHeight;Et=350<Et?350:Et,gt[0].style.width=`${Et}px`,gt[0].style.height=`auto`,gt.find('.btn-cancel')[0].style.padding=`${15/Ct*Et}px `+`${15/Ct*Et}px`,gt.find('.btn-cancel > img')[0].style.width=`${14/Ct*Et}px`,gt.find('.btn-cancel > img')[0].style.height=`${14/Ct*Et}px`,gt.find('.sp-title')[0].style['font-size']=`${17/Ct*Et}px`,gt.find('.sp-title')[0].style.padding=`${22/Ct*Et}px `+`0 0 ${20/Ct*Et}px`,gt.find('.sp-message')[0].style.padding=`${20/Ct*Et}px`,gt.find('.sp-message')[0].style['font-size']=`${14/Ct*Et}px`,gt.find('.sp-message')[0].innerText=St,gt.find('.btn-ok')[0].style['line-height']=gt.find('.btn-ok')[0].style.height=`${42/Ct*Et}px`,gt.find('.btn-ok')[0].style['font-size']=`${17/Ct*Et}px`,ht[0].classList.remove('dynamsoft-display-as-none')}else ht[0].classList.add('dynamsoft-display-as-none')},ht.find('.btn-cancel, .btn-ok').on('click',function(){V.showErrorPopup(!1)});const mt=C.isFunction(N.toolbar.onEnterEdit)?N.toolbar.onEnterEdit:function(){},ft=C.isFunction(N.toolbar.onExitEdit)?N.toolbar.onExitEdit:function(){},yt=C.isFunction(N.toolbar.onImageUploaded)?N.toolbar.onImageUploaded:function(){},bt=10;let vt=N.toolbar.iDimension;C.isNumber(vt)&&vt===vt?(vt=0>vt?bt:vt,vt=100<vt?100:vt):vt=bt,N.toolbar.iDimension=vt},ve=new function(){I(window).on('resize orientationchange',function(){V.refresh()});let Se=null;V.refresh=function(Oe){null!=Se&&(clearTimeout(Se),Se=null),Se=setTimeout(()=>{const Ne=[];Ne.push(new Promise(Le=>{setTimeout(()=>{V.makeToolBarAdaptive(),Le()},50)})),Ne.push(new Promise(Le=>{setTimeout(()=>{V.refreshThumbnailViewer(),Le()},50)})),new Promise(Le=>{setTimeout(()=>{V.layout(),V.updateUIOnResize(!1),Le()},0)}).then(()=>{Promise.all(Ne).then(()=>{Oe&&Oe()})}),V.positionIllustrationImg(!0),V.showUploadPopup(!X.find('.div-upload-image-popup')[0].classList.contains('dynamsoft-display-as-none')),V.showDeletePopup(!X.find('.div-delete-image-popup')[0].classList.contains('dynamsoft-display-as-none')),Se=null},100)};const xe=new C.ObservableArray([]);xe.addEventListener('itemadded',function(Oe){V.setThumbnailWrapperDimension(),V.addThumbnail(Oe.index,Oe.item)}),xe.addEventListener('itemset',function(Oe){V.updateThumbnail(Oe.index,Oe.item)}),xe.addEventListener('itemremoved',function(Oe){V.removeThumbnail(Oe.index)}),V.addThumbnailBase64=(Oe,Ne)=>{xe.splice(Oe,0,''),V.getThumbnailBase64Async(Oe,Ne).then(Le=>{xe[Oe]=Le.strBase64})},V.removeThumbnailBase64=Oe=>{xe.splice(Oe,1)},V.updateThumbnailBase64=(Oe,Ne)=>{V.getThumbnailBase64Async(Oe,Ne).then(Le=>{xe[Oe]=Le.strBase64})};let Ce=null,Te=[];const Pe=I(document.getElementById(N.thumbnailViewer.strHtmlElementId))||I(G).find('.dynamsoft-mobile-thumbnail-viewer'),Ee=Pe[0].classList.contains('dynamsoft-mobile-thumbnail-viewer'),Ie=document.createElement('canvas'),ke=Ie.getContext('2d');V.getThumbnailBase64Async=(Oe,Ne)=>{return new Promise(function(Le){const Ve=Ce.iMaxThumbnailWidth,Ae=Ce.iMaxThumbnailHeight;let Me;const Fe=()=>{let Be;const De=Me.naturalWidth,Re=Me.naturalHeight;Ve/De>Ae/Re?(Be=Ve>De?De:Ve,Ie.width=Be,Ie.height=Re/De*Be):(Be=Ae>Re?Re:Ae,Ie.height=Be,Ie.width=De/Re*Be)};if(Ne.kPainterBlob){const Be=new Image;Be.onload=function(){Be.onload=Be.onerror=null,Me=Be,Fe(),ke.drawImage(Be,0,0,Be.naturalWidth,Be.naturalHeight,0,0,Ie.width,Ie.height),URL.revokeObjectURL(Be.src),Le({id:Oe,strBase64:Ie.toDataURL()})},Be.onerror=function(De){Be.onload=Be.onerror=null,URL.revokeObjectURL(Be.src),console.log(De)},Be.src=URL.createObjectURL(Ne.kPainterBlob)}else we.getEntityAsync(Ne.kPainterBlobId).then(Be=>{const De=new Image;De.onload=function(){De.onload=De.onerror=null,Me=De,Fe(),ke.drawImage(De,0,0,De.naturalWidth,De.naturalHeight,0,0,Ie.width,Ie.height),URL.revokeObjectURL(De.src),Le({id:Oe,strBase64:Ie.toDataURL()})},De.onerror=function(Re){De.onload=De.onerror=null,URL.revokeObjectURL(De.src),console.log(Re)},De.src=URL.createObjectURL(Be)})})};let _e=null;V.loadThumbnailViewerConf=Oe=>{(function(){Oe=Oe||{},Oe.strHtmlElementId=Oe.strHtmlElementId||'';const je=300;let ze=parseInt(Oe.iMaxThumbnailWidth),qe=parseInt(Oe.iMaxThumbnailHeight);ze!==ze&&(ze=null),qe!==qe&&(qe=null),C.isNumber(ze)||C.isNumber(qe)?C.isNumber(ze)?C.isNumber(qe)?(0>=ze&&(ze=je),0>=qe&&(qe=je)):(0>=ze&&(ze=je),qe=ze):(0>=qe&&(qe=je),ze=qe):ze=qe=je,Oe.iMaxThumbnailWidth=ze,Oe.iMaxThumbnailHeight=qe;const Ge=10;0!==Oe.iThumbnailMargin&&(Oe.iThumbnailMargin=Oe.iThumbnailMargin||Ge),0>Oe.iThumbnailMargin&&(Oe.iThumbnailMargin=Ge),Oe.thumbnailViewMode=Oe.thumbnailViewMode||{};let Xe=parseInt(Oe.thumbnailViewMode.iColumn),Ye=parseInt(Oe.thumbnailViewMode.iRow);Ye!==Ye&&(Ye=null),Xe!==Xe&&(Xe=null),C.isNumber(Xe)||C.isNumber(Ye)?C.isNumber(Xe)?C.isNumber(Ye)?(!(-1===Ye||0<Ye)&&(Ye=null),1>Xe&&(Xe=null),1<Xe&&-1!==Ye&&(Ye=null),1===Xe&&!(-1===Ye||1<=Ye)&&(Ye=null)):1>Xe&&(Xe=null):!(-1===Ye||0<Ye)&&(Ye=null):Xe=Ye=null,Oe.thumbnailViewMode.iColumn=Xe,Oe.thumbnailViewMode.iRow=Ye,Oe.thumbnailSelectedClass=Oe.thumbnailSelectedClass||'dynamsoft-thumbnail-selected',Oe.thumbnailUnselectedClass=Oe.thumbnailUnselectedClass||'dynamsoft-thumbnail-unselected';const Ke='left';Oe.strPosition=(Oe.strPosition||Ke).trim().toLowerCase(),'left'!==Oe.strPosition&&'right'!==Oe.strPosition&&'top'!==Oe.strPosition&&'bottom'!==Oe.strPosition&&(Oe.strPosition=Ke),0!==Oe.iDimension&&(Oe.iDimension=Oe.iDimension||(Oe.bFloat?100:30)),0>Oe.iDimension&&(Oe.iDimension=Oe.bFloat?100:30),100<Oe.iDimension&&(Oe.iDimension=100),C.isBoolean(Oe.bFloat)||(Oe.bFloat=!0),Oe.toggle=Oe.toggle||{},C.isBoolean(Oe.bSlide)||(Oe.toggle.bSlide=!0);const $e=500;0!==Oe.toggle.iDuration&&(Oe.toggle.iDuration=Oe.toggle.iDuration||$e),0>Oe.toggle.iDuration&&(Oe.toggle.iDuration=$e)})();let Ne=!1;xe.length=0,Te=[],Pe[0].innerHTML='';let Le=I('<div class="dynamsoft-mobile-thumbnail-viewer-inner"></div>');Pe[0].appendChild(Le[0]);const Ve=Oe.funcThumbnailViewerWrapper&&Oe.funcThumbnailViewerWrapper();Ve&&(Le.append(Ve),Le=I(Ve));const Ae=Oe.funcThumbnailWrapper||function(He){const je=document.createElement('div');return je.style.width=je.style.height='100%',je.appendChild(He),je},Me=function(He){return He=He||document.createElement('div'),He.className='dynamsoft-mobile-thumbnail-wrapper',Fe?(He.style.margin=iMarginPercent+'%',He.style.display='block'):(He.style.margin=`${iMarginPercent}% ${iMarginPercent}% ${iMarginPercent}% 0`,He.style.display='inline-block'),He.style.width=De+'%',He.style.height=Re+'%',He};let Be=iMarginPercent=Oe.iThumbnailMargin,Fe,De,Re;V.setThumbnailWrapperDimension=function(){if(!(0>window.getComputedStyle(Le[0]).getPropertyValue('height').indexOf('px')||Ne)){const He=parseInt(window.getComputedStyle(Le[0]).getPropertyValue('width'))-parseInt(window.getComputedStyle(Le[0]).getPropertyValue('padding-left'))-parseInt(window.getComputedStyle(Le[0]).getPropertyValue('padding-right')),je=parseInt(window.getComputedStyle(Le[0]).getPropertyValue('height'))-parseInt(window.getComputedStyle(Le[0]).getPropertyValue('padding-top'))-parseInt(window.getComputedStyle(Le[0]).getPropertyValue('padding-bottom'));if(He&&je){Ne=!0;const ze=Oe.thumbnailViewMode.iRow,qe=Oe.thumbnailViewMode.iColumn;Fe=C.isNumber(ze)&&-1===ze?!1:C.isNumber(ze)&&1<=ze||(C.isNumber(qe)&&1<qe?!1:je>He);const Ge={iHeight:667,iThumbnail:5},Xe={iWidth:375,iThumbnail:3};if(iNumThumbnailVisible=Fe?C.isNumber(ze)?ze:Math.round(je/Ge.iHeight*Ge.iThumbnail):C.isNumber(qe)?qe:Math.round(He/Xe.iWidth*Xe.iThumbnail),1>iNumThumbnailVisible&&(iNumThumbnailVisible=1),Le[0].style.position='relative',Fe){const Ke=100*((100-iNumThumbnailVisible*(100*(1/je)))/(iNumThumbnailVisible+1)/100*je/He);iMarginPercent=Be>Ke?Ke:Be;const $e=He*iMarginPercent/100;De=100-2*iMarginPercent,Re=(100-(iNumThumbnailVisible+1)*(100*($e/je)))/iNumThumbnailVisible,Le[0].style['overflow-x']='hidden',Le[0].style['overflow-y']='auto',Le[0].style['white-space']='normal'}else{const Ke=100*((100-iNumThumbnailVisible*(100*(1/He)))/(iNumThumbnailVisible+1)/100*He/je);iMarginPercent=Be>Ke?Ke:Be;const $e=je*iMarginPercent/100,Qe=100*($e/He);Re=100-2*iMarginPercent,De=(100-(iNumThumbnailVisible+1)*Qe)/iNumThumbnailVisible,iMarginPercent=Qe,Le[0].style.overflow='auto',Le[0].style['white-space']='nowrap'}}}},V.addThumbnail=(He,je)=>{const ze=I(Me());ze.on('click',function(){for(let Ye=0;Ye<Te.length;Ye++)if(Te[Ye]===this){if(V.isEditing())break;V.changePage(Ye),V.setMarginLeftForFirstHorizonThumbnail(),V.selectThumbnail(oe),V.setSelectedThumbnailVisible(),V.toggleThumbnailViewerNav()}});const qe=new Image;qe.className='dynamsoft-thumbnail-img',je&&(qe.onload=function(){qe.onload=qe.onerror=null},qe.onerror=function(Ye){qe.onload=qe.onerror=null,console.log(Ye)},qe.src=je);const Ge=Le.children()[He];Ge?Le[0].insertBefore(ze[0],Ge):Le[0].appendChild(ze[0]);const Xe=Ae(qe);Xe.classList.add('dynamsoft-mobile-thumbnail-wrapper-inner'),ze[0].appendChild(Xe),Te.splice(He,0,ze[0]),V.setMarginLeftForFirstHorizonThumbnail(),V.selectThumbnail(oe),V.setSelectedThumbnailVisible(),V.toggleThumbnailViewerNav()},V.removeThumbnail=He=>{const je=Te[He];je&&(Te.splice(He,1),I(je).remove(),V.setMarginLeftForFirstHorizonThumbnail(),V.selectThumbnail(oe),V.setSelectedThumbnailVisible(),V.toggleThumbnailViewerNav())},V.setMarginLeftForFirstHorizonThumbnail=()=>{!Fe&&Te[0]&&(Te[0].style['margin-left']=iMarginPercent+'%')},V.updateThumbnail=(He,je)=>{const ze=Te[He];if(ze){const qe=I(ze).find('.dynamsoft-thumbnail-img'),Ge=qe[0];Ge&&(Ge.onload=function(){Ge.onload=Ge.onerror=null},Ge.onerror=function(Xe){Ge.onload=Ge.onerror=null,console.error(Xe)},Ge.src=je,V.setMarginLeftForFirstHorizonThumbnail(),V.selectThumbnail(oe),V.setSelectedThumbnailVisible())}},V.selectThumbnail=He=>{const je=Ce.thumbnailSelectedClass,ze=Ce.thumbnailUnselectedClass;Te.forEach(Ge=>{const Xe=I(Ge).find('.dynamsoft-mobile-thumbnail-wrapper-inner')[0];Xe&&(Xe.classList.remove(je),Xe.classList.add(ze))});const qe=Te[He]&&I(Te[He]).find('.dynamsoft-mobile-thumbnail-wrapper-inner')[0];qe&&(qe.classList.remove(ze),qe.classList.add(je))},V.setSelectedThumbnailVisible=()=>{const He=Le[0];if(!(0>window.getComputedStyle(He,null).getPropertyValue('height').indexOf('px'))){const je=Te[oe];if(je){const ze=parseFloat(window.getComputedStyle(He,null).getPropertyValue('width')),qe=parseFloat(window.getComputedStyle(He,null).getPropertyValue('height')),Ge=He.scrollTop,Xe=He.scrollLeft,Ye=parseFloat(window.getComputedStyle(je,null).getPropertyValue('width')),Ke=parseFloat(window.getComputedStyle(je,null).getPropertyValue('height')),$e=0===oe?0:je.offsetTop,Qe=$e+Ke+parseFloat(window.getComputedStyle(je,null).getPropertyValue('margin-bottom')),Je=0===oe?0:je.offsetLeft,Ze=Je+Ye+parseFloat(window.getComputedStyle(je,null).getPropertyValue('margin-right'));if(Fe){if($e>=Ge&&Qe<=Ge+qe)return;He.scrollTop=$e<Ge?$e:Qe-qe}else{if(Je>=Xe&&Ze<=Xe+ze)return;He.scrollLeft=Je<Xe?Je:Ze-ze}}}},V.setupThumbnailViewerNav=()=>{0===Pe.find('.dynamsoft-thumbnail-viewer-nav').length&&(Pe.append(I(['<div class="dynamsoft-thumbnail-viewer-nav previous">',`<img src="${N.strAssetsPath}/images/icn-thumbnail-left.png">`,'</div>'].join(''))),Pe.append(I(['<div class="dynamsoft-thumbnail-viewer-nav next">',`<img src="${N.strAssetsPath}/images/icn-thumbnail-right.png">`,'</div>'].join('')))),Le[0].onscroll||(Le[0].onscroll=V.toggleThumbnailViewerNav);const He=Pe.find('.dynamsoft-thumbnail-viewer-nav.previous'),je=Pe.find('.dynamsoft-thumbnail-viewer-nav.next');if(Fe?(He[0].style.width=je[0].style.width='100%',He[0].style.height=je[0].style.height='3%',He.find('img')[0].src=`${N.strAssetsPath}/images/icn-thumbnail-top.png`,je.find('img')[0].src=`${N.strAssetsPath}/images/icn-thumbnail-bottom.png`):(He[0].style.width=je[0].style.width='6%',He[0].style.height=je[0].style.height='100%',He.find('img')[0].src=`${N.strAssetsPath}/images/icn-thumbnail-left.png`,je.find('img')[0].src=`${N.strAssetsPath}/images/icn-thumbnail-right.png`),0<=window.getComputedStyle(Pe[0]).getPropertyValue('width').indexOf('px')){const ze=parseFloat(window.getComputedStyle(Pe[0]).getPropertyValue('width')),qe=parseFloat(window.getComputedStyle(Pe[0]).getPropertyValue('height'));Fe?25>0.03*ze&&(He[0].style.height=je[0].style.height='25px'):20>0.06*ze&&(He[0].style.width=je[0].style.width='20px')}He[0].onclick=()=>{Fe?Le[0].scrollTop-=Le[0].offsetHeight:Le[0].scrollLeft-=Le[0].offsetWidth},je[0].onclick=()=>{Fe?Le[0].scrollTop+=Le[0].offsetHeight:Le[0].scrollLeft+=Le[0].offsetWidth},Pe.find('.dynamsoft-thumbnail-viewer-nav').forEach(ze=>{ze.classList.remove('horizon','vertical')}),Pe.find('.dynamsoft-thumbnail-viewer-nav').forEach(ze=>{ze.classList.add(Fe?'vertical':'horizon','dynamsoft-display-as-none')}),V.toggleThumbnailViewerNav()},V.toggleThumbnailViewerNav=()=>{const He=Pe.find('.dynamsoft-thumbnail-viewer-nav.previous'),je=Pe.find('.dynamsoft-thumbnail-viewer-nav.next');0===He.length||0===je.length||(Pe.find('.dynamsoft-thumbnail-viewer-nav').forEach(ze=>{ze.classList.add('dynamsoft-display-as-none')}),Fe?(0<Le[0].scrollTop&&He[0].classList.remove('dynamsoft-display-as-none'),Le[0].scrollTop+Le[0].offsetHeight<Le[0].scrollHeight&&je[0].classList.remove('dynamsoft-display-as-none')):(0<Le[0].scrollLeft&&He[0].classList.remove('dynamsoft-display-as-none'),Le[0].scrollLeft+Le[0].offsetWidth<Le[0].scrollWidth&&je[0].classList.remove('dynamsoft-display-as-none'),Le[0].scrollTop=0))},V.showThumbnailViewer=()=>{Pe[0].classList.remove('dynamsoft-display-as-none'),V.refresh()},V.hideThumbnailViewer=()=>{Pe[0].classList.add('dynamsoft-display-as-none'),V.refresh()},V.layout=()=>{let He;const je=I(G).find('.dynamsoft-mobile-thumbnail-viewer')[0],ze=J[0],qe=X[0],Ge=Y[0],Xe=window.innerWidth>=window.innerHeight,Ye=je.classList.contains('dynamsoft-display-as-none')?0:Oe.iDimension,Ke=Oe.strPosition,$e=Oe.bFloat;let Qe=iToolBarDimension=iSubsidiaryToolBarDimension=0;iToolBarDimension=qe.classList.contains('dynamsoft-display-as-none')?0:N.toolbar.iDimension,iSubsidiaryToolBarDimension=Ge.classList.contains('dynamsoft-display-as-none')?0:iToolBarDimension/2,G.classList.remove('flex-box','flex-flow-column','flex-flow-row');if((Ze=>{Ze.forEach(et=>{et instanceof HTMLElement&&(et.style.position='relative',et.style['z-index']='unset',et.style.order='unset',et.style.float='none',et.style.top='unset',et.style.left='unset',et.style.right='unset',et.style.bottom='unset')})})([je,ze,qe,Ge]),I(G).find('.tool-kit').forEach(Ze=>{Ze instanceof HTMLElement&&(Ze.classList.remove('flex-flow-row','flex-flow-column'),Ze.classList.add(Xe?'flex-flow-column':'flex-flow-row'))}),Xe){if($e){switch(je.style.position='absolute',je.style['z-index']='1',Ke){case'top':case'bottom':je.style.top='0','bottom'===Ke&&(je.style.top=`${100-Ye}%`),je.style.height=`${Ye}%`,je.style.width='100%';break;case'right':case'left':default:je.style.top='0',je.style.width=`${Ye}%`,je.style.height='100%','right'===Ke&&(je.style.left=`${100-Ye}%`);}ze.style.display='inline-block',He=100-iToolBarDimension-iSubsidiaryToolBarDimension,ze.style.width=`${0>He?0:He}%`,ze.style.height='100%',qe.style.display='inline-block',qe.style.width=`${iToolBarDimension}%`,qe.style.height='100%',Ge.style.display='inline-block',Ge.style.width=`${iSubsidiaryToolBarDimension}%`,Ge.style.height='100%'}else switch(Qe=je.classList.contains('dynamsoft-display-as-none')?0:Ye,Ke){case'right':je.style.width=`${Qe}%`,je.style.height='100%',He=100-Qe-iToolBarDimension-iSubsidiaryToolBarDimension,ze.style.width=`${0>He?0:He}%`,ze.style.height='100%',qe.style.width=`${iToolBarDimension}%`,qe.style.height='100%',Ge.style.width=`${iSubsidiaryToolBarDimension}%`,Ge.style.height='100%',G.classList.add('flex-box','flex-flow-row'),Ge.style.order='1',ze.style.order='2',je.style.order='3',qe.style.order='4';break;case'top':case'bottom':'bottom'===Ke&&(je.style.position='absolute',je.style.top=`${100-Ye}%`),je.style.height=`${Qe}%`,je.style.width='100%',ze.style.position='absolute',ze.style.left=`${iSubsidiaryToolBarDimension}%`,He=100-Qe,ze.style.height=`${0>He?0:He}%`,He=100-iToolBarDimension-iSubsidiaryToolBarDimension,ze.style.width=`${0>He?0:He}%`,qe.style.position='absolute',qe.style.left=`${100-iToolBarDimension}%`,qe.style.top=`${Qe}%`,'bottom'===Ke&&(qe.style.top='0'),He=100-Qe,qe.style.height=`${0>He?0:He}%`,qe.style.width=`${iToolBarDimension}%`,Ge.style.position='absolute',Ge.style.left=`0`,Ge.style.top=`${Qe}%`,'bottom'===Ke&&(Ge.style.top='0'),He=100-Qe,Ge.style.height=`${0>He?0:He}%`,Ge.style.width=`${iSubsidiaryToolBarDimension}%`;break;case'left':default:je.style.float='left',je.style.width=`${Qe}%`,je.style.height='100%',ze.style.float='left',He=100-Qe-iToolBarDimension-iSubsidiaryToolBarDimension,ze.style.width=`${0>He?0:He}%`,ze.style.height='100%',qe.style.float='right',qe.style.width=`${iToolBarDimension}%`,qe.style.height='100%',Ge.style.float='left',Ge.style.width=`${iSubsidiaryToolBarDimension}%`,Ge.style.height='100%';}}else if($e){switch(je.style.position='absolute',je.style['z-index']='1',Ke){case'top':case'bottom':je.style.top='bottom'===Ke?`${100-Ye}%`:`0`,je.style.height=`${Ye}%`,je.style.width='100%';break;case'right':case'left':default:je.style.width=`${Ye}%`,je.style.height='100%',je.style.top='0','right'===Ke&&(je.style.left=`${100-Ye}%`);}ze.style.width='100%',He=100-iToolBarDimension-iSubsidiaryToolBarDimension,ze.style.height=`${0>He?0:He}%`,qe.style.width='100%',qe.style.height=`${iToolBarDimension}%`,Ge.style.width='100%',Ge.style.height=`${iSubsidiaryToolBarDimension}%`}else switch(Qe=je.classList.contains('dynamsoft-display-as-none')?0:Ye,Ke){case'right':je.style.float='right',je.style.width=`${Qe}%`,je.style.height='100%',ze.style.float='left',He=100-Qe,ze.style.width=`${0>He?0:He}%`,He=100-iToolBarDimension-iSubsidiaryToolBarDimension,ze.style.height=`${0>He?0:He}%`,qe.style.float='left',He=100-Qe,qe.style.width=`${0>He?0:He}%`,qe.style.height=`${iToolBarDimension}%`,Ge.style.float='left',He=100-Qe,Ge.style.width=`${0>He?0:He}%`,Ge.style.height=`${iSubsidiaryToolBarDimension}%`;break;case'top':case'bottom':if(je.style.height=`${Qe}%`,je.style.width='100%',He=100-Qe-iToolBarDimension-iSubsidiaryToolBarDimension,ze.style.height=`${0>He?0:He}%`,ze.style.width='100%',qe.style.height=`${iToolBarDimension}%`,qe.style.width='100%',Ge.style.height=`${iSubsidiaryToolBarDimension}%`,Ge.style.width='100%','top'===Ke)break;G.classList.add('flex-box','flex-flow-column'),Ge.style.order='1',ze.style.order='2',je.style.order='3',qe.style.order='4';break;case'left':default:je.style.float='left',je.style.width=`${Qe}%`,je.style.height='100%',ze.style.float='right',He=100-Qe,ze.style.width=`${0>He?0:He}%`,He=100-iToolBarDimension-iSubsidiaryToolBarDimension,ze.style.height=`${0>He?0:He}%`,qe.style.float='right',He=100-Qe,qe.style.width=`${0>He?0:He}%`,qe.style.height=`${iToolBarDimension}%`,Ge.style.float='right',He=100-Qe,Ge.style.width=`${He}%`,Ge.style.height=`${iSubsidiaryToolBarDimension}%`;}},V.refreshThumbnailViewer=()=>{Ne=!1,V.setThumbnailWrapperDimension(),V.setupThumbnailViewerNav(),Te.forEach(He=>{Me(He)});for(let He=Te.length;He<xe.length;He++)V.addThumbnail(He,xe[He]);V.setMarginLeftForFirstHorizonThumbnail(),V.setSelectedThumbnailVisible()},V.slide=(He,je)=>{let ze,qe;switch(Oe.strPosition){case'top':ze=parseInt(Pe[0].style.height),qe=0;break;case'bottom':if(ze=He?100:100-Oe.iDimension,qe=He?100-Oe.iDimension:100,qe===parseInt(Pe[0].style.top))return void(je&&setTimeout(()=>{je()},0));break;case'left':ze=parseInt(Pe[0].style.width),qe=0;break;case'right':default:ze=parseInt(Pe[0].style.left),qe=100;}if(ze===qe)return void(je&&setTimeout(()=>{je()},0));const Ge=()=>{setTimeout(()=>{if(ze===qe)return void(je&&setTimeout(()=>{je()},0));switch(Oe.strPosition){case'top':break;case'bottom':ze>qe?ze--:ze++,Pe[0].style.top=`${ze}%`;break;case'left':break;case'right':default:}Ge()},50)};Ge()},_e&&(_e._queue.length=0);const Ue=new TaskQueue,We=function(He,je,ze){V.getThumbnailBase64Async(He,je).then(qe=>{xe[He]=qe.strBase64,ze&&ze()})};for(let He=0;He<ae.length;He++)xe.push(''),Ue.push(We,null,[He,ae[He],function(){Ue.next()}]);_e=Ue},V.mixThumbnailViewerConf=function(Oe){Ce=Ce||{},Ce.thumbnailViewMode=Ce.thumbnailViewMode||{},Ce.toggle=Ce.toggle||{};const Ne=parseInt(Oe.iMaxThumbnailWidth);C.isNumber(Ne)&&Ne===Ne&&(Ce.iMaxThumbnailWidth=Ne);const Le=parseInt(Oe.iMaxThumbnailHeight);C.isNumber(parseInt(Oe.iMaxThumbnailHeight))&&(Ce.iMaxThumbnailHeight=Le);const Ve=parseInt(Oe.iThumbnailMargin);if(C.isNumber(Ve)&&Ve===Ve&&(Ce.iThumbnailMargin=Ve),C.isObject(Oe.thumbnailViewMode)){const Me=parseInt(Oe.thumbnailViewMode.iColumn);C.isNumber(Me)&&Me===Me&&(Ce.thumbnailViewMode.iColumn=Me);const Fe=parseInt(Oe.thumbnailViewMode.iRow);C.isNumber(Fe)&&Fe===Fe&&(Ce.thumbnailViewMode.iRow=Fe)}C.isFunction(Oe.funcThumbnailViewerWrapper)&&(Ce.funcThumbnailViewerWrapper=Oe.funcThumbnailViewerWrapper),C.isFunction(Oe.funcThumbnailWrapper)&&(Ce.funcThumbnailWrapper=Oe.funcThumbnailWrapper),C.isString(Oe.thumbnailSelectedClass)&&(Ce.thumbnailSelectedClass=Oe.thumbnailSelectedClass),C.isString(Oe.thumbnailUnselectedClass)&&(Ce.thumbnailUnselectedClass=Oe.thumbnailUnselectedClass),C.isString(Oe.strPosition)&&(Ce.strPosition=Oe.strPosition);const Ae=parseInt(Oe.iDimension);if(C.isNumber(Ae)&&Ae===Ae&&(Ce.iDimension=Ae),C.isBoolean(Oe.bFloat)&&(Ce.bFloat=Oe.bFloat),C.isObject(Oe.toggle)){C.isBoolean(Oe.toggle.bSlide)&&(Ce.toggle.bSlide=Oe.toggle.bSlide);const Me=parseInt(Oe.toggle.iDuration);C.isNumber(Me)&&Me===Me&&(Ce.toggle.iDuration=Me)}},V.updateThumbnailViewerConf=function(Oe){V.mixThumbnailViewerConf(Oe),V.loadThumbnailViewerConf(Ce),V.refresh()},V.getThumbnailConf=()=>{return JSON.parse(JSON.stringify(Ce))},V.updateThumbnailViewerConf(N.thumbnailViewer)},we=V.imageDataRepo=new g.lib.ImageDataRepo};O._doCallbackNoBreak=function(N,L){if(N)try{N.apply(window,L||[])}catch(V){setTimeout(function(){throw V},0)}},function(){const N=new TaskQueue;O.cvFolder=O.cvFolder==void 0?'js':O.cvFolder,O.cvHasLoaded=!1,O.bWasmValid=!!window.WebAssembly&&!(/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&/\(.+\s11_2_([2-6]).*\)/.test(navigator.userAgent)),loadCvScriptInnerAsync=function(L){let V;return O.bWasmValid?O.cvHasLoaded?void O._doCallbackNoBreak(L,[!0]):void(O._CVModule={cvFolder:O.cvFolder,preRun:[],postRun:[],isRuntimeInitialized:!1,onRuntimeInitialized:function(){O.cvHasLoaded=!0,console.log('Runtime is ready!'),O._doCallbackNoBreak(L,[!0]),L=null},onExit:function(){O._doCallbackNoBreak(L,[!1,Error('Exit. Make sure to server wasm as \'application/wasm\'.')]),L=null},onAbort:function(){O._doCallbackNoBreak(L,[!1,Error('Abort. Make sure to server wasm as \'application/wasm\'.')]),L=null},print:function(F){console.log(F)},printErr:function(F){console.log(F)},setStatus:function(F){console.log(F)},totalDependencies:0},O._CVModule.setStatus('Downloading...'),window.WebAssembly?E.loadScript(O.cvFolder+'/dynamsoft.mbc.wasm.js?v=20180413.1').catch(()=>{O._doCallbackNoBreak(L,[!1,Error('Cv module HttpError')])}):E.loadScript(O.cvFolder+'/cv.js?v=20180413.1').catch(()=>{O._doCallbackNoBreak(L,[!1,Error('Cv module HttpError')])})):(V=Error(P.getWasmNotSupportedString()),V.name=P.getWasmNotSupportedCode(),void O._doCallbackNoBreak(L,[!1,V]))},O.loadCvScriptAsync=function(){return new Promise(function(L,V){N.push(loadCvScriptInnerAsync,null,[function(F,D){F?L(!0):V(D),N.next()}])})}}(),C.KPainter=O}(dynamsoft,dynamsoft.lib.view),function(g){function S(C,T){this.name=C.toString(),this.message=T,this.mbcEnumError=C}S.prototype.toString=function(){return`${this.name}: ${this.message}`},g.MbcException=S}(dynamsoft.lib),function(g){'use strict';function S(Q){return Array.prototype.slice.call(Q)}function C(Q){return new Promise(function(J,Z){Q.onsuccess=function(){J(Q.result)},Q.onerror=function(){Z(Q.error)}})}function T(Q,J,Z){var te=new Promise(function(ne,ie){ee=Q[J](...Z),C(ee).then(ne,ie)}),ee;return te.request=ee,te}function P(Q,J,Z){var ee=T(Q,J,Z);return ee.then(function(te){return te?new V(te,ee.request):void 0})}function E(Q,J,Z){Z.forEach(function(ee){Object.defineProperty(Q.prototype,ee,{get:function(){return this[J][ee]},set:function(te){this[J][ee]=te}})})}function I(Q,J,Z,ee){ee.forEach(function(te){te in Z.prototype&&(Q.prototype[te]=function(){return T(this[J],te,arguments)})})}function O(Q,J,Z,ee){ee.forEach(function(te){te in Z.prototype&&(Q.prototype[te]=function(){return this[J][te].apply(this[J],arguments)})})}function N(Q,J,Z,ee){ee.forEach(function(te){te in Z.prototype&&(Q.prototype[te]=function(){return P(this[J],te,arguments)})})}function L(Q){this._index=Q}function V(Q,J){this._cursor=Q,this._request=J}function F(Q){this._store=Q}function D(Q){this._tx=Q,this.complete=new Promise(function(J,Z){Q.oncomplete=function(){J()},Q.onerror=function(){Z(Q.error)},Q.onabort=function(){Z(Q.error)}})}function R(Q,J,Z){this._db=Q,this.oldVersion=J,this.transaction=new D(Z)}function U(Q){this._db=Q}function W(Q,J,Z){var ee=T(indexedDB,'open',[Q,J]),te=ee.request;return te.onupgradeneeded=function(ne){Z&&Z(new R(te.result,ne.oldVersion,te.transaction))},ee.then(function(ne){return new U(ne)})}function z(){var Q=this;Q.bIdbAvailable=!!window.indexedDB,Q.idbPromise=W(q,1,J=>{J.createObjectStore(G,{keyPath:'id'})}).catch(J=>{console.log(J),Q.bIdbAvailable=!1}),Q.imageDataRepoAlternator=new Map,z.registerredImageDataRepo=z.registerredImageDataRepo||this}E(L,'_index',['name','keyPath','multiEntry','unique']),I(L,'_index',IDBIndex,['get','getKey','getAll','getAllKeys','count']),N(L,'_index',IDBIndex,['openCursor','openKeyCursor']),E(V,'_cursor',['direction','key','primaryKey','value']),I(V,'_cursor',IDBCursor,['update','delete']),['advance','continue','continuePrimaryKey'].forEach(function(Q){Q in IDBCursor.prototype&&(V.prototype[Q]=function(){var J=this,Z=arguments;return Promise.resolve().then(function(){return J._cursor[Q].apply(J._cursor,Z),C(J._request).then(function(ee){return ee?new V(ee,J._request):void 0})})})}),F.prototype.createIndex=function(){return new L(this._store.createIndex.apply(this._store,arguments))},F.prototype.index=function(){return new L(this._store.index.apply(this._store,arguments))},E(F,'_store',['name','keyPath','indexNames','autoIncrement']),I(F,'_store',IDBObjectStore,['put','add','delete','clear','get','getAll','getKey','getAllKeys','count']),N(F,'_store',IDBObjectStore,['openCursor','openKeyCursor']),O(F,'_store',IDBObjectStore,['deleteIndex']),D.prototype.objectStore=function(){return new F(this._tx.objectStore.apply(this._tx,arguments))},E(D,'_tx',['objectStoreNames','mode']),O(D,'_tx',IDBTransaction,['abort']),R.prototype.createObjectStore=function(){return new F(this._db.createObjectStore.apply(this._db,arguments))},E(R,'_db',['name','version','objectStoreNames']),O(R,'_db',IDBDatabase,['deleteObjectStore','close']),U.prototype.transaction=function(){return new D(this._db.transaction.apply(this._db,arguments))},E(U,'_db',['name','version','objectStoreNames']),O(U,'_db',IDBDatabase,['close']),['openCursor','openKeyCursor'].forEach(function(Q){[F,L].forEach(function(J){J.prototype[Q.replace('open','iterate')]=function(){var Z=S(arguments),ee=Z[Z.length-1],te=this._store||this._index,ne=te[Q](...Z.slice(0,-1));ne.onsuccess=function(){ee(ne.result)}}})}),[L,F].forEach(function(Q){Q.prototype.getAll||(Q.prototype.getAll=function(J,Z){var ee=this,te=[];return new Promise(function(ne){ee.iterateCursor(J,function(ie){return ie?(te.push(ie.value),void 0!==Z&&te.length==Z?void ne(te):void ie.continue()):void ne(te)})})})});const q='dynamsoft_view'+Date.now(),G='image_data',Y={readonly:'readonly',readwrite:'readwrite',versionchange:'versionchange'};z.prototype.addEntityAsync=function(Q){const Z=this;return Z.bIdbAvailable?new Promise((ee,te)=>{const ne=new FileReader;ne.onload=function(){ee(this.result)},ne.onerror=ie=>{te(ie)},ne.readAsArrayBuffer(Q.data)}).then(ee=>{return Z.idbPromise.then(te=>{const ne=te.transaction(G,Y.readwrite);return ne.objectStore(G).put({id:Q.id,data:{buffer:ee,type:Q.data.type}}),ne.complete.then(()=>{return!0},()=>{return Z.imageDataRepoAlternator.set(Q.id,Q.data),!0})})}):new Promise(ee=>{Z.imageDataRepoAlternator.set(Q.id,Q.data),ee(!0)})},z.prototype.removeEntityAsync=function(Q){const Z=this;return Z.bIdbAvailable?Z.idbPromise.then(ee=>{const te=ee.transaction(G,Y.readwrite);return te.objectStore(G).delete(Q),te.complete.then(()=>{return Z.imageDataRepoAlternator.delete(Q),!0},ne=>{throw ne})}):new Promise(ee=>{Z.imageDataRepoAlternator.delete(Q),ee(!0)})},z.prototype.getEntityAsync=function(Q){const Z=this,ee='No entity exists.';return Z.bIdbAvailable?Z.idbPromise.then(te=>{return te.transaction(G).objectStore(G).get(Q).then(ne=>{if(!ne&&!Z.imageDataRepoAlternator.get(Q))throw ee;return ne?new Blob([ne.data.buffer],{type:ne.data.type}):Z.imageDataRepoAlternator.get(Q)},ne=>{throw ne})}):new Promise((te,ne)=>{const ie=Z.imageDataRepoAlternator.get(Q);ie?te(ie):ne(ee)})},z.prototype.updateEntityAsync=z.prototype.addEntityAsync,z.prototype.getEntityCountAsync=function(){const Q=this;return Q.bIdbAvailable?Q.idbPromise.then(J=>{return J.transaction(G).objectStore(G).count().then(Z=>{return Z+Q.imageDataRepoAlternator.size},()=>{return Q.imageDataRepoAlternator.size})}):new Promise(J=>{J(Q.imageDataRepoAlternator.size)})},z.prototype.deleteDbAsync=function(){return this.imageDataRepoAlternator.clear(),this.idbPromise.then(Q=>{Q.close(),window.indexedDB.deleteDatabase(q)})},window.addEventListener('beforeunload',function(){z.registerredImageDataRepo&&z.registerredImageDataRepo.deleteDbAsync().then(()=>console.log('delete successfully')).catch(()=>console.log('delete failed'))}),g.ImageDataRepo=z}(dynamsoft.lib),function(g,S){function C(L){const V=this;if(V.__setErrorOk(),V.__setError(...V.__validateArgsLength(null,arguments)),V.errCode!==O.getOkCode())throw new S.MbcException(V.errCode,V.errStr);if(!S.isObject(L))throw new S.MbcException(O.getTypeNotValidCode(),O.getTypeNotValidString('configuration'));V.__preprocessConfig(L);const F=[[L.strHtmlElementId,'configuration.strHtmlElementId',!1],[L.videoViewer.strHtmlElementId,'configuration.videoViewer.strHtmlElementId',!0],[L.thumbnailViewer.strHtmlElementId,'configuration.thumbnailViewer.strHtmlElementId',!0]];for(let H=0;H<F.length;H++)if(V.__setError(...V.__validateDomDiv(...F[H])),V.errCode!==O.getOkCode())throw new S.MbcException(V.errCode,V.errStr);else if(F[H][0])if(N.has(F[H][0]))throw new S.MbcException(O.getDivInUsedCode(),O.getDivInUsedString(F[H][0]));else N.add(F[H][0]);L.strHtmlElementId=L.strHtmlElementId.trim(),L.videoViewer.strHtmlElementId=L.videoViewer.strHtmlElementId.trim(),L.thumbnailViewer.strHtmlElementId=L.thumbnailViewer.strHtmlElementId.trim();const D=[[L.imageViewer.funcImageViewerWrapper,'configuration.imageViewer.funcImageViewerWrapper'],[L.videoViewer.funcVideoViewerWrapper,'configuration.videoViewer.funcVideoViewerWrapper'],[L.thumbnailViewer.funcThumbnailViewerWrapper,'configuration.thumbnailViewer.funcThumbnailViewerWrapper'],[L.thumbnailViewer.funcThumbnailWrapper,'configuration.thumbnailViewer.funcThumbnailWrapper'],[L.toolbar.funcToolbarWrapper,'configuration.toolbar.funcToolbarWrapper'],[L.toolbar.funcToolbarWrapper,'configuration.toolbar.funcSubsidiaryToolbarWrapper']];for(let H=0;H<D.length;H++)if(V.__setError(...V.__validateWrapperFunction(...D[H])),V.errCode!==O.getOkCode())throw new S.MbcException(V.errCode,V.errStr);const R=L.strHtmlElementId,U=document.getElementById(R);var W=this.painter=new E(L,V);W.setCropRectStyle(1),U.appendChild(W.getHtmlElement()),T(this)}function T(L){let V=new g.mbc.VideoViewer.__getInstance(L),F=new g.mbc.ImageViewer.__getInstance(L),D=new g.mbc.ImageEditor.__getInstance(L),R=new g.mbc.ThumbnailViewer.__getInstance(L),U=new g.mbc.Toolbar.__getInstance(L);Object.defineProperties(L,{videoViewer:{value:V,enumerable:!0},imageViewer:{value:F,enumerable:!0},imageEditor:{value:D,enumerable:!0},thumbnailViewer:{value:R,enumerable:!0},toolbar:{value:U,enumerable:!0},strClientId:{enumerable:!0,configurable:!1,get(){return L.painter.__clientId},set(W){S.isString(W)&&(L.painter.__clientId=W)}}})}var P=S.K,E=S.KPainter,I=g.MbcEnumError,O=S.errorInfo;const N=new Set;C.prototype.__validateDomDiv=(L,V,F)=>{if(!S.isString(L))return[O.getTypeNotValidCode(),O.getTypeNotValidString(V)];if(L=L.trim(),F&&!L)return[O.getOkCode(),O.getOkString()];const D=document.getElementById(L);return D?D instanceof HTMLDivElement?0<P(D).children().length||0!=D.innerHTML.trim().length?[O.getContainerIsNotEmptyCode(),O.getContainerIsNotEmptyString()]:[O.getOkCode(),O.getOkString()]:[O.getContainerTypeNotValidCode(),O.getContainerTypeNotValidString()]:[O.getContainerIdNotValidCode(),O.getContainerIdNotValidString(L)]},C.prototype.__validateWrapperFunction=(L,V)=>{if(L){if(!S.isFunction(L))return[O.getTypeNotValidCode(),O.getTypeNotValidString(V)];const F=L(new Image);if(!F||!(F instanceof HTMLDivElement))return[O.getWrapperFunctionInvalidCode(),O.getWrapperFunctionInvalidString(V)]}return[O.getOkCode(),O.getOkString()]},C.prototype.__preprocessConfig=function(L){L.strHtmlElementId=L.strHtmlElementId||'',L.imageViewer=L.imageViewer||{},L.editorViewer=L.editorViewer||{};const V=L.videoViewer=L.videoViewer||{};V.strHtmlElementId=V.strHtmlElementId||'';const F=L.thumbnailViewer=L.thumbnailViewer||{};F.strHtmlElementId=F.strHtmlElementId||'',L.toolbar=L.toolbar||{}},C.prototype.__validateArgsLength=function(L,V){const F=this,D=L?F.constructor.prototype[L].length:F.constructor.length;return V.length<D?[O.getParameterNumberUnmatchedCode(),O.getParameterNumberUnmatchedString(!0)]:[O.getOkCode(),O.getOkString()]},C.prototype.on=function(L,V){const F=this;if(F.__setErrorOk(),F.__setError(...F.__validateArgsLength('on',arguments)),F.errCode!==O.getOkCode())return!1;if(!S.isString(L))return F.__setError(O.getTypeNotValidCode(),O.getTypeNotValidString('strEventName')),!1;if(L=L.trim().toLowerCase(),!S.isFunction(V))return F.__setError(O.getTypeNotValidCode(),O.getTypeNotValidString('funcCallback')),!1;switch(L){case'onrefreshui':F.painter.setOnNumChange(V);break;case'onstartloading':F.painter.setOnStartLoading(V);break;case'onfinishloading':F.painter.setOnFinishLoading(V);break;default:return F.__setError(O.getValueNotValidCode(),O.getValueNotValidString('strEventName')),!1;}return!0},C.prototype.__setErrorOk=function(){this.errCode=O.getOkCode(),this.errStr=O.getOkString()},C.prototype.__setError=function(L,V){if(arguments[0]instanceof Error){var F=arguments[0];this.errCode=I[F.name]||I.UndefineError,this.errStr=F.message}else this.errCode=L,this.errStr=V},C.prototype.getErrorCode=function(){return this.errCode},C.prototype.getErrorString=function(){return this.errStr},g.mbc=g.mbc||{},g.mbc.View=C}(dynamsoft,dynamsoft.lib),function(g,S,C){function T(){throw new S.MbcException(P.getUnInstantiatedCode(),P.getUnInstantiatedString('VideoViewer'))}const P=S.errorInfo;T.prototype.show=function(){const E=this._viewObj,I=E.painter;E.__setErrorOk(),I.showVideoViewer()},T.prototype.hide=function(){const E=this._viewObj,I=E.painter;E.__setErrorOk(),I.hideVideoViewer()},T.prototype.isVideoStreamSupported=function(){const E=this._viewObj,I=E.painter;return E.__setErrorOk(),I.isUserMediaValid()},T.prototype.playAsync=function(){const E=this._viewObj,I=E.painter;return new Promise(function(O,N){E.__setErrorOk(),I.playVideoAsync().then(L=>{O(L)}).catch(L=>{E.__setError(L),N(L)})})},T.prototype.pause=function(){const E=this._viewObj,I=E.painter;return E.__setError(...I.pauseVideo()),E.errCode===P.getOkCode()},T.prototype.stop=function(){const E=this._viewObj,I=E.painter;return E.__setError(...I.stopVideo()),E.errCode===P.getOkCode()},T.__getInstance=function(E){let I=S.inherit(T.prototype);return I._viewObj=E,I},C.VideoViewer=T}(dynamsoft,dynamsoft.lib,dynamsoft.mbc),function(g,S,C){function T(){throw new S.MbcException(E.getUnInstantiatedCode(),E.getUnInstantiatedString('ImageViewer'))}const P=g.MbcEnumError,E=S.errorInfo,I=S.kUtil;T.prototype.addImageFromVideoAsync=function(N){const L=this,V=L._viewObj,F=V.painter,D=arguments;return new Promise(function(R,U){let W,H;[W,H]=V.__validateArgsLength.call(L,'addImageFromVideoAsync',D);let z;return W===E.getOkCode()?S.isBoolean(N)?void F.grabVideo(!N).then(q=>{return N?void F.documentDetectAsync((G,X)=>{G?F.freeTransformAsync((Y,$)=>{Y?F.addImageAsync(Y).then(Q=>{V.__setErrorOk(),F.showVideoFrameInToolbar(R,Q)}).catch(Q=>{V.__setError(Q),U(Q)}):(V.__setError($),U($))},G,q):(V.__setError(X),U(X))},q):(V.__setErrorOk(),void R(q))}).catch(q=>{V.__setError(q),U(q)}):(z=Error(E.getTypeNotValidString('bAutoCrop')),z.name=E.getTypeNotValidCode(),V.__setError(z),void U(z)):(z=Error(H),z.name=W,V.__setError(z),void U(z))})},T.prototype.addImagesFromOtherSourceAsync=function(N,L){N instanceof Array||(N=[N]);var V=this,F=this._viewObj,D=F.painter,R=[],U=0;return N.forEach(W=>{L?R.push(new Promise(H=>{D.documentDetectAsync((q,G)=>{return q?void D.freeTransformAsync((X,Y)=>{X?D.addImageAsync(X).then($=>{++U==R.length&&F.__setErrorOk(),H($)}).catch($=>{F.__setError($),H($)}):(F.__setError(Y),H(Y))},q,W):(F.__setError(G),void H(G))},W)})):R.push(new Promise(H=>{D.addImageAsync(W).then(q=>{++U==R.length&&F.__setErrorOk(),H(q)}).catch(q=>{F.__setError(q),H(q)})}))}),Promise.all(R)};['first','previous','next','last'].forEach(N=>{(function(L){T.prototype[L]=function(){const V=this._viewObj,F=V.painter;V.__setErrorOk();let D;switch(N){case'previous':D='p';break;case'next':D='n';break;case'last':D='l';break;case'first':default:D='f';}const R=F.changePage(D);return!R||(V.__setError(R),!1)}})(N)}),T.prototype.go=function(N){const L=this._viewObj,V=L.painter;if(L.__setErrorOk(),L.__setError(...L.__validateArgsLength.call(this,'go',arguments)),L.errCode!==E.getOkCode())return!1;if(!S.isNumber(N)||N!==N)return L.__setError(E.getValueNotValidCode(),E.getValueNotValidString('index')),!1;const F=V.changePage(N);return!F||(L.__setError(F),!1)},T.prototype.getSelectedImageIndex=function(){const N=this._viewObj,L=N.painter;return N.__setErrorOk(),L.getCurIndex()},T.prototype.remove=function(){const N=this._viewObj,L=N.painter;N.__setErrorOk();const V=L.del();return!V||(N.__setError(V),!1)},T.prototype.getImageBlobAsync=function(N){const L=this._viewObj,V=L.painter;return new Promise((F,D)=>{var R;if(void 0==N){if(R=V.getImage(!0),!R){var U=Error(E.getBufferIsEmptyString());return U.name=P.BufferIsEmpty,L.__setError(U),D(U)}}else if(R=V.getImage(!0,N),!R){var U=Error(E.getValueNotValidString('index'));return U.name=P.ValueNotValid,L.__setError(U),D(U)}V.imageDataRepo.getEntityAsync(R.kPainterBlobId).then(W=>{L.__setErrorOk(),F(W)}).catch(W=>{L.__setError(W),D(W)})})},T.prototype.downloadAsync=function(N){const L=this,V=L._viewObj,F=V.painter,D=arguments;let R,U;return function(){let W,H;if([W,H]=V.__validateArgsLength.call(L,'downloadAsync',D),W!==E.getOkCode())return R=Error(H),void(R.name=W);if(!S.isString(N))return R=Error(E.getTypeNotValidString('strFileName')),void(R.name=E.getTypeNotValidCode());if(U=D[1],void 0==U)U=F.getCurIndex();else if(!S.isNumber(U))return R=Error(E.getTypeNotValidString('opt_index')),void(R.name=E.getTypeNotValidCode())}(),R?(V.__setError(R),new Promise((W,H)=>{H(R)})):new Promise(function(W,H){F.download(N,U).then(()=>{V.__setErrorOk(),W(!0)}).catch(z=>{V.__setError(z),H(z)})})},T.prototype.getConsumedImageSize=function(N,L){var V=this._viewObj,F=V.painter;if(2!==arguments.length)return V.__setError(P.ParameterNumberUnmatched,E.getParameterNumberUnmatchedString(2>arguments.length)),NaN;if(!S.isBoolean(N)||!S.isBoolean(L))return V.__setError(P.TypeNotValid,E.getTypeNotValidString(S.isBoolean(N)?'bMulti':'bSnapshot')),NaN;var D=[];if(L)for(var R=0;R<F.getCount();++R)D.push(F.getImage(!0,R));else D.push(F.getImage(!0,F.getCurIndex()));for(var U=0,R=0;R<D.length;++R){var W=D[R],H=F.blobReferenceDictionary[W.kPainterBlobId];U+=N?Math.min(H.width*H.height,345600,H.size):H.size}return V.__setErrorOk(),U},T.prototype.setPreUploadPage=function(N,L){var V=this._viewObj,F=V.painter;if(1>arguments.length)return V.__setError(P.ParameterNumberUnmatched,E.getParameterNumberUnmatchedString(!0)),!1;if(2<arguments.length)return V.__setError(P.ParameterNumberUnmatched,E.getParameterNumberUnmatchedString(!1)),!1;if(!S.isString(N))return V.__setError(P.TypeNotValid,E.getTypeNotValidString('strUri')),!1;if(!N.trim())return V.__setError(P.ValueNotValid,E.getValueNotValidString('strUri')),!1;if(F.__preUploadPage=N,F.__isPreUploadOri=L,!F.__clientId){var D=new FormData;D.append('MbcMethod','getClientId'),fetch(N,{method:'POST',body:D}).then(R=>R.json()).then(R=>{if(!R.MbcSuccess)throw Error();return F.__clientId=F.__clientId||R.MbcClientId,new Promise(U=>U())})}return V.__setErrorOk(),!0},T.prototype.uploadAsync=function(N,L,V,F,D){var R=this._viewObj,U=R.painter;return new Promise((W,H)=>{if(5>arguments.length){var z=Error(E.getParameterNumberUnmatchedString(!0));return z.name=P.ParameterNumberUnmatched,R.__setError(z),H(z)}if(!S.isString(N)){var z=Error(E.getTypeNotValidString('strUri'));return z.name=P.TypeNotValid,R.__setError(z),H(z)}if(N=N.trim(),0===N.length){var z=Error(E.getValueNotValidString('strUri'));return z.name=P.ValueNotValid,R.__setError(z),H(z)}if(!S.isString(L)){var z=Error(E.getTypeNotValidString('strImageType'));return z.name=P.TypeNotValid,R.__setError(z),H(z)}L=L.trim().toLowerCase();var q=g.MbcEnumFileType;if(0===L.length||L!=q.FT_BMP&&L!=q.FT_JPG&&L!=q.FT_PNG&&L!=q.FT_PDF&&L!=q.FT_TIF){var z=Error(E.getValueNotValidString('strImageType'));return z.name=P.ValueNotValid,R.__setError(z),H(z)}if(!S.isBoolean(V)||!S.isBoolean(F)){var z=Error(S.isBoolean(V)?'bMulti':'bSnapshot');return z.name=P.TypeNotValid,R.__setError(z),H(z)}if(!S.isString(D)){var z=Error(E.getTypeNotValidString('strDestFileName'));return z.name=P.TypeNotValid,R.__setError(z),H(z)}if(D=D.trim(),0===D.length||!/^[^\\/:*?"<>\|]+$/.test(D)){var z=Error('A file name can\'t contain only of the following characters: \\/:*?"<>|');return z.name=P.ValueNotValid,R.__setError(z),H(z)}if(0===U.getCount()){var z=Error(E.getBufferIsEmptyString());return z.name=P.BufferIsEmpty,R.__setError(z),H(z)}var G=[];if(F)for(let $=0;$<U.getCount();++$)G.push(U.getImage(!0,$));else G.push(U.getImage(!0,U.getCurIndex()));var X=new Promise($=>$());U.__clientId||(X=X.then(()=>{var $=new FormData;return $.append('MbcMethod','getClientId'),fetch(N,{method:'POST',body:$})}).then($=>$.json()).then($=>{if(!$.MbcSuccess)throw Error($.Message);return U.__clientId=U.__clientId||$.MbcClientId,new Promise(Q=>Q())}));var Y=[];for(let $=0;$<G.length;++$){let Q=G[$],J=V?Q.kPainterOriSnapshotBlobId:Q.kPainterOriBlobId;Y.push({id:J,process:Q.kPainterProcess?JSON.parse(JSON.stringify(Q.kPainterProcess)):null}),X=X.then(()=>{var Z=new FormData;return Z.append('MbcClientId',U.__clientId),Z.append('MbcMethod','askIfExist'),Z.append('MbcBlobId',JSON.stringify([J])),fetch(N,{method:'POST',body:Z})}).then(Z=>Z.json()).then(Z=>{if(!Z.MbcSuccess)throw Error(Z.Message);return Z.ArrMbcIfExistImage&&Z.ArrMbcIfExistImage[0]?new Promise(ee=>ee()):U.imageDataRepo.getEntityAsync(J).then(ee=>{var te=new FormData;return te.append('MbcClientId',U.__clientId),te.append('MbcMethod','upload'),te.append('MbcBlobId',J),te.append('MbcBlob',ee),fetch(N,{method:'POST',body:te})}).then(ee=>ee.json()).then(ee=>{if(!ee.MbcSuccess)throw Error(ee.Message);else return new Promise(te=>te())})})}X.then(()=>{var $=new FormData;$.append('MbcClientId',U.__clientId),$.append('MbcMethod','generate');for(let Z=0;Z<Y.length;++Z){var Q=Y[Z].process;if(Q){var J=Q.transform;J&&(new I.Matrix(1,0,0,1,0,0).equals(J)?Q.transform={mirror:!1,rotate:0}:new I.Matrix(-1,0,0,1,0,0).equals(J)?Q.transform={mirror:!0,rotate:0}:new I.Matrix(0,-1,1,0,0,0).equals(J)?Q.transform={mirror:!1,rotate:90}:new I.Matrix(0,1,1,0,0,0).equals(J)?Q.transform={mirror:!0,rotate:90}:new I.Matrix(-1,0,0,-1,0,0).equals(J)?Q.transform={mirror:!1,rotate:180}:new I.Matrix(1,0,0,-1,0,0).equals(J)?Q.transform={mirror:!0,rotate:180}:new I.Matrix(0,1,-1,0,0,0).equals(J)?Q.transform={mirror:!1,rotate:270}:new I.Matrix(0,-1,-1,0,0,0).equals(J)&&(Q.transform={mirror:!0,rotate:270}))}}return $.append('MbcBlobInfoArr',JSON.stringify(Y)),$.append('MbcFormat',L),$.append('MbcFileName',D),fetch(N,{method:'POST',body:$})}).then($=>$.json()).then($=>{if(!$.MbcSuccess)throw Error($.Message);R.__setErrorOk(),W($)}).catch($=>{var Q=Error($.message||E.getUploadFileFailedString());Q.name=P.UploadFileFailed,R.__setError(Q),H(Q)})})},T.__getInstance=function(N){let L=S.inherit(T.prototype);return L._viewObj=N,Object.defineProperty(L,'imageCount',{enumerable:!0,configurable:!1,get(){return N.painter.getCount()}}),L},C.ImageViewer=T}(dynamsoft,dynamsoft.lib,dynamsoft.mbc),function(g,S,C){function T(){throw new S.MbcException(E.getUnInstantiatedCode(),E.getUnInstantiatedString('ImageEditor'))}const P=g.MbcEnumError,E=S.errorInfo;T.prototype.initEditorAsync=function(){const N=this._viewObj,L=N.painter;return new Promise(function(V,F){L.enterEditAsync().then(D=>{N.__setErrorOk(),V(D)}).catch(D=>{N.__setError(D),F(D)})})},T.prototype.saveAsync=function(N){const L=this,V=L._viewObj,F=V.painter,D=arguments;return new Promise(function(R,U){let W,H;[W,H]=V.__validateArgsLength.call(L,'saveAsync',D);let z;return W===E.getOkCode()?S.isBoolean(N)?void F.saveEditAsync(!N).then(q=>{R(q)}).catch(q=>{V.__setError(q),U(q)}):(z=Error(E.getTypeNotValidString('bNewImage')),z.name=E.getTypeNotValidCode(),V.__setError(z),void U(z)):(z=Error(H),z.name=W,V.__setError(z),void U(z))})},T.prototype.discard=function(){const N=this._viewObj,L=N.painter;return N.__setErrorOk(),L.cancelEdit(),!0};['undoAsync','redoAsync'].forEach(N=>{(function(L){T.prototype[L]=function(){const V=this._viewObj,F=V.painter;return new Promise(function(D,R){F[L](function(U,W){U?(V.__setErrorOk(),D()):(V.__setError(W),R(W))})})}})(N)});['rotateLeft','rotateRight','mirror'].forEach(N=>{(function(L){T.prototype[L]=function(){const V=this._viewObj,F=V.painter;V.__setErrorOk();const D=F[L]();return!D||(V.__setError(D),!1)}})(N)}),T.prototype.showRectBorder=function(){var N=this._viewObj,L=N.painter,V=L.showCropRect();return V?(N.__setError(V),!1):(N.__setErrorOk(),!0)},T.prototype.hideRectBorder=function(){var N=this._viewObj,L=N.painter;return L.hideCropRect(),N.__setErrorOk(),!0},T.prototype.cropAsync=function(){const N=this._viewObj,L=N.painter;return new Promise(function(V,F){L.cropAsync().then(D=>{N.__setErrorOk(),V(D)}).catch(D=>{N.__setError(D),F(D)})})},T.prototype.installTransformModuleAsync=function(){const N=this._viewObj,L=N.painter;return new Promise(function(V,F){S.KPainter.loadCvScriptAsync().then(()=>{N.__setErrorOk(),V(!0),L.removeActiveState()}).catch(D=>{N.__setError(D),F(D),L.removeActiveState()})})},T.prototype.enterDocTransformModeAsync=function(){const N=this._viewObj,L=N.painter;return new Promise(function(V,F){L.enterFreeTransformModeAsync(function(D,R){return D?(N.__setErrorOk(),V(!0)):(N.__setError(R),F(R))})})},T.prototype.exitDocTransformModeAsync=function(){const N=this._viewObj,L=N.painter;return new Promise(function(V,F){L.exitFreeTransformModeAsync(function(D,R){return D?(N.__setErrorOk(),V(!0)):(N.__setError(R),F(R))})})},T.prototype.detectDocBorderAsync=function(){const N=this._viewObj,L=N.painter;return new Promise((V,F)=>{L.documentDetectAsync((D,R)=>{D?(N.__setErrorOk(),V(D)):(N.__setError(R),F(R))})})},T.prototype.transformAsync=function(){const N=this._viewObj,L=N.painter;return new Promise((V,F)=>{L.freeTransformAsync((D,R)=>{D?(N.__setErrorOk(),V(!0)):(N.__setError(R),F(R))})})},T.__getInstance=function(N){let L=S.inherit(T.prototype);return L._viewObj=N,L},C.ImageEditor=T}(dynamsoft,dynamsoft.lib,dynamsoft.mbc),function(g,S){function C(){throw new g.MbcException(T.getUnInstantiatedCode(),T.getUnInstantiatedString('ThumbnailViewer'))}const T=g.errorInfo;C.prototype.show=function(){this._viewObj.painter.showThumbnailViewer()},C.prototype.hide=function(){this._viewObj.painter.hideThumbnailViewer()},C.prototype.__setup=function(P){const E=this._viewObj,I=E.painter;if(!g.isObject(P))return E.__setError(T.getTypeNotValidCode(),T.getTypeNotValidString('configuration')),!1;const O=[[P.funcThumbnailViewerWrapper,'configuration.funcThumbnailViewerWrapper'],[P.funcThumbnailViewerWrapper,'configuration.funcThumbnailViewerWrapper']];for(let N=0;N<O.length;N++)if(E.__setError(...E.__validateWrapperFunction(...O[N])),E.errCode!==T.getOkCode())return!1;return I.updateThumbnailViewerConf(P),!0},C.prototype.__getCurrentConfiguration=function(){const P=this._viewObj,E=P.painter;return E.getThumbnailConf()},C.__getInstance=function(P){let E=g.inherit(C.prototype);return E._viewObj=P,Object.defineProperty(E,'configuration',{enumerable:!0,configurable:!1,get(){return E.__getCurrentConfiguration()},set(I){E.__setup(I)}}),E},S.ThumbnailViewer=C}(dynamsoft.lib,dynamsoft.mbc),function(g,S){function C(){throw new g.MbcException(T.getUnInstantiatedCode(),T.getUnInstantiatedString('Toolbar'))}const T=g.errorInfo;C.prototype.show=function(){this._viewObj.painter.showToolbar()},C.prototype.hide=function(){this._viewObj.painter.hideToolbar()},C.__getInstance=function(P){let E=g.inherit(C.prototype);return E._viewObj=P,E},S.Toolbar=C}(dynamsoft.lib,dynamsoft.mbc);